var IS=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var UN=IS((_f,vf)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();/**
 * @license
 * lodash 3.6.0 (Custom Build) lodash.com/license | Underscore.js 1.8.2 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./lodash.js`
 */(function(){function s(ht,D){if(ht!==D){var Lt=ht===ht,Gt=D===D;if(ht>D||!Lt||typeof ht>"u"&&Gt)return 1;if(ht<D||!Gt||typeof D>"u"&&Lt)return-1}return 0}function t(ht,D,Lt){for(var Gt=ht.length,$t=Lt?Gt:-1;Lt?$t--:++$t<Gt;)if(D(ht[$t],$t,ht))return $t;return-1}function n(ht,D,Lt){if(D!==D)return N(ht,Lt);Lt-=1;for(var Gt=ht.length;++Lt<Gt;)if(ht[Lt]===D)return Lt;return-1}function i(ht){return typeof ht=="function"||!1}function o(ht){return typeof ht=="string"?ht:ht==null?"":ht+""}function u(ht){return ht.charCodeAt(0)}function m(ht,D){for(var Lt=-1,Gt=ht.length;++Lt<Gt&&-1<D.indexOf(ht.charAt(Lt)););return Lt}function y(ht,D){for(var Lt=ht.length;Lt--&&-1<D.indexOf(ht.charAt(Lt)););return Lt}function E(ht,D){return s(ht.a,D.a)||ht.b-D.b}function T(ht){return Me[ht]}function S(ht){return nn[ht]}function x(ht){return"\\"+Rr[ht]}function N(ht,D,Lt){var Gt=ht.length;for(D+=Lt?0:-1;Lt?D--:++D<Gt;){var $t=ht[D];if($t!==$t)return D}return-1}function V(ht){return!!ht&&typeof ht=="object"}function tt(ht){return 160>=ht&&9<=ht&&13>=ht||ht==32||ht==160||ht==5760||ht==6158||8192<=ht&&(8202>=ht||ht==8232||ht==8233||ht==8239||ht==8287||ht==12288||ht==65279)}function Z(ht,D){for(var Lt=-1,Gt=ht.length,$t=-1,gr=[];++Lt<Gt;)ht[Lt]===D&&(ht[Lt]=gt,gr[++$t]=Lt);return gr}function ot(ht){for(var D=-1,Lt=ht.length;++D<Lt&&tt(ht.charCodeAt(D)););return D}function bt(ht){for(var D=ht.length;D--&&tt(ht.charCodeAt(D)););return D}function pt(ht){return Ye[ht]}function wt(ht){function D(c){if(V(c)&&!(Wt(c)||c instanceof $t)){if(c instanceof Gt)return c;if(gn.call(c,"__chain__")&&gn.call(c,"__wrapped__"))return f(c)}return new Gt(c)}function Lt(){}function Gt(c,h,p){this.__wrapped__=c,this.__actions__=p||[],this.__chain__=!!h}function $t(c){this.__wrapped__=c,this.__actions__=null,this.__dir__=1,this.__filtered__=!1,this.__iteratees__=null,this.__takeCount__=es,this.__views__=null}function gr(){this.__data__={}}function Ir(c){var h=c?c.length:0;for(this.data={hash:Si(null),set:new so};h--;)this.push(c[h])}function Cr(c,h){var p=c.data;return(typeof h=="string"||an(h)?p.set.has(h):p.hash[h])?0:-1}function mn(c,h){var p=-1,v=c.length;for(h||(h=ge(v));++p<v;)h[p]=c[p];return h}function ir(c,h){for(var p=-1,v=c.length;++p<v&&h(c[p],p,c)!==!1;);return c}function na(c,h){for(var p=-1,v=c.length;++p<v;)if(!h(c[p],p,c))return!1;return!0}function Jo(c,h){for(var p=-1,v=c.length,A=-1,C=[];++p<v;){var j=c[p];h(j,p,c)&&(C[++A]=j)}return C}function Gr(c,h){for(var p=-1,v=c.length,A=ge(v);++p<v;)A[p]=h(c[p],p,c);return A}function Qr(c){for(var h=-1,p=c.length,v=fe;++h<p;){var A=c[h];A>v&&(v=A)}return v}function bn(c,h){for(var p=-1,v=c.length;++p<v;)if(h(c[p],p,c))return!0;return!1}function ra(c,h){return typeof c>"u"?h:c}function Wo(c,h,p,v){return typeof c<"u"&&gn.call(v,p)?c:h}function yr(c,h,p){var v=un(h);if(!p)return ji(h,c,v);for(var A=-1,C=v.length;++A<C;){var j=v[A],k=c[j],Y=p(k,h[j],j,c,h);(Y===Y?Y===k:k!==k)&&(typeof k<"u"||j in c)||(c[j]=Y)}return c}function ia(c,h){for(var p=-1,v=c.length,A=Ve(v),C=h.length,j=ge(C);++p<C;){var k=h[p];A?(k=parseFloat(k),j[p]=Ei(k,v)?c[k]:Et):j[p]=c[k]}return j}function ji(c,h,p){p||(p=h,h={});for(var v=-1,A=p.length;++v<A;){var C=p[v];h[C]=c[C]}return h}function pi(c,h,p){var v=typeof c;return v=="function"?typeof h>"u"?c:ke(c,h,p):c==null?Ki:v=="object"?Vn(c):typeof h>"u"?Kr(c+""):_s(c+"",h)}function gi(c,h,p,v,A,C,j){var k;if(p&&(k=A?p(c,v,A):p(c)),typeof k<"u")return k;if(!an(c))return c;if(v=Wt(c)){if(k=nu(c),!h)return mn(c,k)}else{var Y=on.call(c),it=Y==Dn;if(Y!=en&&Y!=xt&&(!it||A))return pe[Y]?ru(c,Y,h):A?c:{};if(k=Xa(it?{}:c),!h)return ji(c,k,un(c))}for(C||(C=[]),j||(j=[]),A=C.length;A--;)if(C[A]==c)return j[A];return C.push(c),j.push(k),(v?ir:we)(c,function(mt,ct){k[ct]=gi(mt,h,p,ct,c,C,j)}),k}function Mn(c,h,p){if(typeof c!="function")throw new Pr(yt);return ts(function(){c.apply(Et,p)},h)}function zi(c,h){var p=c?c.length:0,v=[];if(!p)return v;var A=-1,C=Or(),j=C==n,k=j&&200<=h.length?hl(h):null,Y=h.length;k&&(C=Cr,j=!1,h=k);t:for(;++A<p;)if(k=c[A],j&&k===k){for(var it=Y;it--;)if(h[it]===k)continue t;v.push(k)}else 0>C(h,k,0)&&v.push(k);return v}function uc(c,h){var p=!0;return Gn(c,function(v,A,C){return p=!!h(v,A,C)}),p}function sa(c,h){var p=[];return Gn(c,function(v,A,C){h(v,A,C)&&p.push(v)}),p}function Qa(c,h,p,v){var A;return p(c,function(C,j,k){return h(C,j,k)?(A=v?j:C,!1):void 0}),A}function pn(c,h,p){for(var v=-1,A=c.length,C=-1,j=[];++v<A;){var k=c[v];if(V(k)&&Ve(k.length)&&(Wt(k)||Mr(k))){h&&(k=pn(k,h,p));var Y=-1,it=k.length;for(j.length+=it;++Y<it;)j[++C]=k[Y]}else p||(j[++C]=k)}return j}function Zl(c,h){ni(c,h,Yi)}function we(c,h){return ni(c,h,un)}function $n(c,h){return is(c,h,un)}function qi(c,h){for(var p=-1,v=h.length,A=-1,C=[];++p<v;){var j=h[p];br(c[j])&&(C[++A]=j)}return C}function Yr(c,h,p,v,A,C){if(c===h)return c!==0||1/c==1/h;var j=typeof c,k=typeof h;return j!="function"&&j!="object"&&k!="function"&&k!="object"||c==null||h==null?c!==c&&h!==h:Hi(c,h,Yr,p,v,A,C)}function Hi(c,h,p,v,A,C,j){var k=Wt(c),ct=Wt(h),Y=Kt,it=Kt;k||(Y=on.call(c),Y==xt?Y=en:Y!=en&&(k=va(c))),ct||(it=on.call(h),it==xt?it=en:it!=en&&va(h));var mt=Y==en||A&&Y==Dn,ct=it==en||A&&it==Dn;if((it=Y==it)&&!k&&!mt)return ga(c,h,Y);if(A){if(!(it||mt&&ct))return!1}else{if(Y=mt&&gn.call(c,"__wrapped__"),ct=ct&&gn.call(h,"__wrapped__"),Y||ct)return p(Y?c.value():c,ct?h.value():h,v,A,C,j);if(!it)return!1}for(C||(C=[]),j||(j=[]),Y=C.length;Y--;)if(C[Y]==c)return j[Y]==h;return C.push(c),j.push(h),c=(k?sl:tu)(c,h,p,v,A,C,j),C.pop(),j.pop(),c}function be(c,h,p,v,A){for(var C=-1,j=h.length,k=!A;++C<j;)if(k&&v[C]?p[C]!==c[h[C]]:!(h[C]in c))return!1;for(C=-1;++C<j;){var Y=h[C],it=c[Y],mt=p[C];if(k&&v[C]?Y=typeof it<"u"||Y in c:(Y=A?A(it,mt,Y):Et,typeof Y>"u"&&(Y=Yr(mt,it,A,!0))),!Y)return!1}return!0}function aa(c,h){var p=[];return Gn(c,function(v,A,C){p.push(h(v,A,C))}),p}function Vn(c){var h=un(c),p=h.length;if(!p)return ei(!0);if(p==1){var v=h[0],A=c[v];if(Ti(A))return function(k){return k!=null&&k[v]===A&&(typeof A<"u"||v in An(k))}}for(var C=ge(p),j=ge(p);p--;)A=c[h[p]],C[p]=A,j[p]=Ti(A);return function(k){return k!=null&&be(An(k),h,C,j)}}function _s(c,h){return Ti(h)?function(p){return p!=null&&p[c]===h&&(typeof h<"u"||c in An(p))}:function(p){return p!=null&&Yr(h,p[c],null,!0)}}function tl(c,h,p,v,A){if(!an(c))return c;var C=Ve(h.length)&&(Wt(h)||va(h));return(C?ir:we)(h,function(j,k,Y){if(V(j)){v||(v=[]),A||(A=[]);t:{j=v;for(var it=A,mt=j.length,ct=Y[k];mt--;)if(j[mt]==ct){c[k]=it[mt],k=void 0;break t}mt=c[k],Y=p?p(mt,ct,k,c,Y):Et;var At=typeof Y>"u";At&&(Y=ct,Ve(ct.length)&&(Wt(ct)||va(ct))?Y=Wt(mt)?mt:mt&&mt.length?mn(mt):[]:Ds(ct)||Mr(ct)?Y=Mr(mt)?mc(mt):Ds(mt)?mt:{}:At=!1),j.push(ct),it.push(Y),At?c[k]=tl(Y,ct,p,j,it):(Y===Y?Y!==mt:mt===mt)&&(c[k]=Y),k=void 0}return k}it=c[k],Y=p?p(it,j,k,c,Y):Et,(ct=typeof Y>"u")&&(Y=j),!C&&typeof Y>"u"||!ct&&(Y===Y?Y===it:it!==it)||(c[k]=Y)}),c}function Kr(c){return function(h){return h==null?Et:h[c]}}function oa(c,h){return c+ba(Le()*(h-c+1))}function cc(c,h,p,v,A){return A(c,function(C,j,k){p=v?(v=!1,C):h(p,C,j,k)}),p}function yi(c,h,p){var v=-1,A=c.length;for(h=h==null?0:+h||0,0>h&&(h=-h>A?0:A+h),p=typeof p>"u"||p>A?A:+p||0,0>p&&(p+=A),A=h>p?0:p-h>>>0,h>>>=0,p=ge(A);++v<A;)p[v]=c[v+h];return p}function Ya(c,h){var p;return Gn(c,function(v,A,C){return p=h(v,A,C),!p}),!!p}function _i(c,h){var p=c.length;for(c.sort(h);p--;)c[p]=c[p].c;return c}function _r(c,h,p){var v=-1,A=c.length,C=Ve(A)?ge(A):[];return Gn(c,function(j){for(var k=h.length,Y=ge(k);k--;)Y[k]=j==null?Et:j[h[k]];C[++v]={a:Y,b:v,c:j}}),_i(C,function(j,k){var Y;t:{Y=-1;for(var it=j.a,mt=k.a,ct=it.length,At=p.length;++Y<ct;){var te=s(it[Y],mt[Y]);if(te){Y=Y<At?te*(p[Y]?1:-1):te;break t}}Y=j.b-k.b}return Y})}function Fi(c,h){var p=0;return Gn(c,function(v,A,C){p+=+h(v,A,C)||0}),p}function Xr(c,h){var p=-1,v=Or(),A=c.length,C=v==n,j=C&&200<=A,k=j?hl():null,Y=[];k?(v=Cr,C=!1):(j=!1,k=h?[]:Y);t:for(;++p<A;){var it=c[p],mt=h?h(it,p,c):it;if(C&&it===it){for(var ct=k.length;ct--;)if(k[ct]===mt)continue t;h&&k.push(mt),Y.push(it)}else 0>v(k,mt,0)&&((h||j)&&k.push(mt),Y.push(it))}return Y}function la(c,h){for(var p=-1,v=h.length,A=ge(v);++p<v;)A[p]=c[h[p]];return A}function vr(c,h,p,v){for(var A=c.length,C=v?A:-1;(v?C--:++C<A)&&h(c[C],C,c););return p?yi(c,v?0:C,v?C+1:A):yi(c,v?C+1:0,v?A:C)}function el(c,h){var p=c;p instanceof $t&&(p=p.value());for(var v=-1,A=h.length;++v<A;){var p=[p],C=h[v];Wi.apply(p,C.args),p=C.func.apply(C.thisArg,p)}return p}function $i(c,h,p){var v=0,A=c?c.length:v;if(typeof h=="number"&&h===h&&A<=Sa){for(;v<A;){var C=v+A>>>1,j=c[C];(p?j<=h:j<h)?v=C+1:A=C}return A}return xr(c,h,Ki,p)}function xr(c,h,p,v){h=p(h);for(var A=0,C=c?c.length:0,j=h!==h,k=typeof h>"u";A<C;){var Y=ba((A+C)/2),it=p(c[Y]),mt=it===it;(j?mt||v:k?mt&&(v||typeof it<"u"):v?it<=h:it<h)?A=Y+1:C=Y}return Tr(C,Tc)}function ke(c,h,p){if(typeof c!="function")return Ki;if(typeof h>"u")return c;switch(p){case 1:return function(v){return c.call(h,v)};case 3:return function(v,A,C){return c.call(h,v,A,C)};case 4:return function(v,A,C,j){return c.call(h,v,A,C,j)};case 5:return function(v,A,C,j,k){return c.call(h,v,A,C,j,k)}}return function(){return c.apply(h,arguments)}}function Gi(c){return Un.call(c,0)}function Zr(c,h,p){for(var v=p.length,A=-1,C=$e(c.length-v,0),j=-1,k=h.length,Y=ge(C+k);++j<k;)Y[j]=h[j];for(;++A<v;)Y[p[A]]=c[A];for(;C--;)Y[j++]=c[A++];return Y}function Qi(c,h,p){for(var v=-1,A=p.length,C=-1,j=$e(c.length-A,0),k=-1,Y=h.length,it=ge(j+Y);++C<j;)it[C]=c[C];for(j=C;++k<Y;)it[j+k]=h[k];for(;++v<A;)it[j+p[v]]=c[C++];return it}function Dr(c,h){return function(p,v,A){var C=h?h():{};if(v=Ae(v,A,3),Wt(p)){A=-1;for(var j=p.length;++A<j;){var k=p[A];c(C,k,v(k,A,p),p)}}else Gn(p,function(Y,it,mt){c(C,Y,v(Y,it,mt),mt)});return C}}function Ka(c){return function(){var h=arguments,p=h.length,v=h[0];if(2>p||v==null)return v;var A=h[p-2],C=h[p-1],j=h[3];for(3<p&&typeof A=="function"?(A=ke(A,C,5),p-=2):(A=2<p&&typeof C=="function"?C:null,p-=A?1:0),j&&Qt(h[1],h[2],j)&&(A=p==3?null:A,p=2),C=0;++C<p;)(j=h[C])&&c(v,j,A);return v}}function Jr(c,h){return function(p,v){var A=p?p.length:0;if(!Ve(A))return c(p,v);for(var C=h?A:-1,j=An(p);(h?C--:++C<A)&&v(j[C],C,j)!==!1;);return p}}function Wr(c){return function(h,p,v){var A=An(h);v=v(h);for(var C=v.length,j=c?C:-1;c?j--:++j<C;){var k=v[j];if(p(A[k],k,A)===!1)break}return h}}function nl(c,h){function p(){return(this&&this!==Fn&&this instanceof p?v:c).apply(h,arguments)}var v=ue(c);return p}function Fe(c){return function(h){var p=-1;h=pc(Xf(h));for(var v=h.length,A="";++p<v;)A=c(A,h[p],p);return A}}function ue(c){return function(){var h=ns(c.prototype),p=c.apply(h,arguments);return an(p)?p:h}}function ua(c){function h(p,v,A){return A&&Qt(p,v,A)&&(v=null),p=vi(p,c,null,null,null,null,null,v),p.placeholder=h.placeholder,p}return h}function vs(c,h){return function(p,v,A){A&&Qt(p,v,A)&&(v=null);var C=Ae(),j=v==null;if(C===pi&&j||(j=!1,v=C(v,A,3)),j){if(v=Wt(p),v||!bs(p))return c(v?p:ws(p));v=u}return eu(p,v,h)}}function rl(c,h){return function(p,v,A){return v=Ae(v,A,3),Wt(p)?(v=t(p,v,h),-1<v?p[v]:Et):Qa(p,v,c)}}function ca(c){return function(h,p,v){return h&&h.length?(p=Ae(p,v,3),t(h,p,c)):-1}}function fa(c){return function(h,p,v){return p=Ae(p,v,3),Qa(h,p,c,!0)}}function ti(c){return function(){var h=arguments.length;if(!h)return function(){return arguments[0]};for(var p,v=c?h:-1,A=0,C=ge(h);c?v--:++v<h;){var j=C[A++]=arguments[v];if(typeof j!="function")throw new Pr(yt);var k=p?"":Is(j);p=k=="wrapper"?new Gt([]):p}for(v=p?-1:h;++v<h;)j=C[v],k=Is(j),p=(A=k=="wrapper"?mu(j):null)&&Za(A[0])?p[Is(A[0])].apply(p,A[3]):j.length==1&&Za(j)?p[k]():p.thru(j);return function(){var Y=arguments;if(p&&Y.length==1&&Wt(Y[0]))return p.plant(Y[0]).value();for(var it=0,Y=C[it].apply(this,Y);++it<h;)Y=C[it].call(this,Y);return Y}}}function Es(c,h){return function(p,v,A){return typeof v=="function"&&typeof A>"u"&&Wt(p)?c(p,v):h(p,ke(v,A,3))}}function Er(c){return function(h,p,v){return(typeof p!="function"||typeof v<"u")&&(p=ke(p,v,3)),c(h,p,Yi)}}function il(c){return function(h,p,v){return(typeof p!="function"||typeof v<"u")&&(p=ke(p,v,3)),c(h,p)}}function Jl(c){return function(h,p,v){return(h=o(h))&&(c?h:"")+ma(h,p,v)+(c?"":h)}}function Ts(c){var h=Ze(function(p,v){var A=Z(v,h.placeholder);return vi(p,c,null,v,A)});return h}function ha(c,h){return function(p,v,A,C){var j=3>arguments.length;return typeof v=="function"&&typeof C>"u"&&Wt(p)?c(p,v,A,j):cc(p,Ae(v,C,4),A,j,h)}}function da(c,h,p,v,A,C,j,k,Y,it){function mt(){for(var cn=arguments.length,Ci=cn,We=ge(cn);Ci--;)We[Ci]=arguments[Ci];if(v&&(We=Zr(We,v,A)),C&&(We=Qi(We,C,j)),ye||yn){var Ci=mt.placeholder,ss=Z(We,Ci),cn=cn-ss.length;if(cn<it){var as=k?mn(k):null,cn=$e(it-cn,0),Eu=ye?ss:null,ss=ye?null:ss,oh=ye?We:null,We=ye?null:We;return h|=ye?L:F,h&=~(ye?F:L),ri||(h&=-4),We=[c,h,p,oh,Eu,We,ss,as,Y,cn],as=da.apply(Et,We),Za(c)&&dl(as,We),as.placeholder=Ci,as}}if(Ci=At?p:this,te&&(c=Ci[Oa]),k)for(as=We.length,cn=Tr(k.length,as),Eu=mn(We);cn--;)ss=k[cn],We[cn]=Ei(ss,as)?Eu[ss]:Et;return ct&&Y<We.length&&(We.length=Y),(this&&this!==Fn&&this instanceof mt?kr||ue(c):c).apply(Ci,We)}var ct=h&P,At=h&Mt,te=h&z,ye=h&M,ri=h&O,yn=h&B,kr=!te&&ue(c),Oa=c;return mt}function ma(c,h,p){return c=c.length,h=+h,c<h&&fr(h)?(h-=c,p=p==null?" ":p+"",to(p,io(h/p.length)).slice(0,h)):""}function Wl(c,h,p,v){function A(){for(var k=-1,Y=arguments.length,it=-1,mt=v.length,ct=ge(Y+mt);++it<mt;)ct[it]=v[it];for(;Y--;)ct[it++]=arguments[++k];return(this&&this!==Fn&&this instanceof A?j:c).apply(C?p:this,ct)}var C=h&Mt,j=ue(c);return A}function pa(c){return function(h,p,v,A){var C=Ae(v);return C===pi&&v==null?$i(h,p,c):xr(h,p,C(v,A,1),c)}}function vi(c,h,p,v,A,C,j,k){var Y=h&z;if(!Y&&typeof c!="function")throw new Pr(yt);var it=v?v.length:0;if(it||(h&=-97,v=A=null),it-=A?A.length:0,h&F){var mt=v,ct=A;v=A=null}var At=Y?null:mu(c);return p=[c,h,p,v,A,mt,ct,C,j,k],At&&(v=p[1],h=At[1],k=v|h,A=h==P&&v==M||h==P&&v==He&&p[7].length<=At[8]||h==(P|He)&&v==M,(k<P||A)&&(h&Mt&&(p[2]=At[2],k|=v&Mt?0:O),(v=At[3])&&(A=p[3],p[3]=A?Zr(A,v,At[4]):mn(v),p[4]=A?Z(p[3],gt):mn(At[4])),(v=At[5])&&(A=p[5],p[5]=A?Qi(A,v,At[6]):mn(v),p[6]=A?Z(p[5],gt):mn(At[6])),(v=At[7])&&(p[7]=mn(v)),h&P&&(p[8]=p[8]==null?At[8]:Tr(p[8],At[8])),p[9]==null&&(p[9]=At[9]),p[0]=At[0],p[1]=k),h=p[1],k=p[9]),p[9]=k==null?Y?0:c.length:$e(k-it,0)||0,(At?Ii:dl)(h==Mt?nl(p[0],p[2]):h!=L&&h!=(Mt|L)||p[4].length?da.apply(Et,p):Wl.apply(Et,p),p)}function sl(c,h,p,v,A,C,j){var k=-1,Y=c.length,it=h.length,mt=!0;if(Y!=it&&(!A||it<=Y))return!1;for(;mt&&++k<Y;){var ct=c[k],At=h[k],mt=Et;if(v&&(mt=A?v(At,ct,k):v(ct,At,k)),typeof mt>"u")if(A)for(var te=it;te--&&(At=h[te],!(mt=ct&&ct===At||p(ct,At,v,A,C,j))););else mt=ct&&ct===At||p(ct,At,v,A,C,j)}return!!mt}function ga(c,h,p){switch(p){case Ut:case je:return+c==+h;case Ee:return c.name==h.name&&c.message==h.message;case Sr:return c!=+c?h!=+h:c==0?1/c==1/h:c==+h;case Hr:case Fr:return c==h+""}return!1}function tu(c,h,p,v,A,C,j){var k=un(c),Y=k.length,it=un(h).length;if(Y!=it&&!A)return!1;for(var it=A,mt=-1;++mt<Y;){var ct=k[mt],At=A?ct in h:gn.call(h,ct);if(At){var te=c[ct],ye=h[ct],At=Et;v&&(At=A?v(ye,te,ct):v(te,ye,ct)),typeof At>"u"&&(At=te&&te===ye||p(te,ye,v,A,C,j))}if(!At)return!1;it||(it=ct=="constructor")}return!!(it||(p=c.constructor,v=h.constructor,!(p!=v&&"constructor"in c&&"constructor"in h)||typeof p=="function"&&p instanceof p&&typeof v=="function"&&v instanceof v))}function eu(c,h,p){var v=p?es:fe,A=v,C=A;return Gn(c,function(j,k,Y){k=h(j,k,Y),((p?k<A:k>A)||k===v&&k===C)&&(A=k,C=j)}),C}function Ae(c,h,p){var v=D.callback||bi,v=v===bi?pi:v;return p?v(c,h,p):v}function Or(c,h,p){var v=D.indexOf||Q,v=v===Q?n:v;return c?v(c,h,p):v}function nu(c){var h=c.length,p=new c.constructor(h);return h&&typeof c[0]=="string"&&gn.call(c,"index")&&(p.index=c.index,p.input=c.input),p}function Xa(c){return c=c.constructor,typeof c=="function"&&c instanceof c||(c=Zi),new c}function ru(c,h,p){var v=c.constructor;switch(h){case Ui:return Gi(c);case Ut:case je:return new v(+c);case Qs:case Ga:case nr:case $o:case Ys:case hs:case ki:case Go:case ds:return h=c.buffer,new v(p?Gi(h):h,c.byteOffset,c.length);case Sr:case Fr:return new v(c);case Hr:var A=new v(c.source,Zs.exec(c));A.lastIndex=c.lastIndex}return A}function Ei(c,h){return c=+c,h=h??bc,-1<c&&c%1==0&&c<h}function Qt(c,h,p){if(!an(p))return!1;var v=typeof h;return v=="number"?(v=p.length,v=Ve(v)&&Ei(h,v)):v=v=="string"&&h in p,v?(h=p[h],c===c?c===h:h!==h):!1}function Za(c){var h=Is(c);return!!h&&c===D[h]&&h in $t.prototype}function Ve(c){return typeof c=="number"&&-1<c&&c%1==0&&c<=bc}function Ti(c){return c===c&&(c===0?0<1/c:!an(c))}function al(c,h){c=An(c);for(var p=-1,v=h.length,A={};++p<v;){var C=h[p];C in c&&(A[C]=c[C])}return A}function ya(c,h){var p={};return Zl(c,function(v,A,C){h(v,A,C)&&(p[A]=v)}),p}function Pn(c){var h;if(!V(c)||on.call(c)!=en||!(gn.call(c,"constructor")||(h=c.constructor,typeof h!="function"||h instanceof h)))return!1;var p;return Zl(c,function(v,A){p=A}),typeof p>"u"||gn.call(c,p)}function ol(c){for(var h=Yi(c),p=h.length,v=p&&c.length,A=D.support,A=v&&Ve(v)&&(Wt(c)||A.nonEnumArgs&&Mr(c)),C=-1,j=[];++C<p;){var k=h[C];(A&&Ei(k,v)||gn.call(c,k))&&j.push(k)}return j}function ws(c){return c==null?[]:Ve(c.length)?an(c)?c:Zi(c):Wa(c)}function An(c){return an(c)?c:Zi(c)}function f(c){return c instanceof $t?c.clone():new Gt(c.__wrapped__,c.__chain__,mn(c.__actions__))}function _(c,h,p){return c&&c.length?((p?Qt(c,h,p):h==null)&&(h=1),yi(c,0>h?0:h)):[]}function w(c,h,p){var v=c?c.length:0;return v?((p?Qt(c,h,p):h==null)&&(h=1),h=v-(+h||0),yi(c,0,0>h?0:h)):[]}function I(c){return c?c[0]:Et}function Q(c,h,p){var v=c?c.length:0;if(!v)return-1;if(typeof p=="number")p=0>p?$e(v+p,0):p;else if(p)return p=$i(c,h),c=c[p],(h===h?h===c:c!==c)?p:-1;return n(c,h,p||0)}function nt(c){var h=c?c.length:0;return h?c[h-1]:Et}function _t(c){return _(c,1)}function re(c,h,p,v){if(!c||!c.length)return[];h!=null&&typeof h!="boolean"&&(v=p,p=Qt(c,h,v)?null:h,h=!1);var A=Ae();if((A!==pi||p!=null)&&(p=A(p,v,3)),h&&Or()==n){h=p;var C;p=-1,v=c.length;for(var A=-1,j=[];++p<v;){var k=c[p],Y=h?h(k,p,c):k;p&&C===Y||(C=Y,j[++A]=k)}c=j}else c=Xr(c,p);return c}function Ke(c){for(var h=-1,p=(c&&c.length&&Qr(Gr(c,hu)))>>>0,v=ge(p);++h<p;)v[h]=Gr(c,Kr(h));return v}function ie(c,h){var p=-1,v=c?c.length:0,A={};for(!v||h||Wt(c[0])||(h=[]);++p<v;){var C=c[p];h?A[C]=h[p]:C&&(A[C[0]]=C[1])}return A}function rn(c){return c=D(c),c.__chain__=!0,c}function Xe(c,h,p){return h.call(p,c)}function wi(c,h,p){var v=Wt(c)?na:uc;return p&&Qt(c,h,p)&&(h=null),(typeof h!="function"||typeof p<"u")&&(h=Ae(h,p,3)),v(c,h)}function sn(c,h,p){var v=Wt(c)?Jo:sa;return h=Ae(h,p,3),v(c,h)}function Nr(c,h,p,v){var A=c?c.length:0;return Ve(A)||(c=Wa(c),A=c.length),A?(p=typeof p!="number"||v&&Qt(h,p,v)?0:0>p?$e(A+p,0):p||0,typeof c=="string"||!Wt(c)&&bs(c)?p<A&&-1<c.indexOf(h,p):-1<Or(c,h,p)):!1}function _a(c,h,p){var v=Wt(c)?Gr:aa;return h=Ae(h,p,3),v(c,h)}function Ja(c,h,p){return(p?Qt(c,h,p):h==null)?(c=ws(c),h=c.length,0<h?c[oa(0,h-1)]:Et):(c=fc(c),c.length=Tr(0>h?0:+h||0,c.length),c)}function fc(c){c=ws(c);for(var h=-1,p=c.length,v=ge(p);++h<p;){var A=oa(0,h);h!=A&&(v[h]=v[A]),v[A]=c[h]}return v}function hc(c,h,p){var v=Wt(c)?bn:Ya;return p&&Qt(c,h,p)&&(h=null),(typeof h!="function"||typeof p<"u")&&(h=Ae(h,p,3)),v(c,h)}function iu(c,h){var p;if(typeof h!="function"){if(typeof c!="function")throw new Pr(yt);var v=c;c=h,h=v}return function(){return 0<--c?p=h.apply(this,arguments):h=null,p}}function su(c,h,p){function v(){var kr=h-(xa()-it);0>=kr||kr>h?(k&&ur(k),kr=At,k=ct=At=Et,kr&&(te=xa(),Y=c.apply(mt,j),ct||k||(j=mt=null))):ct=ts(v,kr)}function A(){ct&&ur(ct),k=ct=At=Et,(yn||ye!==h)&&(te=xa(),Y=c.apply(mt,j),ct||k||(j=mt=null))}function C(){if(j=arguments,it=xa(),mt=this,At=yn&&(ct||!ri),ye===!1)var kr=ri&&!ct;else{k||ri||(te=it);var Oa=ye-(it-te),cn=0>=Oa||Oa>ye;cn?(k&&(k=ur(k)),te=it,Y=c.apply(mt,j)):k||(k=ts(A,Oa))}return cn&&ct?ct=ur(ct):ct||h===ye||(ct=ts(v,h)),kr&&(cn=!0,Y=c.apply(mt,j)),!cn||ct||k||(j=mt=null),Y}var j,k,Y,it,mt,ct,At,te=0,ye=!1,yn=!0;if(typeof c!="function")throw new Pr(yt);if(h=0>h?0:+h||0,p===!0)var ri=!0,yn=!1;else an(p)&&(ri=p.leading,ye="maxWait"in p&&$e(+p.maxWait||0,h),yn="trailing"in p?p.trailing:yn);return C.cancel=function(){ct&&ur(ct),k&&ur(k),k=ct=At=Et},C}function au(c,h){function p(){var v=arguments,A=p.cache,C=h?h.apply(this,v):v[0];return A.has(C)?A.get(C):(v=c.apply(this,v),A.set(C,v),v)}if(typeof c!="function"||h&&typeof h!="function")throw new Pr(yt);return p.cache=new au.Cache,p}function Ze(c,h){if(typeof c!="function")throw new Pr(yt);return h=$e(typeof h>"u"?c.length-1:+h||0,0),function(){for(var p=arguments,v=-1,A=$e(p.length-h,0),C=ge(A);++v<A;)C[v]=p[h+v];switch(h){case 0:return c.call(this,C);case 1:return c.call(this,p[0],C);case 2:return c.call(this,p[0],p[1],C)}for(A=ge(h+1),v=-1;++v<h;)A[v]=p[v];return A[h]=C,c.apply(this,A)}}function Mr(c){return Ve(V(c)?c.length:Et)&&on.call(c)==xt}function Yf(c){return!!c&&c.nodeType===1&&V(c)&&-1<on.call(c).indexOf("Element")}function dc(c){return V(c)&&typeof c.message=="string"&&on.call(c)==Ee}function an(c){var h=typeof c;return h=="function"||!!c&&h=="object"}function sr(c){return c==null?!1:on.call(c)==Dn?ro.test(fu.call(c)):V(c)&&Yo.test(c)}function Kf(c){return typeof c=="number"||V(c)&&on.call(c)==Sr}function ar(c){return V(c)&&on.call(c)==Hr||!1}function bs(c){return typeof c=="string"||V(c)&&on.call(c)==Fr}function va(c){return V(c)&&Ve(c.length)&&!!Te[on.call(c)]}function mc(c){return ji(c,Yi(c))}function ou(c){return qi(c,Yi(c))}function Yi(c){if(c==null)return[];an(c)||(c=Zi(c));for(var h=c.length,h=h&&Ve(h)&&(Wt(c)||Ri.nonEnumArgs&&Mr(c))&&h||0,v=c.constructor,p=-1,v=typeof v=="function"&&v.prototype===c,A=ge(h),C=0<h;++p<h;)A[p]=p+"";for(var j in c)C&&Ei(j,h)||j=="constructor"&&(v||!gn.call(c,j))||A.push(j);return A}function Wa(c){return la(c,un(c))}function Xf(c){return(c=o(c))&&c.replace(Ko,T).replace(Xs,"")}function Ea(c){return(c=o(c))&&Li.test(c)?c.replace(hi,"\\$&"):c}function lu(c,h,p){return p&&Qt(c,h,p)&&(h=0),Sn(c,h)}function to(c,h){var p="";if(c=o(c),h=+h,1>h||!c||!fr(h))return p;do h%2&&(p+=c),h=ba(h/2),c+=c;while(h);return p}function uu(c,h,p){var v=c;return(c=o(c))?(p?Qt(v,h,p):h==null)?c.slice(ot(c),bt(c)+1):(h+="",c.slice(m(c,h),y(c,h)+1)):c}function pc(c,h,p){return p&&Qt(c,h,p)&&(h=null),c=o(c),c.match(h||di)||[]}function bi(c,h,p){return p&&Qt(c,h,p)&&(h=null),V(c)?gc(c):pi(c,h)}function ei(c){return function(){return c}}function Ki(c){return c}function gc(c){return Vn(gi(c,!0))}function Xi(c,h,p){if(p==null){var C=an(h),v=C&&un(h);((v=v&&v.length&&qi(h,v))?v.length:C)||(v=!1,p=h,h=c,c=this)}v||(v=qi(h,un(h)));var A=!0,C=-1,j=br(c),k=v.length;for(p===!1?A=!1:an(p)&&("chain"in p)&&(A=p.chain);++C<k;){p=v[C];var Y=h[p];c[p]=Y,j&&(c.prototype[p]=(function(it){return function(){var mt=this.__chain__;if(A||mt){var ct=c(this.__wrapped__);return(ct.__actions__=mn(this.__actions__)).push({func:it,args:arguments,thisArg:c}),ct.__chain__=mt,ct}return mt=[this.value()],Wi.apply(mt,arguments),it.apply(c,mt)}})(Y))}return c}function yc(){}ht=ht?Nn.defaults(Fn.Object(),ht,Nn.pick(Fn,gs)):Fn;var ge=ht.Array,_c=ht.Date,hm=ht.Error,vc=ht.Function,Ta=ht.Math,cu=ht.Number,Zi=ht.Object,ll=ht.RegExp,Vr=ht.String,Pr=ht.TypeError,or=ge.prototype,lr=Zi.prototype,eo=Vr.prototype,ul=(ul=ht.window)&&ul.document,fu=vc.prototype.toString,hu=Kr("length"),gn=lr.hasOwnProperty,no=0,on=lr.toString,du=ht._,ro=ll("^"+Ea(on).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),wa=sr(wa=ht.ArrayBuffer)&&wa,Un=sr(Un=wa&&new wa(0).slice)&&Un,io=Ta.ceil,ur=ht.clearTimeout,ba=Ta.floor,Ji=sr(Ji=Zi.getPrototypeOf)&&Ji,Wi=or.push,Ec=lr.propertyIsEnumerable,so=sr(so=ht.Set)&&so,ts=ht.setTimeout,As=or.splice,Ai=sr(Ai=ht.Uint8Array)&&Ai,Aa=sr(Aa=ht.WeakMap)&&Aa,kn=(function(){try{var c=sr(c=ht.Float64Array)&&c,h=new c(new wa(10),0,1)&&c}catch{}return h})(),cr=sr(cr=ge.isArray)&&cr,Si=sr(Si=Zi.create)&&Si,fr=ht.isFinite,Ur=sr(Ur=Zi.keys)&&Ur,$e=Ta.max,Tr=Ta.min,cl=sr(cl=_c.now)&&cl,fl=sr(fl=cu.isFinite)&&fl,Sn=ht.parseInt,Le=Ta.random,fe=cu.NEGATIVE_INFINITY,es=cu.POSITIVE_INFINITY,wr=Ta.pow(2,32)-1,Tc=wr-1,Sa=wr>>>1,wc=kn?kn.BYTES_PER_ELEMENT:0,bc=Ta.pow(2,53)-1,Ss=Aa&&new Aa,Rs={},Ri=D.support={};(function(c){Ri.funcDecomp=/\bthis\b/.test(function(){return this}),Ri.funcNames=typeof vc.name=="string";try{Ri.dom=ul.createDocumentFragment().nodeType===11}catch{Ri.dom=!1}try{Ri.nonEnumArgs=!Ec.call(arguments,1)}catch{Ri.nonEnumArgs=!0}})(0,0),D.templateSettings={escape:lc,evaluate:Ks,interpolate:ms,variable:"",imports:{_:D}};var ns=(function(){function c(){}return function(h){if(an(h)){c.prototype=h;var p=new c;c.prototype=null}return p||ht.Object()}})(),Gn=Jr(we),rs=Jr($n,!0),ni=Wr(),is=Wr(!0),Ii=Ss?function(c,h){return Ss.set(c,h),c}:Ki;Un||(Gi=wa&&Ai?function(c){var h=c.byteLength,p=kn?ba(h/wc):0,v=p*wc,A=new wa(h);if(p){var C=new kn(A,0,p);C.set(new kn(c,0,p))}return h!=v&&(C=new Ai(A,v),C.set(new Ai(c,v))),A}:ei(null));var hl=Si&&so?function(c){return new Ir(c)}:ei(null),mu=Ss?function(c){return Ss.get(c)}:yc,Is=(function(){return Ri.funcNames?ei.name=="constant"?Kr("name"):function(c){for(var h=c.name,p=Rs[h],v=p?p.length:0;v--;){var A=p[v],C=A.func;if(C==null||C==c)return A.name}return h}:ei("")})(),dl=(function(){var c=0,h=0;return function(p,v){var A=xa(),C=Ot-(A-h);if(h=A,0<C){if(++c>=Tt)return p}else c=0;return Ii(p,v)}})(),Ra=Ze(function(c,h){return Wt(c)||Mr(c)?zi(c,pn(h,!1,!0)):[]}),Ln=ca(),pu=ca(!0),Zf=Ze(function(c,h){c||(c=[]),h=pn(h);var p=h.length,v=ia(c,h);for(h.sort(s);p--;){var A=parseFloat(h[p]);if(A!=C&&Ei(A)){var C=A;As.call(c,A,1)}}return v}),dm=pa(),mm=pa(!0),pm=Ze(function(c){return Xr(pn(c,!1,!0))}),ln=Ze(function(c,h){return Wt(c)||Mr(c)?zi(c,h):[]}),Ac=Ze(Ke),ml=Ze(function(c,h){return Ve(c?c.length:0)&&(c=ws(c)),ia(c,pn(h))}),pl=Dr(function(c,h,p){gn.call(c,p)?++c[p]:c[p]=1}),gl=rl(Gn),ao=rl(rs,!0),Ia=Es(ir,Gn),Jf=Es(function(c,h){for(var p=c.length;p--&&h(c[p],p,c)!==!1;);return c},rs),Wf=Dr(function(c,h,p){gn.call(c,p)?c[p].push(h):c[p]=[h]}),gm=Dr(function(c,h,p){c[p]=h}),th=Ze(function(c,h,p){var v=-1,A=typeof h=="function",C=c?c.length:0,j=Ve(C)?ge(C):[];return Gn(c,function(k){var Y=A?h:k!=null&&k[h];j[++v]=Y?Y.apply(k,p):Et}),j}),Ca=Dr(function(c,h,p){c[p?0:1].push(h)},function(){return[[],[]]}),yl=ha(function(c,h,p,v){var A=-1,C=c.length;for(v&&C&&(p=c[++A]);++A<C;)p=h(p,c[A],A,c);return p},Gn),_l=ha(function(c,h,p,v){var A=c.length;for(v&&A&&(p=c[--A]);A--;)p=h(p,c[A],A,c);return p},rs),xa=cl||function(){return new _c().getTime()},oo=Ze(function(c,h,p){var A=Mt;if(p.length)var v=Z(p,oo.placeholder),A=A|L;return vi(c,A,h,p,v)}),eh=Ze(function(c,h){h=h.length?pn(h):ou(c);for(var p=-1,v=h.length;++p<v;){var A=h[p];c[A]=vi(c[A],Mt,c)}return c}),vl=Ze(function(c,h,p){var A=Mt|z;if(p.length)var v=Z(p,vl.placeholder),A=A|L;return vi(h,A,c,p,v)}),Sc=ua(M),nh=ua(B),gu=Ze(function(c,h){return Mn(c,1,h)}),rh=Ze(function(c,h,p){return Mn(c,h,p)}),El=ti(),yu=ti(!0),ih=Ts(L),Cs=Ts(F),Rc=Ze(function(c,h){return vi(c,He,null,null,null,pn(h))}),Wt=cr||function(c){return V(c)&&Ve(c.length)&&on.call(c)==Kt};Ri.dom||(Yf=function(c){return!!c&&c.nodeType===1&&V(c)&&!Ds(c)});var xs=fl||function(c){return typeof c=="number"&&fr(c)},br=i(/x/)||Ai&&!i(Ai)?function(c){return on.call(c)==Dn}:i,Ds=Ji?function(c){if(!c||on.call(c)!=en)return!1;var h=c.valueOf,p=sr(h)&&(p=Ji(h))&&Ji(p);return p?c==p||Ji(c)==p:Pn(c)}:Pn,Tl=Ka(yr),Ic=Ze(function(c){var h=c[0];return h==null?h:(c.push(ra),Tl.apply(Et,c))}),wl=fa(we),bl=fa($n),sh=Er(ni),ah=Er(is),lo=il(we),_u=il($n),un=Ur?function(c){if(c)var h=c.constructor,p=c.length;return typeof h=="function"&&h.prototype===c||typeof c!="function"&&p&&Ve(p)?ol(c):an(c)?Ur(c):[]}:ol,Cc=Ka(tl),xc=Ze(function(c,h){if(c==null)return{};if(typeof h[0]!="function")return h=Gr(pn(h),Vr),al(c,zi(Yi(c),h));var p=ke(h[0],h[1],3);return ya(c,function(v,A,C){return!p(v,A,C)})}),Os=Ze(function(c,h){return c==null?{}:typeof h[0]=="function"?ya(c,ke(h[0],h[1],3)):al(c,pn(h))}),Zt=Fe(function(c,h,p){return h=h.toLowerCase(),c+(p?h.charAt(0).toUpperCase()+h.slice(1):h)}),Se=Fe(function(c,h,p){return c+(p?"-":"")+h.toLowerCase()}),Je=Jl(),vu=Jl(!0);Sn(Zo+"08")!=8&&(lu=function(c,h,p){return(p?Qt(c,h,p):h==null)?h=0:h&&(h=+h),c=uu(c),Sn(c,h||(Js.test(c)?16:10))});var uo=Fe(function(c,h,p){return c+(p?"_":"")+h.toLowerCase()}),Da=Fe(function(c,h,p){return c+(p?" ":"")+(h.charAt(0).toUpperCase()+h.slice(1))}),Al=Ze(function(c,h){try{return c.apply(Et,h)}catch(p){return dc(p)?p:new hm(p)}}),Sl=vs(Qr),co=vs(function(c){for(var h=-1,p=c.length,v=es;++h<p;){var A=c[h];A<v&&(v=A)}return v},!0);return D.prototype=Lt.prototype,Gt.prototype=ns(Lt.prototype),Gt.prototype.constructor=Gt,$t.prototype=ns(Lt.prototype),$t.prototype.constructor=$t,gr.prototype.delete=function(c){return this.has(c)&&delete this.__data__[c]},gr.prototype.get=function(c){return c=="__proto__"?Et:this.__data__[c]},gr.prototype.has=function(c){return c!="__proto__"&&gn.call(this.__data__,c)},gr.prototype.set=function(c,h){return c!="__proto__"&&(this.__data__[c]=h),this},Ir.prototype.push=function(c){var h=this.data;typeof c=="string"||an(c)?h.set.add(c):h.hash[c]=!0},au.Cache=gr,D.after=function(c,h){if(typeof h!="function"){if(typeof c!="function")throw new Pr(yt);var p=c;c=h,h=p}return c=fr(c=+c)?c:0,function(){return 1>--c?h.apply(this,arguments):void 0}},D.ary=function(c,h,p){return p&&Qt(c,h,p)&&(h=null),h=c&&h==null?c.length:$e(+h||0,0),vi(c,P,null,null,null,null,h)},D.assign=Tl,D.at=ml,D.before=iu,D.bind=oo,D.bindAll=eh,D.bindKey=vl,D.callback=bi,D.chain=rn,D.chunk=function(c,h,p){h=(p?Qt(c,h,p):h==null)?1:$e(+h||1,1),p=0;for(var v=c?c.length:0,A=-1,C=ge(io(v/h));p<v;)C[++A]=yi(c,p,p+=h);return C},D.compact=function(c){for(var h=-1,p=c?c.length:0,v=-1,A=[];++h<p;){var C=c[h];C&&(A[++v]=C)}return A},D.constant=ei,D.countBy=pl,D.create=function(c,h,p){var v=ns(c);return p&&Qt(c,h,p)&&(h=null),h?ji(h,v,un(h)):v},D.curry=Sc,D.curryRight=nh,D.debounce=su,D.defaults=Ic,D.defer=gu,D.delay=rh,D.difference=Ra,D.drop=_,D.dropRight=w,D.dropRightWhile=function(c,h,p){return c&&c.length?vr(c,Ae(h,p,3),!0,!0):[]},D.dropWhile=function(c,h,p){return c&&c.length?vr(c,Ae(h,p,3),!0):[]},D.fill=function(c,h,p,v){var A=c?c.length:0;if(!A)return[];for(p&&typeof p!="number"&&Qt(c,h,p)&&(p=0,v=A),A=c.length,p=p==null?0:+p||0,0>p&&(p=-p>A?0:A+p),v=typeof v>"u"||v>A?A:+v||0,0>v&&(v+=A),A=p>v?0:v>>>0,p>>>=0;p<A;)c[p++]=h;return c},D.filter=sn,D.flatten=function(c,h,p){var v=c?c.length:0;return p&&Qt(c,h,p)&&(h=!1),v?pn(c,h):[]},D.flattenDeep=function(c){return c&&c.length?pn(c,!0):[]},D.flow=El,D.flowRight=yu,D.forEach=Ia,D.forEachRight=Jf,D.forIn=sh,D.forInRight=ah,D.forOwn=lo,D.forOwnRight=_u,D.functions=ou,D.groupBy=Wf,D.indexBy=gm,D.initial=function(c){return w(c,1)},D.intersection=function(){for(var c=[],h=-1,C=arguments.length,p=[],v=Or(),j=v==n;++h<C;){var A=arguments[h];(Wt(A)||Mr(A))&&(c.push(A),p.push(j&&120<=A.length?hl(h&&A):null))}var C=c.length,j=c[0],k=-1,Y=j?j.length:0,it=[],mt=p[0];t:for(;++k<Y;)if(A=j[k],0>(mt?Cr(mt,A):v(it,A,0))){for(h=C;--h;){var ct=p[h];if(0>(ct?Cr(ct,A):v(c[h],A,0)))continue t}mt&&mt.push(A),it.push(A)}return it},D.invert=function(c,h,p){p&&Qt(c,h,p)&&(h=null),p=-1;for(var v=un(c),A=v.length,C={};++p<A;){var j=v[p],k=c[j];h?gn.call(C,k)?C[k].push(j):C[k]=[j]:C[k]=j}return C},D.invoke=th,D.keys=un,D.keysIn=Yi,D.map=_a,D.mapValues=function(c,h,p){var v={};return h=Ae(h,p,3),we(c,function(A,C,j){v[C]=h(A,C,j)}),v},D.matches=gc,D.matchesProperty=function(c,h){return _s(c+"",gi(h,!0))},D.memoize=au,D.merge=Cc,D.mixin=Xi,D.negate=function(c){if(typeof c!="function")throw new Pr(yt);return function(){return!c.apply(this,arguments)}},D.omit=xc,D.once=function(c){return iu(c,2)},D.pairs=function(c){for(var h=-1,p=un(c),v=p.length,A=ge(v);++h<v;){var C=p[h];A[h]=[C,c[C]]}return A},D.partial=ih,D.partialRight=Cs,D.partition=Ca,D.pick=Os,D.pluck=function(c,h){return _a(c,Kr(h))},D.property=function(c){return Kr(c+"")},D.propertyOf=function(c){return function(h){return c==null?Et:c[h]}},D.pull=function(){var c=arguments,h=c[0];if(!h||!h.length)return h;for(var p=0,v=Or(),A=c.length;++p<A;)for(var C=0,j=c[p];-1<(C=v(h,j,C));)As.call(h,C,1);return h},D.pullAt=Zf,D.range=function(c,h,p){p&&Qt(c,h,p)&&(h=p=null),c=+c||0,p=p==null?1:+p||0,h==null?(h=c,c=0):h=+h||0;var v=-1;h=$e(io((h-c)/(p||1)),0);for(var A=ge(h);++v<h;)A[v]=c,c+=p;return A},D.rearg=Rc,D.reject=function(c,h,p){var v=Wt(c)?Jo:sa;return h=Ae(h,p,3),v(c,function(A,C,j){return!h(A,C,j)})},D.remove=function(c,h,p){var v=-1,A=c?c.length:0,C=[];for(h=Ae(h,p,3);++v<A;)p=c[v],h(p,v,c)&&(C.push(p),As.call(c,v--,1),A--);return C},D.rest=_t,D.restParam=Ze,D.shuffle=fc,D.slice=function(c,h,p){var v=c?c.length:0;return v?(p&&typeof p!="number"&&Qt(c,h,p)&&(h=0,p=v),yi(c,h,p)):[]},D.sortBy=function(c,h,p){if(c==null)return[];var v=-1,A=c.length,C=Ve(A)?ge(A):[];return p&&Qt(c,h,p)&&(h=null),h=Ae(h,p,3),Gn(c,function(j,k,Y){C[++v]={a:h(j,k,Y),b:v,c:j}}),_i(C,E)},D.sortByAll=function(){var c=arguments,h=c[0],p=c[3],v=0,A=c.length-1;if(h==null)return[];for(var C=ge(A);v<A;)C[v]=c[++v];return p&&Qt(c[1],c[2],p)&&(C=c[1]),_r(h,pn(C),[])},D.sortByOrder=function(c,h,p,v){return c==null?[]:(v&&Qt(h,p,v)&&(p=null),Wt(h)||(h=h==null?[]:[h]),Wt(p)||(p=p==null?[]:[p]),_r(c,h,p))},D.spread=function(c){if(typeof c!="function")throw new Pr(yt);return function(h){return c.apply(this,h)}},D.take=function(c,h,p){return c&&c.length?((p?Qt(c,h,p):h==null)&&(h=1),yi(c,0,0>h?0:h)):[]},D.takeRight=function(c,h,p){var v=c?c.length:0;return v?((p?Qt(c,h,p):h==null)&&(h=1),h=v-(+h||0),yi(c,0>h?0:h)):[]},D.takeRightWhile=function(c,h,p){return c&&c.length?vr(c,Ae(h,p,3),!1,!0):[]},D.takeWhile=function(c,h,p){return c&&c.length?vr(c,Ae(h,p,3)):[]},D.tap=function(c,h,p){return h.call(p,c),c},D.throttle=function(c,h,p){var v=!0,A=!0;if(typeof c!="function")throw new Pr(yt);return p===!1?v=!1:an(p)&&(v="leading"in p?!!p.leading:v,A="trailing"in p?!!p.trailing:A),Ws.leading=v,Ws.maxWait=+h,Ws.trailing=A,su(c,h,Ws)},D.thru=Xe,D.times=function(c,h,p){if(c=+c,1>c||!fr(c))return[];var v=-1,A=ge(Tr(c,wr));for(h=ke(h,p,1);++v<c;)v<wr?A[v]=h(v):h(v);return A},D.toArray=function(c){var h=c?c.length:0;return Ve(h)?h?mn(c):[]:Wa(c)},D.toPlainObject=mc,D.transform=function(c,h,p,v){var A=Wt(c)||va(c);return h=Ae(h,v,4),p==null&&(A||an(c)?(v=c.constructor,p=A?Wt(c)?new v:[]:ns(br(v)&&v.prototype)):p={}),(A?ir:we)(c,function(C,j,k){return h(p,C,j,k)}),p},D.union=pm,D.uniq=re,D.unzip=Ke,D.values=Wa,D.valuesIn=function(c){return la(c,Yi(c))},D.where=function(c,h){return sn(c,Vn(h))},D.without=ln,D.wrap=function(c,h){return h=h??Ki,vi(h,L,null,[c],[])},D.xor=function(){for(var c=-1,h=arguments.length;++c<h;){var p=arguments[c];if(Wt(p)||Mr(p))var v=v?zi(v,p).concat(zi(p,v)):p}return v?Xr(v):[]},D.zip=Ac,D.zipObject=ie,D.backflow=yu,D.collect=_a,D.compose=yu,D.each=Ia,D.eachRight=Jf,D.extend=Tl,D.iteratee=bi,D.methods=ou,D.object=ie,D.select=sn,D.tail=_t,D.unique=re,Xi(D,D),D.add=function(c,h){return c+h},D.attempt=Al,D.camelCase=Zt,D.capitalize=function(c){return(c=o(c))&&c.charAt(0).toUpperCase()+c.slice(1)},D.clone=function(c,h,p,v){return h&&typeof h!="boolean"&&Qt(c,h,p)?h=!1:typeof h=="function"&&(v=p,p=h,h=!1),p=typeof p=="function"&&ke(p,v,1),gi(c,h,p)},D.cloneDeep=function(c,h,p){return h=typeof h=="function"&&ke(h,p,1),gi(c,!0,h)},D.deburr=Xf,D.endsWith=function(c,h,p){c=o(c),h+="";var v=c.length;return p=typeof p>"u"?v:Tr(0>p?0:+p||0,v),p-=h.length,0<=p&&c.indexOf(h,p)==p},D.escape=function(c){return(c=o(c))&&Xl.test(c)?c.replace(rr,S):c},D.escapeRegExp=Ea,D.every=wi,D.find=gl,D.findIndex=Ln,D.findKey=wl,D.findLast=ao,D.findLastIndex=pu,D.findLastKey=bl,D.findWhere=function(c,h){return gl(c,Vn(h))},D.first=I,D.has=function(c,h){return c?gn.call(c,h):!1},D.identity=Ki,D.includes=Nr,D.indexOf=Q,D.inRange=function(c,h,p){return h=+h||0,typeof p>"u"?(p=h,h=0):p=+p||0,c>=h&&c<p},D.isArguments=Mr,D.isArray=Wt,D.isBoolean=function(c){return c===!0||c===!1||V(c)&&on.call(c)==Ut},D.isDate=function(c){return V(c)&&on.call(c)==je},D.isElement=Yf,D.isEmpty=function(c){if(c==null)return!0;var h=c.length;return Ve(h)&&(Wt(c)||bs(c)||Mr(c)||V(c)&&br(c.splice))?!h:!un(c).length},D.isEqual=function(c,h,p,v){return p=typeof p=="function"&&ke(p,v,3),!p&&Ti(c)&&Ti(h)?c===h:(v=p?p(c,h):Et,typeof v>"u"?Yr(c,h,p):!!v)},D.isError=dc,D.isFinite=xs,D.isFunction=br,D.isMatch=function(c,h,p,v){var A=un(h),C=A.length;if(!C)return!0;if(c==null)return!1;if(p=typeof p=="function"&&ke(p,v,3),!p&&C==1){var j=A[0];if(v=h[j],Ti(v))return v===c[j]&&(typeof v<"u"||j in An(c))}for(var j=ge(C),k=ge(C);C--;)v=j[C]=h[A[C]],k[C]=Ti(v);return be(An(c),A,j,k,p)},D.isNaN=function(c){return Kf(c)&&c!=+c},D.isNative=sr,D.isNull=function(c){return c===null},D.isNumber=Kf,D.isObject=an,D.isPlainObject=Ds,D.isRegExp=ar,D.isString=bs,D.isTypedArray=va,D.isUndefined=function(c){return typeof c>"u"},D.kebabCase=Se,D.last=nt,D.lastIndexOf=function(c,h,p){var v=c?c.length:0;if(!v)return-1;var A=v;if(typeof p=="number")A=(0>p?$e(v+p,0):Tr(p||0,v-1))+1;else if(p)return A=$i(c,h,!0)-1,c=c[A],(h===h?h===c:c!==c)?A:-1;if(h!==h)return N(c,A,!0);for(;A--;)if(c[A]===h)return A;return-1},D.max=Sl,D.min=co,D.noConflict=function(){return ht._=du,this},D.noop=yc,D.now=xa,D.pad=function(c,h,p){c=o(c),h=+h;var v=c.length;return v<h&&fr(h)?(v=(h-v)/2,h=ba(v),v=io(v),p=ma("",v,p),p.slice(0,h)+c+p):c},D.padLeft=Je,D.padRight=vu,D.parseInt=lu,D.random=function(c,h,p){p&&Qt(c,h,p)&&(h=p=null);var v=c==null,A=h==null;return p==null&&(A&&typeof c=="boolean"?(p=c,c=1):typeof h=="boolean"&&(p=h,A=!0)),v&&A&&(h=1,A=!1),c=+c||0,A?(h=c,c=0):h=+h||0,p||c%1||h%1?(p=Le(),Tr(c+p*(h-c+parseFloat("1e-"+((p+"").length-1))),h)):oa(c,h)},D.reduce=yl,D.reduceRight=_l,D.repeat=to,D.result=function(c,h,p){return h=c==null?Et:c[h],typeof h>"u"&&(h=p),br(h)?h.call(c):h},D.runInContext=wt,D.size=function(c){var h=c?c.length:0;return Ve(h)?h:un(c).length},D.snakeCase=uo,D.some=hc,D.sortedIndex=dm,D.sortedLastIndex=mm,D.startCase=Da,D.startsWith=function(c,h,p){return c=o(c),p=p==null?0:Tr(0>p?0:+p||0,c.length),c.lastIndexOf(h,p)==p},D.sum=function(c,h,p){p&&Qt(c,h,p)&&(h=null);var v=Ae(),A=h==null;if(v===pi&&A||(A=!1,h=v(h,p,3)),A){for(c=Wt(c)?c:ws(c),h=c.length,p=0;h--;)p+=+c[h]||0;c=p}else c=Fi(c,h);return c},D.template=function(c,h,p){var v=D.templateSettings;p&&Qt(c,h,p)&&(h=p=null),c=o(c),h=yr(yr({},p||h),v,Wo),p=yr(yr({},h.imports),v.imports,Wo);var A,C,j=un(p),k=la(p,j),Y=0;p=h.interpolate||ps;var it="__p+='";p=ll((h.escape||ps).source+"|"+p.source+"|"+(p===ms?$r:ps).source+"|"+(h.evaluate||ps).source+"|$","g");var mt="sourceURL"in h?"//# sourceURL="+h.sourceURL+`
`:"";if(c.replace(p,function(ct,At,te,ye,ri,yn){return te||(te=ye),it+=c.slice(Y,yn).replace(Xo,x),At&&(A=!0,it+="'+__e("+At+")+'"),ri&&(C=!0,it+="';"+ri+`;
__p+='`),te&&(it+="'+((__t=("+te+"))==null?'':__t)+'"),Y=yn+ct.length,ct}),it+="';",(h=h.variable)||(it="with(obj){"+it+"}"),it=(C?it.replace(Qo,""):it).replace(Kl,"$1").replace(ze,"$1;"),it="function("+(h||"obj")+"){"+(h?"":"obj||(obj={});")+"var __t,__p=''"+(A?",__e=_.escape":"")+(C?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+it+"return __p}",h=Al(function(){return vc(j,mt+"return "+it).apply(Et,k)}),h.source=it,dc(h))throw h;return h},D.trim=uu,D.trimLeft=function(c,h,p){var v=c;return(c=o(c))?c.slice((p?Qt(v,h,p):h==null)?ot(c):m(c,h+"")):c},D.trimRight=function(c,h,p){var v=c;return(c=o(c))?(p?Qt(v,h,p):h==null)?c.slice(0,bt(c)+1):c.slice(0,y(c,h+"")+1):c},D.trunc=function(c,h,p){p&&Qt(c,h,p)&&(h=null);var v=Oe;if(p=rt,h!=null)if(an(h)){var A="separator"in h?h.separator:A,v="length"in h?+h.length||0:v;p="omission"in h?o(h.omission):p}else v=+h||0;if(c=o(c),v>=c.length)return c;if(v-=p.length,1>v)return p;if(h=c.slice(0,v),A==null)return h+p;if(ar(A)){if(c.slice(v).search(A)){var C,j=c.slice(0,v);for(A.global||(A=ll(A.source,(Zs.exec(A)||"")+"g")),A.lastIndex=0;c=A.exec(j);)C=c.index;h=h.slice(0,C??v)}}else c.indexOf(A,v)!=v&&(A=h.lastIndexOf(A),-1<A&&(h=h.slice(0,A)));return h+p},D.unescape=function(c){return(c=o(c))&&On.test(c)?c.replace(_e,pt):c},D.uniqueId=function(c){var h=++no;return o(c)+h},D.words=pc,D.all=wi,D.any=hc,D.contains=Nr,D.detect=gl,D.foldl=yl,D.foldr=_l,D.head=I,D.include=Nr,D.inject=yl,Xi(D,(function(){var c={};return we(D,function(h,p){D.prototype[p]||(c[p]=h)}),c})(),!1),D.sample=Ja,D.prototype.sample=function(c){return this.__chain__||c!=null?this.thru(function(h){return Ja(h,c)}):Ja(this.value())},D.VERSION=Dt,ir("bind bindKey curry curryRight partial partialRight".split(" "),function(c){D[c].placeholder=D}),ir(["dropWhile","filter","map","takeWhile"],function(c,h){var p=h!=dt,v=h==ce;$t.prototype[c]=function(A,C){var j=this.__filtered__,k=j&&v?new $t(this):this.clone();return(k.__iteratees__||(k.__iteratees__=[])).push({done:!1,count:0,index:0,iteratee:Ae(A,C,1),limit:-1,type:h}),k.__filtered__=j||p,k}}),ir(["drop","take"],function(c,h){var p=c+"While";$t.prototype[c]=function(v){var A=this.__filtered__,C=A&&!h?this.dropWhile():this.clone();return v=v==null?1:$e(ba(v)||0,0),A?h?C.__takeCount__=Tr(C.__takeCount__,v):nt(C.__iteratees__).limit=v:(C.__views__||(C.__views__=[])).push({size:v,type:c+(0>C.__dir__?"Right":"")}),C},$t.prototype[c+"Right"]=function(v){return this.reverse()[c](v).reverse()},$t.prototype[c+"RightWhile"]=function(v,A){return this.reverse()[p](v,A).reverse()}}),ir(["first","last"],function(c,h){var p="take"+(h?"Right":"");$t.prototype[c]=function(){return this[p](1).value()[0]}}),ir(["initial","rest"],function(c,h){var p="drop"+(h?"":"Right");$t.prototype[c]=function(){return this[p](1)}}),ir(["pluck","where"],function(c,h){var p=h?"filter":"map",v=h?Vn:Kr;$t.prototype[c]=function(A){return this[p](v(A))}}),$t.prototype.compact=function(){return this.filter(Ki)},$t.prototype.reject=function(c,h){return c=Ae(c,h,1),this.filter(function(p){return!c(p)})},$t.prototype.slice=function(c,h){c=c==null?0:+c||0;var p=0>c?this.takeRight(-c):this.drop(c);return typeof h<"u"&&(h=+h||0,p=0>h?p.dropRight(-h):p.take(h-c)),p},$t.prototype.toArray=function(){return this.drop(0)},we($t.prototype,function(c,h){var p=D[h];if(p){var v=/^(?:filter|map|reject)|While$/.test(h),A=/^(?:first|last)$/.test(h);D.prototype[h]=function(){function C(te){return te=[te],Wi.apply(te,j),p.apply(D,te)}var j=arguments,k=this.__chain__,Y=this.__wrapped__,it=!!this.__actions__.length,mt=Y instanceof $t,ct=j[0],At=mt||Wt(Y);return At&&v&&typeof ct=="function"&&ct.length!=1&&(mt=At=!1),mt=mt&&!it,A&&!k?mt?c.call(Y):p.call(D,this.value()):At?(Y=c.apply(mt?Y:new $t(this),j),A||!it&&!Y.__actions__||(Y.__actions__||(Y.__actions__=[])).push({func:Xe,args:[C],thisArg:D}),new Gt(Y,k)):this.thru(C)}}}),ir("concat join pop push replace shift sort splice split unshift".split(" "),function(c){var h=(/^(?:replace|split)$/.test(c)?eo:or)[c],p=/^(?:push|sort|unshift)$/.test(c)?"tap":"thru",v=/^(?:join|pop|replace|shift)$/.test(c);D.prototype[c]=function(){var A=arguments;return v&&!this.__chain__?h.apply(this.value(),A):this[p](function(C){return h.apply(C,A)})}}),we($t.prototype,function(c,h){var p=D[h];if(p){var v=p.name;(Rs[v]||(Rs[v]=[])).push({name:h,func:p})}}),Rs[da(null,z).name]=[{name:"wrapper",func:null}],$t.prototype.clone=function(){var c=this.__actions__,h=this.__iteratees__,p=this.__views__,v=new $t(this.__wrapped__);return v.__actions__=c?mn(c):null,v.__dir__=this.__dir__,v.__filtered__=this.__filtered__,v.__iteratees__=h?mn(h):null,v.__takeCount__=this.__takeCount__,v.__views__=p?mn(p):null,v},$t.prototype.reverse=function(){if(this.__filtered__){var c=new $t(this);c.__dir__=-1,c.__filtered__=!0}else c=this.clone(),c.__dir__*=-1;return c},$t.prototype.value=function(){var c=this.__wrapped__.value();if(!Wt(c))return el(c,this.__actions__);var h,p=this.__dir__,v=0>p;h=c.length;for(var A=this.__views__,C=0,j=-1,k=A?A.length:0;++j<k;){var Y=A[j],it=Y.size;switch(Y.type){case"drop":C+=it;break;case"dropRight":h-=it;break;case"take":h=Tr(h,C+it);break;case"takeRight":C=$e(C,h-it)}}h={start:C,end:h},A=h.start,C=h.end,h=C-A,A=v?C:A-1,C=Tr(h,this.__takeCount__),k=(j=this.__iteratees__)?j.length:0,Y=0,it=[];t:for(;h--&&Y<C;){for(var A=A+p,mt=-1,ct=c[A];++mt<k;){var At=j[mt],te=At.iteratee,ye=At.type;if(ye==ce){if(At.done&&(v?A>At.index:A<At.index)&&(At.count=0,At.done=!1),At.index=A,!(At.done||(ye=At.limit,At.done=-1<ye?At.count++>=ye:!te(ct))))continue t}else if(At=te(ct),ye==dt)ct=At;else if(!At){if(ye==q)continue t;break t}}it[Y++]=ct}return it},D.prototype.chain=function(){return rn(this)},D.prototype.commit=function(){return new Gt(this.value(),this.__chain__)},D.prototype.plant=function(c){for(var h,p=this;p instanceof Lt;){var v=f(p);h?A.__wrapped__=v:h=v;var A=v,p=p.__wrapped__}return A.__wrapped__=c,h},D.prototype.reverse=function(){var c=this.__wrapped__;return c instanceof $t?(this.__actions__.length&&(c=new $t(this)),new Gt(c.reverse(),this.__chain__)):this.thru(function(h){return h.reverse()})},D.prototype.toString=function(){return this.value()+""},D.prototype.run=D.prototype.toJSON=D.prototype.valueOf=D.prototype.value=function(){return el(this.__wrapped__,this.__actions__)},D.prototype.collect=D.prototype.map,D.prototype.head=D.prototype.first,D.prototype.select=D.prototype.filter,D.prototype.tail=D.prototype.rest,D}var Et,Dt="3.6.0",Mt=1,z=2,O=4,M=8,B=16,L=32,F=64,P=128,He=256,Oe=30,rt="...",Tt=150,Ot=16,ce=0,q=1,dt=2,yt="Expected a function",gt="__lodash_placeholder__",xt="[object Arguments]",Kt="[object Array]",Ut="[object Boolean]",je="[object Date]",Ee="[object Error]",Dn="[object Function]",Sr="[object Number]",en="[object Object]",Hr="[object RegExp]",Fr="[object String]",Ui="[object ArrayBuffer]",Qs="[object Float32Array]",Ga="[object Float64Array]",nr="[object Int8Array]",$o="[object Int16Array]",Ys="[object Int32Array]",hs="[object Uint8Array]",ki="[object Uint8ClampedArray]",Go="[object Uint16Array]",ds="[object Uint32Array]",Qo=/\b__p\+='';/g,Kl=/\b(__p\+=)''\+/g,ze=/(__e\(.*?\)|\b__t\))\+'';/g,_e=/&(?:amp|lt|gt|quot|#39|#96);/g,rr=/[&<>"'`]/g,On=RegExp(_e.source),Xl=RegExp(rr.source),lc=/<%-([\s\S]+?)%>/g,Ks=/<%([\s\S]+?)%>/g,ms=/<%=([\s\S]+?)%>/g,Xs=/[\u0300-\u036f\ufe20-\ufe23]/g,$r=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Zs=/\w*$/,Js=/^0[xX]/,Yo=/^\[object .+?Constructor\]$/,Ko=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,ps=/($^)/,hi=/[.*+?^${}()|[\]\/\\]/g,Li=RegExp(hi.source),Xo=/['\n\r\u2028\u2029\\]/g,di=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),Zo=` 	\v\f \uFEFF
\r\u2028\u2029 ᠎             　`,gs="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout document isFinite parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap window".split(" "),Te={};Te[Qs]=Te[Ga]=Te[nr]=Te[$o]=Te[Ys]=Te[hs]=Te[ki]=Te[Go]=Te[ds]=!0,Te[xt]=Te[Kt]=Te[Ui]=Te[Ut]=Te[je]=Te[Ee]=Te[Dn]=Te["[object Map]"]=Te[Sr]=Te[en]=Te[Hr]=Te["[object Set]"]=Te[Fr]=Te["[object WeakMap]"]=!1;var pe={};pe[xt]=pe[Kt]=pe[Ui]=pe[Ut]=pe[je]=pe[Qs]=pe[Ga]=pe[nr]=pe[$o]=pe[Ys]=pe[Sr]=pe[en]=pe[Hr]=pe[Fr]=pe[hs]=pe[ki]=pe[Go]=pe[ds]=!0,pe[Ee]=pe[Dn]=pe["[object Map]"]=pe["[object Set]"]=pe["[object WeakMap]"]=!1;var Ws={leading:!1,maxWait:0,trailing:!1},Me={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss"},nn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ye={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},mi={function:!0,object:!0},Rr={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Bi=mi[typeof _f]&&_f&&!_f.nodeType&&_f,ta=mi[typeof vf]&&vf&&!vf.nodeType&&vf,ys=mi[typeof self]&&self&&self.Object&&self,mi=mi[typeof window]&&window&&window.Object&&window,ea=ta&&ta.exports===Bi&&Bi,Fn=Bi&&ta&&typeof global=="object"&&global||mi!==(this&&this.window)&&mi||ys||this,Nn=wt();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Fn._=Nn,define(function(){return Nn})):Bi&&ta?ea?(ta.exports=Nn)._=Nn:Bi._=Nn:Fn._=Nn}).call(void 0);function CS(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Ap={exports:{}},tf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var T0;function xS(){if(T0)return tf;T0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(i,o,u){var m=null;if(u!==void 0&&(m=""+u),o.key!==void 0&&(m=""+o.key),"key"in o){u={};for(var y in o)y!=="key"&&(u[y]=o[y])}else u=o;return o=u.ref,{$$typeof:s,type:i,key:m,ref:o!==void 0?o:null,props:u}}return tf.Fragment=t,tf.jsx=n,tf.jsxs=n,tf}var w0;function DS(){return w0||(w0=1,Ap.exports=xS()),Ap.exports}var It=DS(),_d="tircnick",OS=[];const Lg="eOp9LjtwzApDNb-TbPbCEZ2V74XTSwrV",xT=s=>{localStorage&&(localStorage.setItem(_d,s),console.log("user saved: "+s))};function DT(){return localStorage!==void 0&&localStorage.getItem(_d)!==null?localStorage.getItem(_d):"taho"}function NS(){var s="https://api.mongolab.com/api/1/databases/tirc/collections/phrase?apiKey="+Lg;return $.ajax({type:"GET",url:s,contentType:"application/json;charset=UTF-8"})}function MS(){var s={_id:"client"},t="https://api.mongolab.com/api/1/databases/tirc/collections/configuration?q="+JSON.stringify(s)+"&l=1&apiKey="+Lg;return $.ajax({type:"GET",url:t,contentType:"application/json;charset=UTF-8"})}const Qu={saveUser:xT,loadUser:DT,loadPhrases:NS,loadFromDb:MS,API_KEY:Lg,KEY:_d,users:OS};var Sp={exports:{}},Jt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b0;function VS(){if(b0)return Jt;b0=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),m=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),T=Symbol.for("react.memo"),S=Symbol.for("react.lazy"),x=Symbol.iterator;function N(q){return q===null||typeof q!="object"?null:(q=x&&q[x]||q["@@iterator"],typeof q=="function"?q:null)}var V={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},tt=Object.assign,Z={};function ot(q,dt,yt){this.props=q,this.context=dt,this.refs=Z,this.updater=yt||V}ot.prototype.isReactComponent={},ot.prototype.setState=function(q,dt){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,dt,"setState")},ot.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function bt(){}bt.prototype=ot.prototype;function pt(q,dt,yt){this.props=q,this.context=dt,this.refs=Z,this.updater=yt||V}var wt=pt.prototype=new bt;wt.constructor=pt,tt(wt,ot.prototype),wt.isPureReactComponent=!0;var Et=Array.isArray,Dt={H:null,A:null,T:null,S:null,V:null},Mt=Object.prototype.hasOwnProperty;function z(q,dt,yt,gt,xt,Kt){return yt=Kt.ref,{$$typeof:s,type:q,key:dt,ref:yt!==void 0?yt:null,props:Kt}}function O(q,dt){return z(q.type,dt,void 0,void 0,void 0,q.props)}function M(q){return typeof q=="object"&&q!==null&&q.$$typeof===s}function B(q){var dt={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(yt){return dt[yt]})}var L=/\/+/g;function F(q,dt){return typeof q=="object"&&q!==null&&q.key!=null?B(""+q.key):dt.toString(36)}function P(){}function He(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(P,P):(q.status="pending",q.then(function(dt){q.status==="pending"&&(q.status="fulfilled",q.value=dt)},function(dt){q.status==="pending"&&(q.status="rejected",q.reason=dt)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function Oe(q,dt,yt,gt,xt){var Kt=typeof q;(Kt==="undefined"||Kt==="boolean")&&(q=null);var Ut=!1;if(q===null)Ut=!0;else switch(Kt){case"bigint":case"string":case"number":Ut=!0;break;case"object":switch(q.$$typeof){case s:case t:Ut=!0;break;case S:return Ut=q._init,Oe(Ut(q._payload),dt,yt,gt,xt)}}if(Ut)return xt=xt(q),Ut=gt===""?"."+F(q,0):gt,Et(xt)?(yt="",Ut!=null&&(yt=Ut.replace(L,"$&/")+"/"),Oe(xt,dt,yt,"",function(Dn){return Dn})):xt!=null&&(M(xt)&&(xt=O(xt,yt+(xt.key==null||q&&q.key===xt.key?"":(""+xt.key).replace(L,"$&/")+"/")+Ut)),dt.push(xt)),1;Ut=0;var je=gt===""?".":gt+":";if(Et(q))for(var Ee=0;Ee<q.length;Ee++)gt=q[Ee],Kt=je+F(gt,Ee),Ut+=Oe(gt,dt,yt,Kt,xt);else if(Ee=N(q),typeof Ee=="function")for(q=Ee.call(q),Ee=0;!(gt=q.next()).done;)gt=gt.value,Kt=je+F(gt,Ee++),Ut+=Oe(gt,dt,yt,Kt,xt);else if(Kt==="object"){if(typeof q.then=="function")return Oe(He(q),dt,yt,gt,xt);throw dt=String(q),Error("Objects are not valid as a React child (found: "+(dt==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":dt)+"). If you meant to render a collection of children, use an array instead.")}return Ut}function rt(q,dt,yt){if(q==null)return q;var gt=[],xt=0;return Oe(q,gt,"","",function(Kt){return dt.call(yt,Kt,xt++)}),gt}function Tt(q){if(q._status===-1){var dt=q._result;dt=dt(),dt.then(function(yt){(q._status===0||q._status===-1)&&(q._status=1,q._result=yt)},function(yt){(q._status===0||q._status===-1)&&(q._status=2,q._result=yt)}),q._status===-1&&(q._status=0,q._result=dt)}if(q._status===1)return q._result.default;throw q._result}var Ot=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var dt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(dt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)};function ce(){}return Jt.Children={map:rt,forEach:function(q,dt,yt){rt(q,function(){dt.apply(this,arguments)},yt)},count:function(q){var dt=0;return rt(q,function(){dt++}),dt},toArray:function(q){return rt(q,function(dt){return dt})||[]},only:function(q){if(!M(q))throw Error("React.Children.only expected to receive a single React element child.");return q}},Jt.Component=ot,Jt.Fragment=n,Jt.Profiler=o,Jt.PureComponent=pt,Jt.StrictMode=i,Jt.Suspense=E,Jt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Dt,Jt.__COMPILER_RUNTIME={__proto__:null,c:function(q){return Dt.H.useMemoCache(q)}},Jt.cache=function(q){return function(){return q.apply(null,arguments)}},Jt.cloneElement=function(q,dt,yt){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var gt=tt({},q.props),xt=q.key,Kt=void 0;if(dt!=null)for(Ut in dt.ref!==void 0&&(Kt=void 0),dt.key!==void 0&&(xt=""+dt.key),dt)!Mt.call(dt,Ut)||Ut==="key"||Ut==="__self"||Ut==="__source"||Ut==="ref"&&dt.ref===void 0||(gt[Ut]=dt[Ut]);var Ut=arguments.length-2;if(Ut===1)gt.children=yt;else if(1<Ut){for(var je=Array(Ut),Ee=0;Ee<Ut;Ee++)je[Ee]=arguments[Ee+2];gt.children=je}return z(q.type,xt,void 0,void 0,Kt,gt)},Jt.createContext=function(q){return q={$$typeof:m,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:u,_context:q},q},Jt.createElement=function(q,dt,yt){var gt,xt={},Kt=null;if(dt!=null)for(gt in dt.key!==void 0&&(Kt=""+dt.key),dt)Mt.call(dt,gt)&&gt!=="key"&&gt!=="__self"&&gt!=="__source"&&(xt[gt]=dt[gt]);var Ut=arguments.length-2;if(Ut===1)xt.children=yt;else if(1<Ut){for(var je=Array(Ut),Ee=0;Ee<Ut;Ee++)je[Ee]=arguments[Ee+2];xt.children=je}if(q&&q.defaultProps)for(gt in Ut=q.defaultProps,Ut)xt[gt]===void 0&&(xt[gt]=Ut[gt]);return z(q,Kt,void 0,void 0,null,xt)},Jt.createRef=function(){return{current:null}},Jt.forwardRef=function(q){return{$$typeof:y,render:q}},Jt.isValidElement=M,Jt.lazy=function(q){return{$$typeof:S,_payload:{_status:-1,_result:q},_init:Tt}},Jt.memo=function(q,dt){return{$$typeof:T,type:q,compare:dt===void 0?null:dt}},Jt.startTransition=function(q){var dt=Dt.T,yt={};Dt.T=yt;try{var gt=q(),xt=Dt.S;xt!==null&&xt(yt,gt),typeof gt=="object"&&gt!==null&&typeof gt.then=="function"&&gt.then(ce,Ot)}catch(Kt){Ot(Kt)}finally{Dt.T=dt}},Jt.unstable_useCacheRefresh=function(){return Dt.H.useCacheRefresh()},Jt.use=function(q){return Dt.H.use(q)},Jt.useActionState=function(q,dt,yt){return Dt.H.useActionState(q,dt,yt)},Jt.useCallback=function(q,dt){return Dt.H.useCallback(q,dt)},Jt.useContext=function(q){return Dt.H.useContext(q)},Jt.useDebugValue=function(){},Jt.useDeferredValue=function(q,dt){return Dt.H.useDeferredValue(q,dt)},Jt.useEffect=function(q,dt,yt){var gt=Dt.H;if(typeof yt=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return gt.useEffect(q,dt)},Jt.useId=function(){return Dt.H.useId()},Jt.useImperativeHandle=function(q,dt,yt){return Dt.H.useImperativeHandle(q,dt,yt)},Jt.useInsertionEffect=function(q,dt){return Dt.H.useInsertionEffect(q,dt)},Jt.useLayoutEffect=function(q,dt){return Dt.H.useLayoutEffect(q,dt)},Jt.useMemo=function(q,dt){return Dt.H.useMemo(q,dt)},Jt.useOptimistic=function(q,dt){return Dt.H.useOptimistic(q,dt)},Jt.useReducer=function(q,dt,yt){return Dt.H.useReducer(q,dt,yt)},Jt.useRef=function(q){return Dt.H.useRef(q)},Jt.useState=function(q){return Dt.H.useState(q)},Jt.useSyncExternalStore=function(q,dt,yt){return Dt.H.useSyncExternalStore(q,dt,yt)},Jt.useTransition=function(){return Dt.H.useTransition()},Jt.version="19.1.0",Jt}var A0;function Bg(){return A0||(A0=1,Sp.exports=VS()),Sp.exports}var dn=Bg();const jg=CS(dn),PS=({nick:s,state:t,text:n})=>{var i=s,o="col-md-9 col-md-offset-3 ";return t==="fixing"?(i+=" korjaa...",o+="fixing"):(o+="typing",i+=" kirjoittaa..."),It.jsx("div",{className:"row",children:It.jsx("div",{className:o,children:i})})},US=()=>{};var S0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OT=function(s){const t=[];let n=0;for(let i=0;i<s.length;i++){let o=s.charCodeAt(i);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&i+1<s.length&&(s.charCodeAt(i+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++i)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},kS=function(s){const t=[];let n=0,i=0;for(;n<s.length;){const o=s[n++];if(o<128)t[i++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];t[i++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],m=s[n++],y=s[n++],E=((o&7)<<18|(u&63)<<12|(m&63)<<6|y&63)-65536;t[i++]=String.fromCharCode(55296+(E>>10)),t[i++]=String.fromCharCode(56320+(E&1023))}else{const u=s[n++],m=s[n++];t[i++]=String.fromCharCode((o&15)<<12|(u&63)<<6|m&63)}}return t.join("")},NT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let o=0;o<s.length;o+=3){const u=s[o],m=o+1<s.length,y=m?s[o+1]:0,E=o+2<s.length,T=E?s[o+2]:0,S=u>>2,x=(u&3)<<4|y>>4;let N=(y&15)<<2|T>>6,V=T&63;E||(V=64,m||(N=64)),i.push(n[S],n[x],n[N],n[V])}return i.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(OT(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):kS(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],y=o<s.length?n[s.charAt(o)]:0;++o;const T=o<s.length?n[s.charAt(o)]:64;++o;const x=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||y==null||T==null||x==null)throw new LS;const N=u<<2|y>>4;if(i.push(N),T!==64){const V=y<<4&240|T>>2;if(i.push(V),x!==64){const tt=T<<6&192|x;i.push(tt)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class LS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const BS=function(s){const t=OT(s);return NT.encodeByteArray(t,!0)},vd=function(s){return BS(s).replace(/\./g,"")},jS=function(s){try{return NT.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS=()=>zS().__FIREBASE_DEFAULTS__,HS=()=>{if(typeof process>"u"||typeof S0>"u")return;const s=S0.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},FS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&jS(s[1]);return t&&JSON.parse(t)},zg=()=>{try{return US()||qS()||HS()||FS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},$S=s=>zg()?.emulatorHosts?.[s],GS=s=>{const t=$S(s);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const i=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),i]:[t.substring(0,n),i]},MT=()=>zg()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qg(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function YS(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KS(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const m={iss:`https://securetoken.google.com/${i}`,aud:i,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[vd(JSON.stringify(n)),vd(JSON.stringify(m)),""].join(".")}const Ef={};function XS(){const s={prod:[],emulator:[]};for(const t of Object.keys(Ef))Ef[t]?s.emulator.push(t):s.prod.push(t);return s}function ZS(s){let t=document.getElementById(s),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),n=!0),{created:n,element:t}}let R0=!1;function JS(s,t){if(typeof window>"u"||typeof document>"u"||!qg(window.location.host)||Ef[s]===t||Ef[s]||R0)return;Ef[s]=t;function n(N){return`__firebase__banner__${N}`}const i="__firebase__banner",u=XS().prod.length>0;function m(){const N=document.getElementById(i);N&&N.remove()}function y(N){N.style.display="flex",N.style.background="#7faaf0",N.style.position="fixed",N.style.bottom="5px",N.style.left="5px",N.style.padding=".5em",N.style.borderRadius="5px",N.style.alignItems="center"}function E(N,V){N.setAttribute("width","24"),N.setAttribute("id",V),N.setAttribute("height","24"),N.setAttribute("viewBox","0 0 24 24"),N.setAttribute("fill","none"),N.style.marginLeft="-6px"}function T(){const N=document.createElement("span");return N.style.cursor="pointer",N.style.marginLeft="16px",N.style.fontSize="24px",N.innerHTML=" &times;",N.onclick=()=>{R0=!0,m()},N}function S(N,V){N.setAttribute("id",V),N.innerText="Learn more",N.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",N.setAttribute("target","__blank"),N.style.paddingLeft="5px",N.style.textDecoration="underline"}function x(){const N=ZS(i),V=n("text"),tt=document.getElementById(V)||document.createElement("span"),Z=n("learnmore"),ot=document.getElementById(Z)||document.createElement("a"),bt=n("preprendIcon"),pt=document.getElementById(bt)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(N.created){const wt=N.element;y(wt),S(ot,Z);const Et=T();E(pt,bt),wt.append(pt,tt,ot,Et),document.body.appendChild(wt)}u?(tt.innerText="Preview backend disconnected.",pt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(pt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,tt.innerText="Preview backend running in this workspace."),tt.setAttribute("id",V)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",x):x()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tR(){const s=zg()?.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eR(){const s=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof s=="object"&&s.id!==void 0}function nR(){return!tR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VT(){try{return typeof indexedDB=="object"}catch{return!1}}function PT(){return new Promise((s,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(i);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(i),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{t(o.error?.message||"")}}catch(n){t(n)}})}function rR(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="FirebaseError";class Fo extends Error{constructor(t,n,i){super(n),this.code=t,this.customData=i,this.name=iR,Object.setPrototypeOf(this,Fo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qd.prototype.create)}}class qd{constructor(t,n,i){this.service=t,this.serviceName=n,this.errors=i}create(t,...n){const i=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],m=u?sR(u,i):"Error",y=`${this.serviceName}: ${m} (${o}).`;return new Fo(o,y,i)}}function sR(s,t){return s.replace(aR,(n,i)=>{const o=t[i];return o!=null?String(o):`<${i}?>`})}const aR=/\{\$([^}]+)}/g;function Ed(s,t){if(s===t)return!0;const n=Object.keys(s),i=Object.keys(t);for(const o of n){if(!i.includes(o))return!1;const u=s[o],m=t[o];if(I0(u)&&I0(m)){if(!Ed(u,m))return!1}else if(u!==m)return!1}for(const o of i)if(!n.includes(o))return!1;return!0}function I0(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=1e3,lR=2,uR=14400*1e3,cR=.5;function C0(s,t=oR,n=lR){const i=t*Math.pow(n,s),o=Math.round(cR*i*(Math.random()-.5)*2);return Math.min(uR,i+o)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uo(s){return s&&s._delegate?s._delegate:s}class qa{constructor(t,n,i){this.name=t,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dl="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const i=new QS;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&i.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t?.identifier),i=t?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(dR(t))try{this.getOrInitializeService({instanceIdentifier:Dl})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});i.resolve(u)}catch{}}}}clearInstance(t=Dl){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Dl){return this.instances.has(t)}getOptions(t=Dl){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[u,m]of this.instancesDeferred.entries()){const y=this.normalizeInstanceIdentifier(u);i===y&&m.resolve(o)}return o}onInit(t,n){const i=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(i)??new Set;o.add(t),this.onInitCallbacks.set(i,o);const u=this.instances.get(i);return u&&t(u,i),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const i=this.onInitCallbacks.get(n);if(i)for(const o of i)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:hR(t),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Dl){return this.component?this.component.multipleInstances?t:Dl:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function hR(s){return s===Dl?void 0:s}function dR(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new fR(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(me||(me={}));const pR={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},gR=me.INFO,yR={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},_R=(s,t,...n)=>{if(t<s.logLevel)return;const i=new Date().toISOString(),o=yR[t];if(o)console[o](`[${i}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Hg{constructor(t){this.name=t,this._logLevel=gR,this._logHandler=_R,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in me))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?pR[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...t),this._logHandler(this,me.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...t),this._logHandler(this,me.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,me.INFO,...t),this._logHandler(this,me.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,me.WARN,...t),this._logHandler(this,me.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...t),this._logHandler(this,me.ERROR,...t)}}const vR=(s,t)=>t.some(n=>s instanceof n);let x0,D0;function ER(){return x0||(x0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TR(){return D0||(D0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UT=new WeakMap,Zp=new WeakMap,kT=new WeakMap,Rp=new WeakMap,Fg=new WeakMap;function wR(s){const t=new Promise((n,i)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",m)},u=()=>{n(Oo(s.result)),o()},m=()=>{i(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",m)});return t.then(n=>{n instanceof IDBCursor&&UT.set(n,s)}).catch(()=>{}),Fg.set(t,s),t}function bR(s){if(Zp.has(s))return;const t=new Promise((n,i)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",m),s.removeEventListener("abort",m)},u=()=>{n(),o()},m=()=>{i(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",m),s.addEventListener("abort",m)});Zp.set(s,t)}let Jp={get(s,t,n){if(s instanceof IDBTransaction){if(t==="done")return Zp.get(s);if(t==="objectStoreNames")return s.objectStoreNames||kT.get(s);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Oo(s[t])},set(s,t,n){return s[t]=n,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function AR(s){Jp=s(Jp)}function SR(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const i=s.call(Ip(this),t,...n);return kT.set(i,t.sort?t.sort():[t]),Oo(i)}:TR().includes(s)?function(...t){return s.apply(Ip(this),t),Oo(UT.get(this))}:function(...t){return Oo(s.apply(Ip(this),t))}}function RR(s){return typeof s=="function"?SR(s):(s instanceof IDBTransaction&&bR(s),vR(s,ER())?new Proxy(s,Jp):s)}function Oo(s){if(s instanceof IDBRequest)return wR(s);if(Rp.has(s))return Rp.get(s);const t=RR(s);return t!==s&&(Rp.set(s,t),Fg.set(t,s)),t}const Ip=s=>Fg.get(s);function LT(s,t,{blocked:n,upgrade:i,blocking:o,terminated:u}={}){const m=indexedDB.open(s,t),y=Oo(m);return i&&m.addEventListener("upgradeneeded",E=>{i(Oo(m.result),E.oldVersion,E.newVersion,Oo(m.transaction),E)}),n&&m.addEventListener("blocked",E=>n(E.oldVersion,E.newVersion,E)),y.then(E=>{u&&E.addEventListener("close",()=>u()),o&&E.addEventListener("versionchange",T=>o(T.oldVersion,T.newVersion,T))}).catch(()=>{}),y}const IR=["get","getKey","getAll","getAllKeys","count"],CR=["put","add","delete","clear"],Cp=new Map;function O0(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Cp.get(t))return Cp.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,o=CR.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(o||IR.includes(n)))return;const u=async function(m,...y){const E=this.transaction(m,o?"readwrite":"readonly");let T=E.store;return i&&(T=T.index(y.shift())),(await Promise.all([T[n](...y),o&&E.done]))[0]};return Cp.set(t,u),u}AR(s=>({...s,get:(t,n,i)=>O0(t,n)||s.get(t,n,i),has:(t,n)=>!!O0(t,n)||s.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DR(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function DR(s){return s.getComponent()?.type==="VERSION"}const Wp="@firebase/app",N0="0.14.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha=new Hg("@firebase/app"),OR="@firebase/app-compat",NR="@firebase/analytics-compat",MR="@firebase/analytics",VR="@firebase/app-check-compat",PR="@firebase/app-check",UR="@firebase/auth",kR="@firebase/auth-compat",LR="@firebase/database",BR="@firebase/data-connect",jR="@firebase/database-compat",zR="@firebase/functions",qR="@firebase/functions-compat",HR="@firebase/installations",FR="@firebase/installations-compat",$R="@firebase/messaging",GR="@firebase/messaging-compat",QR="@firebase/performance",YR="@firebase/performance-compat",KR="@firebase/remote-config",XR="@firebase/remote-config-compat",ZR="@firebase/storage",JR="@firebase/storage-compat",WR="@firebase/firestore",t2="@firebase/ai",e2="@firebase/firestore-compat",n2="firebase",r2="12.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tg="[DEFAULT]",i2={[Wp]:"fire-core",[OR]:"fire-core-compat",[MR]:"fire-analytics",[NR]:"fire-analytics-compat",[PR]:"fire-app-check",[VR]:"fire-app-check-compat",[UR]:"fire-auth",[kR]:"fire-auth-compat",[LR]:"fire-rtdb",[BR]:"fire-data-connect",[jR]:"fire-rtdb-compat",[zR]:"fire-fn",[qR]:"fire-fn-compat",[HR]:"fire-iid",[FR]:"fire-iid-compat",[$R]:"fire-fcm",[GR]:"fire-fcm-compat",[QR]:"fire-perf",[YR]:"fire-perf-compat",[KR]:"fire-rc",[XR]:"fire-rc-compat",[ZR]:"fire-gcs",[JR]:"fire-gcs-compat",[WR]:"fire-fst",[e2]:"fire-fst-compat",[t2]:"fire-vertex","fire-js":"fire-js",[n2]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Td=new Map,s2=new Map,eg=new Map;function M0(s,t){try{s.container.addComponent(t)}catch(n){Ha.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,n)}}function ko(s){const t=s.name;if(eg.has(t))return Ha.debug(`There were multiple attempts to register component ${t}.`),!1;eg.set(t,s);for(const n of Td.values())M0(n,s);for(const n of s2.values())M0(n,s);return!0}function $g(s,t){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(t)}function a2(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},No=new qd("app","Firebase",o2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(t,n,i){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new qa("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw No.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=r2;function BT(s,t={}){let n=s;typeof t!="object"&&(t={name:t});const i={name:tg,automaticDataCollectionEnabled:!0,...t},o=i.name;if(typeof o!="string"||!o)throw No.create("bad-app-name",{appName:String(o)});if(n||(n=MT()),!n)throw No.create("no-options");const u=Td.get(o);if(u){if(Ed(n,u.options)&&Ed(i,u.config))return u;throw No.create("duplicate-app",{appName:o})}const m=new mR(o);for(const E of eg.values())m.addComponent(E);const y=new l2(n,i,m);return Td.set(o,y),y}function c2(s=tg){const t=Td.get(s);if(!t&&s===tg&&MT())return BT();if(!t)throw No.create("no-app",{appName:s});return t}function js(s,t,n){let i=i2[s]??s;n&&(i+=`-${n}`);const o=i.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const m=[`Unable to register library "${i}" with version "${t}":`];o&&m.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&u&&m.push("and"),u&&m.push(`version name "${t}" contains illegal characters (whitespace or "/")`),Ha.warn(m.join(" "));return}ko(new qa(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2="firebase-heartbeat-database",h2=1,Df="firebase-heartbeat-store";let xp=null;function jT(){return xp||(xp=LT(f2,h2,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(Df)}catch(n){console.warn(n)}}}}).catch(s=>{throw No.create("idb-open",{originalErrorMessage:s.message})})),xp}async function d2(s){try{const n=(await jT()).transaction(Df),i=await n.objectStore(Df).get(zT(s));return await n.done,i}catch(t){if(t instanceof Fo)Ha.warn(t.message);else{const n=No.create("idb-get",{originalErrorMessage:t?.message});Ha.warn(n.message)}}}async function V0(s,t){try{const i=(await jT()).transaction(Df,"readwrite");await i.objectStore(Df).put(t,zT(s)),await i.done}catch(n){if(n instanceof Fo)Ha.warn(n.message);else{const i=No.create("idb-set",{originalErrorMessage:n?.message});Ha.warn(i.message)}}}function zT(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m2=1024,p2=30;class g2{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _2(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=P0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>p2){const o=v2(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(t){Ha.warn(t)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=P0(),{heartbeatsToSend:n,unsentEntries:i}=y2(this._heartbeatsCache.heartbeats),o=vd(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return Ha.warn(t),""}}}function P0(){return new Date().toISOString().substring(0,10)}function y2(s,t=m2){const n=[];let i=s.slice();for(const o of s){const u=n.find(m=>m.agent===o.agent);if(u){if(u.dates.push(o.date),U0(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),U0(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class _2{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VT()?PT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await d2(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return V0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const i=await this.read();return V0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function U0(s){return vd(JSON.stringify({version:2,heartbeats:s})).length}function v2(s){if(s.length===0)return-1;let t=0,n=s[0].date;for(let i=1;i<s.length;i++)s[i].date<n&&(n=s[i].date,t=i);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E2(s){ko(new qa("platform-logger",t=>new xR(t),"PRIVATE")),ko(new qa("heartbeat",t=>new g2(t),"PRIVATE")),js(Wp,N0,s),js(Wp,N0,"esm2020"),js("fire-js","")}E2("");var T2="firebase",w2="12.2.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */js(T2,w2,"app");var k0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Mo,qT;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(z,O){function M(){}M.prototype=O.prototype,z.D=O.prototype,z.prototype=new M,z.prototype.constructor=z,z.C=function(B,L,F){for(var P=Array(arguments.length-2),He=2;He<arguments.length;He++)P[He-2]=arguments[He];return O.prototype[L].apply(B,P)}}function n(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,n),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(z,O,M){M||(M=0);var B=Array(16);if(typeof O=="string")for(var L=0;16>L;++L)B[L]=O.charCodeAt(M++)|O.charCodeAt(M++)<<8|O.charCodeAt(M++)<<16|O.charCodeAt(M++)<<24;else for(L=0;16>L;++L)B[L]=O[M++]|O[M++]<<8|O[M++]<<16|O[M++]<<24;O=z.g[0],M=z.g[1],L=z.g[2];var F=z.g[3],P=O+(F^M&(L^F))+B[0]+3614090360&4294967295;O=M+(P<<7&4294967295|P>>>25),P=F+(L^O&(M^L))+B[1]+3905402710&4294967295,F=O+(P<<12&4294967295|P>>>20),P=L+(M^F&(O^M))+B[2]+606105819&4294967295,L=F+(P<<17&4294967295|P>>>15),P=M+(O^L&(F^O))+B[3]+3250441966&4294967295,M=L+(P<<22&4294967295|P>>>10),P=O+(F^M&(L^F))+B[4]+4118548399&4294967295,O=M+(P<<7&4294967295|P>>>25),P=F+(L^O&(M^L))+B[5]+1200080426&4294967295,F=O+(P<<12&4294967295|P>>>20),P=L+(M^F&(O^M))+B[6]+2821735955&4294967295,L=F+(P<<17&4294967295|P>>>15),P=M+(O^L&(F^O))+B[7]+4249261313&4294967295,M=L+(P<<22&4294967295|P>>>10),P=O+(F^M&(L^F))+B[8]+1770035416&4294967295,O=M+(P<<7&4294967295|P>>>25),P=F+(L^O&(M^L))+B[9]+2336552879&4294967295,F=O+(P<<12&4294967295|P>>>20),P=L+(M^F&(O^M))+B[10]+4294925233&4294967295,L=F+(P<<17&4294967295|P>>>15),P=M+(O^L&(F^O))+B[11]+2304563134&4294967295,M=L+(P<<22&4294967295|P>>>10),P=O+(F^M&(L^F))+B[12]+1804603682&4294967295,O=M+(P<<7&4294967295|P>>>25),P=F+(L^O&(M^L))+B[13]+4254626195&4294967295,F=O+(P<<12&4294967295|P>>>20),P=L+(M^F&(O^M))+B[14]+2792965006&4294967295,L=F+(P<<17&4294967295|P>>>15),P=M+(O^L&(F^O))+B[15]+1236535329&4294967295,M=L+(P<<22&4294967295|P>>>10),P=O+(L^F&(M^L))+B[1]+4129170786&4294967295,O=M+(P<<5&4294967295|P>>>27),P=F+(M^L&(O^M))+B[6]+3225465664&4294967295,F=O+(P<<9&4294967295|P>>>23),P=L+(O^M&(F^O))+B[11]+643717713&4294967295,L=F+(P<<14&4294967295|P>>>18),P=M+(F^O&(L^F))+B[0]+3921069994&4294967295,M=L+(P<<20&4294967295|P>>>12),P=O+(L^F&(M^L))+B[5]+3593408605&4294967295,O=M+(P<<5&4294967295|P>>>27),P=F+(M^L&(O^M))+B[10]+38016083&4294967295,F=O+(P<<9&4294967295|P>>>23),P=L+(O^M&(F^O))+B[15]+3634488961&4294967295,L=F+(P<<14&4294967295|P>>>18),P=M+(F^O&(L^F))+B[4]+3889429448&4294967295,M=L+(P<<20&4294967295|P>>>12),P=O+(L^F&(M^L))+B[9]+568446438&4294967295,O=M+(P<<5&4294967295|P>>>27),P=F+(M^L&(O^M))+B[14]+3275163606&4294967295,F=O+(P<<9&4294967295|P>>>23),P=L+(O^M&(F^O))+B[3]+4107603335&4294967295,L=F+(P<<14&4294967295|P>>>18),P=M+(F^O&(L^F))+B[8]+1163531501&4294967295,M=L+(P<<20&4294967295|P>>>12),P=O+(L^F&(M^L))+B[13]+2850285829&4294967295,O=M+(P<<5&4294967295|P>>>27),P=F+(M^L&(O^M))+B[2]+4243563512&4294967295,F=O+(P<<9&4294967295|P>>>23),P=L+(O^M&(F^O))+B[7]+1735328473&4294967295,L=F+(P<<14&4294967295|P>>>18),P=M+(F^O&(L^F))+B[12]+2368359562&4294967295,M=L+(P<<20&4294967295|P>>>12),P=O+(M^L^F)+B[5]+4294588738&4294967295,O=M+(P<<4&4294967295|P>>>28),P=F+(O^M^L)+B[8]+2272392833&4294967295,F=O+(P<<11&4294967295|P>>>21),P=L+(F^O^M)+B[11]+1839030562&4294967295,L=F+(P<<16&4294967295|P>>>16),P=M+(L^F^O)+B[14]+4259657740&4294967295,M=L+(P<<23&4294967295|P>>>9),P=O+(M^L^F)+B[1]+2763975236&4294967295,O=M+(P<<4&4294967295|P>>>28),P=F+(O^M^L)+B[4]+1272893353&4294967295,F=O+(P<<11&4294967295|P>>>21),P=L+(F^O^M)+B[7]+4139469664&4294967295,L=F+(P<<16&4294967295|P>>>16),P=M+(L^F^O)+B[10]+3200236656&4294967295,M=L+(P<<23&4294967295|P>>>9),P=O+(M^L^F)+B[13]+681279174&4294967295,O=M+(P<<4&4294967295|P>>>28),P=F+(O^M^L)+B[0]+3936430074&4294967295,F=O+(P<<11&4294967295|P>>>21),P=L+(F^O^M)+B[3]+3572445317&4294967295,L=F+(P<<16&4294967295|P>>>16),P=M+(L^F^O)+B[6]+76029189&4294967295,M=L+(P<<23&4294967295|P>>>9),P=O+(M^L^F)+B[9]+3654602809&4294967295,O=M+(P<<4&4294967295|P>>>28),P=F+(O^M^L)+B[12]+3873151461&4294967295,F=O+(P<<11&4294967295|P>>>21),P=L+(F^O^M)+B[15]+530742520&4294967295,L=F+(P<<16&4294967295|P>>>16),P=M+(L^F^O)+B[2]+3299628645&4294967295,M=L+(P<<23&4294967295|P>>>9),P=O+(L^(M|~F))+B[0]+4096336452&4294967295,O=M+(P<<6&4294967295|P>>>26),P=F+(M^(O|~L))+B[7]+1126891415&4294967295,F=O+(P<<10&4294967295|P>>>22),P=L+(O^(F|~M))+B[14]+2878612391&4294967295,L=F+(P<<15&4294967295|P>>>17),P=M+(F^(L|~O))+B[5]+4237533241&4294967295,M=L+(P<<21&4294967295|P>>>11),P=O+(L^(M|~F))+B[12]+1700485571&4294967295,O=M+(P<<6&4294967295|P>>>26),P=F+(M^(O|~L))+B[3]+2399980690&4294967295,F=O+(P<<10&4294967295|P>>>22),P=L+(O^(F|~M))+B[10]+4293915773&4294967295,L=F+(P<<15&4294967295|P>>>17),P=M+(F^(L|~O))+B[1]+2240044497&4294967295,M=L+(P<<21&4294967295|P>>>11),P=O+(L^(M|~F))+B[8]+1873313359&4294967295,O=M+(P<<6&4294967295|P>>>26),P=F+(M^(O|~L))+B[15]+4264355552&4294967295,F=O+(P<<10&4294967295|P>>>22),P=L+(O^(F|~M))+B[6]+2734768916&4294967295,L=F+(P<<15&4294967295|P>>>17),P=M+(F^(L|~O))+B[13]+1309151649&4294967295,M=L+(P<<21&4294967295|P>>>11),P=O+(L^(M|~F))+B[4]+4149444226&4294967295,O=M+(P<<6&4294967295|P>>>26),P=F+(M^(O|~L))+B[11]+3174756917&4294967295,F=O+(P<<10&4294967295|P>>>22),P=L+(O^(F|~M))+B[2]+718787259&4294967295,L=F+(P<<15&4294967295|P>>>17),P=M+(F^(L|~O))+B[9]+3951481745&4294967295,z.g[0]=z.g[0]+O&4294967295,z.g[1]=z.g[1]+(L+(P<<21&4294967295|P>>>11))&4294967295,z.g[2]=z.g[2]+L&4294967295,z.g[3]=z.g[3]+F&4294967295}i.prototype.u=function(z,O){O===void 0&&(O=z.length);for(var M=O-this.blockSize,B=this.B,L=this.h,F=0;F<O;){if(L==0)for(;F<=M;)o(this,z,F),F+=this.blockSize;if(typeof z=="string"){for(;F<O;)if(B[L++]=z.charCodeAt(F++),L==this.blockSize){o(this,B),L=0;break}}else for(;F<O;)if(B[L++]=z[F++],L==this.blockSize){o(this,B),L=0;break}}this.h=L,this.o+=O},i.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var O=1;O<z.length-8;++O)z[O]=0;var M=8*this.o;for(O=z.length-8;O<z.length;++O)z[O]=M&255,M/=256;for(this.u(z),z=Array(16),O=M=0;4>O;++O)for(var B=0;32>B;B+=8)z[M++]=this.g[O]>>>B&255;return z};function u(z,O){var M=y;return Object.prototype.hasOwnProperty.call(M,z)?M[z]:M[z]=O(z)}function m(z,O){this.h=O;for(var M=[],B=!0,L=z.length-1;0<=L;L--){var F=z[L]|0;B&&F==O||(M[L]=F,B=!1)}this.g=M}var y={};function E(z){return-128<=z&&128>z?u(z,function(O){return new m([O|0],0>O?-1:0)}):new m([z|0],0>z?-1:0)}function T(z){if(isNaN(z)||!isFinite(z))return x;if(0>z)return ot(T(-z));for(var O=[],M=1,B=0;z>=M;B++)O[B]=z/M|0,M*=4294967296;return new m(O,0)}function S(z,O){if(z.length==0)throw Error("number format error: empty string");if(O=O||10,2>O||36<O)throw Error("radix out of range: "+O);if(z.charAt(0)=="-")return ot(S(z.substring(1),O));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=T(Math.pow(O,8)),B=x,L=0;L<z.length;L+=8){var F=Math.min(8,z.length-L),P=parseInt(z.substring(L,L+F),O);8>F?(F=T(Math.pow(O,F)),B=B.j(F).add(T(P))):(B=B.j(M),B=B.add(T(P)))}return B}var x=E(0),N=E(1),V=E(16777216);s=m.prototype,s.m=function(){if(Z(this))return-ot(this).m();for(var z=0,O=1,M=0;M<this.g.length;M++){var B=this.i(M);z+=(0<=B?B:4294967296+B)*O,O*=4294967296}return z},s.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(tt(this))return"0";if(Z(this))return"-"+ot(this).toString(z);for(var O=T(Math.pow(z,6)),M=this,B="";;){var L=Et(M,O).g;M=bt(M,L.j(O));var F=((0<M.g.length?M.g[0]:M.h)>>>0).toString(z);if(M=L,tt(M))return F+B;for(;6>F.length;)F="0"+F;B=F+B}},s.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function tt(z){if(z.h!=0)return!1;for(var O=0;O<z.g.length;O++)if(z.g[O]!=0)return!1;return!0}function Z(z){return z.h==-1}s.l=function(z){return z=bt(this,z),Z(z)?-1:tt(z)?0:1};function ot(z){for(var O=z.g.length,M=[],B=0;B<O;B++)M[B]=~z.g[B];return new m(M,~z.h).add(N)}s.abs=function(){return Z(this)?ot(this):this},s.add=function(z){for(var O=Math.max(this.g.length,z.g.length),M=[],B=0,L=0;L<=O;L++){var F=B+(this.i(L)&65535)+(z.i(L)&65535),P=(F>>>16)+(this.i(L)>>>16)+(z.i(L)>>>16);B=P>>>16,F&=65535,P&=65535,M[L]=P<<16|F}return new m(M,M[M.length-1]&-2147483648?-1:0)};function bt(z,O){return z.add(ot(O))}s.j=function(z){if(tt(this)||tt(z))return x;if(Z(this))return Z(z)?ot(this).j(ot(z)):ot(ot(this).j(z));if(Z(z))return ot(this.j(ot(z)));if(0>this.l(V)&&0>z.l(V))return T(this.m()*z.m());for(var O=this.g.length+z.g.length,M=[],B=0;B<2*O;B++)M[B]=0;for(B=0;B<this.g.length;B++)for(var L=0;L<z.g.length;L++){var F=this.i(B)>>>16,P=this.i(B)&65535,He=z.i(L)>>>16,Oe=z.i(L)&65535;M[2*B+2*L]+=P*Oe,pt(M,2*B+2*L),M[2*B+2*L+1]+=F*Oe,pt(M,2*B+2*L+1),M[2*B+2*L+1]+=P*He,pt(M,2*B+2*L+1),M[2*B+2*L+2]+=F*He,pt(M,2*B+2*L+2)}for(B=0;B<O;B++)M[B]=M[2*B+1]<<16|M[2*B];for(B=O;B<2*O;B++)M[B]=0;return new m(M,0)};function pt(z,O){for(;(z[O]&65535)!=z[O];)z[O+1]+=z[O]>>>16,z[O]&=65535,O++}function wt(z,O){this.g=z,this.h=O}function Et(z,O){if(tt(O))throw Error("division by zero");if(tt(z))return new wt(x,x);if(Z(z))return O=Et(ot(z),O),new wt(ot(O.g),ot(O.h));if(Z(O))return O=Et(z,ot(O)),new wt(ot(O.g),O.h);if(30<z.g.length){if(Z(z)||Z(O))throw Error("slowDivide_ only works with positive integers.");for(var M=N,B=O;0>=B.l(z);)M=Dt(M),B=Dt(B);var L=Mt(M,1),F=Mt(B,1);for(B=Mt(B,2),M=Mt(M,2);!tt(B);){var P=F.add(B);0>=P.l(z)&&(L=L.add(M),F=P),B=Mt(B,1),M=Mt(M,1)}return O=bt(z,L.j(O)),new wt(L,O)}for(L=x;0<=z.l(O);){for(M=Math.max(1,Math.floor(z.m()/O.m())),B=Math.ceil(Math.log(M)/Math.LN2),B=48>=B?1:Math.pow(2,B-48),F=T(M),P=F.j(O);Z(P)||0<P.l(z);)M-=B,F=T(M),P=F.j(O);tt(F)&&(F=N),L=L.add(F),z=bt(z,P)}return new wt(L,z)}s.A=function(z){return Et(this,z).h},s.and=function(z){for(var O=Math.max(this.g.length,z.g.length),M=[],B=0;B<O;B++)M[B]=this.i(B)&z.i(B);return new m(M,this.h&z.h)},s.or=function(z){for(var O=Math.max(this.g.length,z.g.length),M=[],B=0;B<O;B++)M[B]=this.i(B)|z.i(B);return new m(M,this.h|z.h)},s.xor=function(z){for(var O=Math.max(this.g.length,z.g.length),M=[],B=0;B<O;B++)M[B]=this.i(B)^z.i(B);return new m(M,this.h^z.h)};function Dt(z){for(var O=z.g.length+1,M=[],B=0;B<O;B++)M[B]=z.i(B)<<1|z.i(B-1)>>>31;return new m(M,z.h)}function Mt(z,O){var M=O>>5;O%=32;for(var B=z.g.length-M,L=[],F=0;F<B;F++)L[F]=0<O?z.i(F+M)>>>O|z.i(F+M+1)<<32-O:z.i(F+M);return new m(L,z.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,qT=i,m.prototype.add=m.prototype.add,m.prototype.multiply=m.prototype.j,m.prototype.modulo=m.prototype.A,m.prototype.compare=m.prototype.l,m.prototype.toNumber=m.prototype.m,m.prototype.toString=m.prototype.toString,m.prototype.getBits=m.prototype.i,m.fromNumber=T,m.fromString=S,Mo=m}).apply(typeof k0<"u"?k0:typeof self<"u"?self:typeof window<"u"?window:{});var $h=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var HT,sf,FT,rd,ng,$T,GT,QT;(function(){var s,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,_,w){return f==Array.prototype||f==Object.prototype||(f[_]=w.value),f};function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof $h=="object"&&$h];for(var _=0;_<f.length;++_){var w=f[_];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var i=n(this);function o(f,_){if(_)t:{var w=i;f=f.split(".");for(var I=0;I<f.length-1;I++){var Q=f[I];if(!(Q in w))break t;w=w[Q]}f=f[f.length-1],I=w[f],_=_(I),_!=I&&_!=null&&t(w,f,{configurable:!0,writable:!0,value:_})}}function u(f,_){f instanceof String&&(f+="");var w=0,I=!1,Q={next:function(){if(!I&&w<f.length){var nt=w++;return{value:_(nt,f[nt]),done:!1}}return I=!0,{done:!0,value:void 0}}};return Q[Symbol.iterator]=function(){return Q},Q}o("Array.prototype.values",function(f){return f||function(){return u(this,function(_,w){return w})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var m=m||{},y=this||self;function E(f){var _=typeof f;return _=_!="object"?_:f?Array.isArray(f)?"array":_:"null",_=="array"||_=="object"&&typeof f.length=="number"}function T(f){var _=typeof f;return _=="object"&&f!=null||_=="function"}function S(f,_,w){return f.call.apply(f.bind,arguments)}function x(f,_,w){if(!f)throw Error();if(2<arguments.length){var I=Array.prototype.slice.call(arguments,2);return function(){var Q=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Q,I),f.apply(_,Q)}}return function(){return f.apply(_,arguments)}}function N(f,_,w){return N=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?S:x,N.apply(null,arguments)}function V(f,_){var w=Array.prototype.slice.call(arguments,1);return function(){var I=w.slice();return I.push.apply(I,arguments),f.apply(this,I)}}function tt(f,_){function w(){}w.prototype=_.prototype,f.aa=_.prototype,f.prototype=new w,f.prototype.constructor=f,f.Qb=function(I,Q,nt){for(var _t=Array(arguments.length-2),re=2;re<arguments.length;re++)_t[re-2]=arguments[re];return _.prototype[Q].apply(I,_t)}}function Z(f){const _=f.length;if(0<_){const w=Array(_);for(let I=0;I<_;I++)w[I]=f[I];return w}return[]}function ot(f,_){for(let w=1;w<arguments.length;w++){const I=arguments[w];if(E(I)){const Q=f.length||0,nt=I.length||0;f.length=Q+nt;for(let _t=0;_t<nt;_t++)f[Q+_t]=I[_t]}else f.push(I)}}class bt{constructor(_,w){this.i=_,this.j=w,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function pt(f){return/^[\s\xa0]*$/.test(f)}function wt(){var f=y.navigator;return f&&(f=f.userAgent)?f:""}function Et(f){return Et[" "](f),f}Et[" "]=function(){};var Dt=wt().indexOf("Gecko")!=-1&&!(wt().toLowerCase().indexOf("webkit")!=-1&&wt().indexOf("Edge")==-1)&&!(wt().indexOf("Trident")!=-1||wt().indexOf("MSIE")!=-1)&&wt().indexOf("Edge")==-1;function Mt(f,_,w){for(const I in f)_.call(w,f[I],I,f)}function z(f,_){for(const w in f)_.call(void 0,f[w],w,f)}function O(f){const _={};for(const w in f)_[w]=f[w];return _}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function B(f,_){let w,I;for(let Q=1;Q<arguments.length;Q++){I=arguments[Q];for(w in I)f[w]=I[w];for(let nt=0;nt<M.length;nt++)w=M[nt],Object.prototype.hasOwnProperty.call(I,w)&&(f[w]=I[w])}}function L(f){var _=1;f=f.split(":");const w=[];for(;0<_&&f.length;)w.push(f.shift()),_--;return f.length&&w.push(f.join(":")),w}function F(f){y.setTimeout(()=>{throw f},0)}function P(){var f=ce;let _=null;return f.g&&(_=f.g,f.g=f.g.next,f.g||(f.h=null),_.next=null),_}class He{constructor(){this.h=this.g=null}add(_,w){const I=Oe.get();I.set(_,w),this.h?this.h.next=I:this.g=I,this.h=I}}var Oe=new bt(()=>new rt,f=>f.reset());class rt{constructor(){this.next=this.g=this.h=null}set(_,w){this.h=_,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let Tt,Ot=!1,ce=new He,q=()=>{const f=y.Promise.resolve(void 0);Tt=()=>{f.then(dt)}};var dt=()=>{for(var f;f=P();){try{f.h.call(f.g)}catch(w){F(w)}var _=Oe;_.j(f),100>_.h&&(_.h++,f.next=_.g,_.g=f)}Ot=!1};function yt(){this.s=this.s,this.C=this.C}yt.prototype.s=!1,yt.prototype.ma=function(){this.s||(this.s=!0,this.N())},yt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function gt(f,_){this.type=f,this.g=this.target=_,this.defaultPrevented=!1}gt.prototype.h=function(){this.defaultPrevented=!0};var xt=(function(){if(!y.addEventListener||!Object.defineProperty)return!1;var f=!1,_=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const w=()=>{};y.addEventListener("test",w,_),y.removeEventListener("test",w,_)}catch{}return f})();function Kt(f,_){if(gt.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var w=this.type=f.type,I=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=_,_=f.relatedTarget){if(Dt){t:{try{Et(_.nodeName);var Q=!0;break t}catch{}Q=!1}Q||(_=null)}}else w=="mouseover"?_=f.fromElement:w=="mouseout"&&(_=f.toElement);this.relatedTarget=_,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:Ut[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&Kt.aa.h.call(this)}}tt(Kt,gt);var Ut={2:"touch",3:"pen",4:"mouse"};Kt.prototype.h=function(){Kt.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var je="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function Dn(f,_,w,I,Q){this.listener=f,this.proxy=null,this.src=_,this.type=w,this.capture=!!I,this.ha=Q,this.key=++Ee,this.da=this.fa=!1}function Sr(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function en(f){this.src=f,this.g={},this.h=0}en.prototype.add=function(f,_,w,I,Q){var nt=f.toString();f=this.g[nt],f||(f=this.g[nt]=[],this.h++);var _t=Fr(f,_,I,Q);return-1<_t?(_=f[_t],w||(_.fa=!1)):(_=new Dn(_,this.src,nt,!!I,Q),_.fa=w,f.push(_)),_};function Hr(f,_){var w=_.type;if(w in f.g){var I=f.g[w],Q=Array.prototype.indexOf.call(I,_,void 0),nt;(nt=0<=Q)&&Array.prototype.splice.call(I,Q,1),nt&&(Sr(_),f.g[w].length==0&&(delete f.g[w],f.h--))}}function Fr(f,_,w,I){for(var Q=0;Q<f.length;++Q){var nt=f[Q];if(!nt.da&&nt.listener==_&&nt.capture==!!w&&nt.ha==I)return Q}return-1}var Ui="closure_lm_"+(1e6*Math.random()|0),Qs={};function Ga(f,_,w,I,Q){if(Array.isArray(_)){for(var nt=0;nt<_.length;nt++)Ga(f,_[nt],w,I,Q);return null}return w=Kl(w),f&&f[je]?f.K(_,w,T(I)?!!I.capture:!1,Q):nr(f,_,w,!1,I,Q)}function nr(f,_,w,I,Q,nt){if(!_)throw Error("Invalid event type");var _t=T(Q)?!!Q.capture:!!Q,re=ds(f);if(re||(f[Ui]=re=new en(f)),w=re.add(_,w,I,_t,nt),w.proxy)return w;if(I=$o(),w.proxy=I,I.src=f,I.listener=w,f.addEventListener)xt||(Q=_t),Q===void 0&&(Q=!1),f.addEventListener(_.toString(),I,Q);else if(f.attachEvent)f.attachEvent(ki(_.toString()),I);else if(f.addListener&&f.removeListener)f.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return w}function $o(){function f(w){return _.call(f.src,f.listener,w)}const _=Go;return f}function Ys(f,_,w,I,Q){if(Array.isArray(_))for(var nt=0;nt<_.length;nt++)Ys(f,_[nt],w,I,Q);else I=T(I)?!!I.capture:!!I,w=Kl(w),f&&f[je]?(f=f.i,_=String(_).toString(),_ in f.g&&(nt=f.g[_],w=Fr(nt,w,I,Q),-1<w&&(Sr(nt[w]),Array.prototype.splice.call(nt,w,1),nt.length==0&&(delete f.g[_],f.h--)))):f&&(f=ds(f))&&(_=f.g[_.toString()],f=-1,_&&(f=Fr(_,w,I,Q)),(w=-1<f?_[f]:null)&&hs(w))}function hs(f){if(typeof f!="number"&&f&&!f.da){var _=f.src;if(_&&_[je])Hr(_.i,f);else{var w=f.type,I=f.proxy;_.removeEventListener?_.removeEventListener(w,I,f.capture):_.detachEvent?_.detachEvent(ki(w),I):_.addListener&&_.removeListener&&_.removeListener(I),(w=ds(_))?(Hr(w,f),w.h==0&&(w.src=null,_[Ui]=null)):Sr(f)}}}function ki(f){return f in Qs?Qs[f]:Qs[f]="on"+f}function Go(f,_){if(f.da)f=!0;else{_=new Kt(_,this);var w=f.listener,I=f.ha||f.src;f.fa&&hs(f),f=w.call(I,_)}return f}function ds(f){return f=f[Ui],f instanceof en?f:null}var Qo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Kl(f){return typeof f=="function"?f:(f[Qo]||(f[Qo]=function(_){return f.handleEvent(_)}),f[Qo])}function ze(){yt.call(this),this.i=new en(this),this.M=this,this.F=null}tt(ze,yt),ze.prototype[je]=!0,ze.prototype.removeEventListener=function(f,_,w,I){Ys(this,f,_,w,I)};function _e(f,_){var w,I=f.F;if(I)for(w=[];I;I=I.F)w.push(I);if(f=f.M,I=_.type||_,typeof _=="string")_=new gt(_,f);else if(_ instanceof gt)_.target=_.target||f;else{var Q=_;_=new gt(I,f),B(_,Q)}if(Q=!0,w)for(var nt=w.length-1;0<=nt;nt--){var _t=_.g=w[nt];Q=rr(_t,I,!0,_)&&Q}if(_t=_.g=f,Q=rr(_t,I,!0,_)&&Q,Q=rr(_t,I,!1,_)&&Q,w)for(nt=0;nt<w.length;nt++)_t=_.g=w[nt],Q=rr(_t,I,!1,_)&&Q}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var f=this.i,_;for(_ in f.g){for(var w=f.g[_],I=0;I<w.length;I++)Sr(w[I]);delete f.g[_],f.h--}}this.F=null},ze.prototype.K=function(f,_,w,I){return this.i.add(String(f),_,!1,w,I)},ze.prototype.L=function(f,_,w,I){return this.i.add(String(f),_,!0,w,I)};function rr(f,_,w,I){if(_=f.i.g[String(_)],!_)return!0;_=_.concat();for(var Q=!0,nt=0;nt<_.length;++nt){var _t=_[nt];if(_t&&!_t.da&&_t.capture==w){var re=_t.listener,Ke=_t.ha||_t.src;_t.fa&&Hr(f.i,_t),Q=re.call(Ke,I)!==!1&&Q}}return Q&&!I.defaultPrevented}function On(f,_,w){if(typeof f=="function")w&&(f=N(f,w));else if(f&&typeof f.handleEvent=="function")f=N(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:y.setTimeout(f,_||0)}function Xl(f){f.g=On(()=>{f.g=null,f.i&&(f.i=!1,Xl(f))},f.l);const _=f.h;f.h=null,f.m.apply(null,_)}class lc extends yt{constructor(_,w){super(),this.m=_,this.l=w,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:Xl(this)}N(){super.N(),this.g&&(y.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ks(f){yt.call(this),this.h=f,this.g={}}tt(Ks,yt);var ms=[];function Xs(f){Mt(f.g,function(_,w){this.g.hasOwnProperty(w)&&hs(_)},f),f.g={}}Ks.prototype.N=function(){Ks.aa.N.call(this),Xs(this)},Ks.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var $r=y.JSON.stringify,Zs=y.JSON.parse,Js=class{stringify(f){return y.JSON.stringify(f,void 0)}parse(f){return y.JSON.parse(f,void 0)}};function Yo(){}Yo.prototype.h=null;function Ko(f){return f.h||(f.h=f.i())}function ps(){}var hi={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Li(){gt.call(this,"d")}tt(Li,gt);function Xo(){gt.call(this,"c")}tt(Xo,gt);var di={},Zo=null;function gs(){return Zo=Zo||new ze}di.La="serverreachability";function Te(f){gt.call(this,di.La,f)}tt(Te,gt);function pe(f){const _=gs();_e(_,new Te(_))}di.STAT_EVENT="statevent";function Ws(f,_){gt.call(this,di.STAT_EVENT,f),this.stat=_}tt(Ws,gt);function Me(f){const _=gs();_e(_,new Ws(_,f))}di.Ma="timingevent";function nn(f,_){gt.call(this,di.Ma,f),this.size=_}tt(nn,gt);function Ye(f,_){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return y.setTimeout(function(){f()},_)}function Rr(){this.g=!0}Rr.prototype.xa=function(){this.g=!1};function Bi(f,_,w,I,Q,nt){f.info(function(){if(f.g)if(nt)for(var _t="",re=nt.split("&"),Ke=0;Ke<re.length;Ke++){var ie=re[Ke].split("=");if(1<ie.length){var rn=ie[0];ie=ie[1];var Xe=rn.split("_");_t=2<=Xe.length&&Xe[1]=="type"?_t+(rn+"="+ie+"&"):_t+(rn+"=redacted&")}}else _t=null;else _t=nt;return"XMLHTTP REQ ("+I+") [attempt "+Q+"]: "+_+`
`+w+`
`+_t})}function ta(f,_,w,I,Q,nt,_t){f.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+Q+"]: "+_+`
`+w+`
`+nt+" "+_t})}function ys(f,_,w,I){f.info(function(){return"XMLHTTP TEXT ("+_+"): "+ea(f,w)+(I?" "+I:"")})}function mi(f,_){f.info(function(){return"TIMEOUT: "+_})}Rr.prototype.info=function(){};function ea(f,_){if(!f.g)return _;if(!_)return null;try{var w=JSON.parse(_);if(w){for(f=0;f<w.length;f++)if(Array.isArray(w[f])){var I=w[f];if(!(2>I.length)){var Q=I[1];if(Array.isArray(Q)&&!(1>Q.length)){var nt=Q[0];if(nt!="noop"&&nt!="stop"&&nt!="close")for(var _t=1;_t<Q.length;_t++)Q[_t]=""}}}}return $r(w)}catch{return _}}var Fn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Nn={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ht;function D(){}tt(D,Yo),D.prototype.g=function(){return new XMLHttpRequest},D.prototype.i=function(){return{}},ht=new D;function Lt(f,_,w,I){this.j=f,this.i=_,this.l=w,this.R=I||1,this.U=new Ks(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gt}function Gt(){this.i=null,this.g="",this.h=!1}var $t={},gr={};function Ir(f,_,w){f.L=1,f.v=aa($n(_)),f.m=w,f.P=!0,Cr(f,null)}function Cr(f,_){f.F=Date.now(),na(f),f.A=$n(f.v);var w=f.A,I=f.R;Array.isArray(I)||(I=[String(I)]),la(w.i,"t",I),f.C=0,w=f.j.J,f.h=new Gt,f.g=Ti(f.j,w?_:null,!f.m),0<f.O&&(f.M=new lc(N(f.Y,f,f.g),f.O)),_=f.U,w=f.g,I=f.ca;var Q="readystatechange";Array.isArray(Q)||(Q&&(ms[0]=Q.toString()),Q=ms);for(var nt=0;nt<Q.length;nt++){var _t=Ga(w,Q[nt],I||_.handleEvent,!1,_.h||_);if(!_t)break;_.g[_t.key]=_t}_=f.H?O(f.H):{},f.m?(f.u||(f.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,_)):(f.u="GET",f.g.ea(f.A,f.u,null,_)),pe(),Bi(f.i,f.u,f.A,f.l,f.R,f.m)}Lt.prototype.ca=function(f){f=f.target;const _=this.M;_&&Er(f)==3?_.j():this.Y(f)},Lt.prototype.Y=function(f){try{if(f==this.g)t:{const Xe=Er(this.g);var _=this.g.Ba();const wi=this.g.Z();if(!(3>Xe)&&(Xe!=3||this.g&&(this.h.h||this.g.oa()||il(this.g)))){this.J||Xe!=4||_==7||(_==8||0>=wi?pe(3):pe(2)),Gr(this);var w=this.g.Z();this.X=w;e:if(mn(this)){var I=il(this.g);f="";var Q=I.length,nt=Er(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){bn(this),Qr(this);var _t="";break e}this.h.i=new y.TextDecoder}for(_=0;_<Q;_++)this.h.h=!0,f+=this.h.i.decode(I[_],{stream:!(nt&&_==Q-1)});I.length=0,this.h.g+=f,this.C=0,_t=this.h.g}else _t=this.g.oa();if(this.o=w==200,ta(this.i,this.u,this.A,this.l,this.R,Xe,w),this.o){if(this.T&&!this.K){e:{if(this.g){var re,Ke=this.g;if((re=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pt(re)){var ie=re;break e}}ie=null}if(w=ie)ys(this.i,this.l,w,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ra(this,w);else{this.o=!1,this.s=3,Me(12),bn(this),Qr(this);break t}}if(this.P){w=!0;let sn;for(;!this.J&&this.C<_t.length;)if(sn=ir(this,_t),sn==gr){Xe==4&&(this.s=4,Me(14),w=!1),ys(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==$t){this.s=4,Me(15),ys(this.i,this.l,_t,"[Invalid Chunk]"),w=!1;break}else ys(this.i,this.l,sn,null),ra(this,sn);if(mn(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xe!=4||_t.length!=0||this.h.h||(this.s=1,Me(16),w=!1),this.o=this.o&&w,!w)ys(this.i,this.l,_t,"[Invalid Chunked Response]"),bn(this),Qr(this);else if(0<_t.length&&!this.W){this.W=!0;var rn=this.j;rn.g==this&&rn.ba&&!rn.M&&(rn.j.info("Great, no buffering proxy detected. Bytes received: "+_t.length),Or(rn),rn.M=!0,Me(11))}}else ys(this.i,this.l,_t,null),ra(this,_t);Xe==4&&bn(this),this.o&&!this.J&&(Xe==4?ru(this.j,this):(this.o=!1,na(this)))}else Jl(this.g),w==400&&0<_t.indexOf("Unknown SID")?(this.s=3,Me(12)):(this.s=0,Me(13)),bn(this),Qr(this)}}}catch{}finally{}};function mn(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function ir(f,_){var w=f.C,I=_.indexOf(`
`,w);return I==-1?gr:(w=Number(_.substring(w,I)),isNaN(w)?$t:(I+=1,I+w>_.length?gr:(_=_.slice(I,I+w),f.C=I+w,_)))}Lt.prototype.cancel=function(){this.J=!0,bn(this)};function na(f){f.S=Date.now()+f.I,Jo(f,f.I)}function Jo(f,_){if(f.B!=null)throw Error("WatchDog timer not null");f.B=Ye(N(f.ba,f),_)}function Gr(f){f.B&&(y.clearTimeout(f.B),f.B=null)}Lt.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(mi(this.i,this.A),this.L!=2&&(pe(),Me(17)),bn(this),this.s=2,Qr(this)):Jo(this,this.S-f)};function Qr(f){f.j.G==0||f.J||ru(f.j,f)}function bn(f){Gr(f);var _=f.M;_&&typeof _.ma=="function"&&_.ma(),f.M=null,Xs(f.U),f.g&&(_=f.g,f.g=null,_.abort(),_.ma())}function ra(f,_){try{var w=f.j;if(w.G!=0&&(w.g==f||pi(w.h,f))){if(!f.K&&pi(w.h,f)&&w.G==3){try{var I=w.Da.g.parse(_)}catch{I=null}if(Array.isArray(I)&&I.length==3){var Q=I;if(Q[0]==0){t:if(!w.u){if(w.g)if(w.g.F+3e3<f.F)Xa(w),ma(w);else break t;Ae(w),Me(18)}}else w.za=Q[1],0<w.za-w.T&&37500>Q[2]&&w.F&&w.v==0&&!w.C&&(w.C=Ye(N(w.Za,w),6e3));if(1>=ji(w.h)&&w.ca){try{w.ca()}catch{}w.ca=void 0}}else Qt(w,11)}else if((f.K||w.g==f)&&Xa(w),!pt(_))for(Q=w.Da.g.parse(_),_=0;_<Q.length;_++){let ie=Q[_];if(w.T=ie[0],ie=ie[1],w.G==2)if(ie[0]=="c"){w.K=ie[1],w.ia=ie[2];const rn=ie[3];rn!=null&&(w.la=rn,w.j.info("VER="+w.la));const Xe=ie[4];Xe!=null&&(w.Aa=Xe,w.j.info("SVER="+w.Aa));const wi=ie[5];wi!=null&&typeof wi=="number"&&0<wi&&(I=1.5*wi,w.L=I,w.j.info("backChannelRequestTimeoutMs_="+I)),I=w;const sn=f.g;if(sn){const Nr=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nr){var nt=I.h;nt.g||Nr.indexOf("spdy")==-1&&Nr.indexOf("quic")==-1&&Nr.indexOf("h2")==-1||(nt.j=nt.l,nt.g=new Set,nt.h&&(gi(nt,nt.h),nt.h=null))}if(I.D){const _a=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;_a&&(I.ya=_a,be(I.I,I.D,_a))}}w.G=3,w.l&&w.l.ua(),w.ba&&(w.R=Date.now()-f.F,w.j.info("Handshake RTT: "+w.R+"ms")),I=w;var _t=f;if(I.qa=Ve(I,I.J?I.ia:null,I.W),_t.K){Mn(I.h,_t);var re=_t,Ke=I.L;Ke&&(re.I=Ke),re.B&&(Gr(re),na(re)),I.g=_t}else eu(I);0<w.i.length&&pa(w)}else ie[0]!="stop"&&ie[0]!="close"||Qt(w,7);else w.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?Qt(w,7):da(w):ie[0]!="noop"&&w.l&&w.l.ta(ie),w.v=0)}}pe(4)}catch{}}var Wo=class{constructor(f,_){this.g=f,this.map=_}};function yr(f){this.l=f||10,y.PerformanceNavigationTiming?(f=y.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(y.chrome&&y.chrome.loadTimes&&y.chrome.loadTimes()&&y.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ia(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function ji(f){return f.h?1:f.g?f.g.size:0}function pi(f,_){return f.h?f.h==_:f.g?f.g.has(_):!1}function gi(f,_){f.g?f.g.add(_):f.h=_}function Mn(f,_){f.h&&f.h==_?f.h=null:f.g&&f.g.has(_)&&f.g.delete(_)}yr.prototype.cancel=function(){if(this.i=zi(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function zi(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let _=f.i;for(const w of f.g.values())_=_.concat(w.D);return _}return Z(f.i)}function uc(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(E(f)){for(var _=[],w=f.length,I=0;I<w;I++)_.push(f[I]);return _}_=[],w=0;for(I in f)_[w++]=f[I];return _}function sa(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(E(f)||typeof f=="string"){var _=[];f=f.length;for(var w=0;w<f;w++)_.push(w);return _}_=[],w=0;for(const I in f)_[w++]=I;return _}}}function Qa(f,_){if(f.forEach&&typeof f.forEach=="function")f.forEach(_,void 0);else if(E(f)||typeof f=="string")Array.prototype.forEach.call(f,_,void 0);else for(var w=sa(f),I=uc(f),Q=I.length,nt=0;nt<Q;nt++)_.call(void 0,I[nt],w&&w[nt],f)}var pn=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Zl(f,_){if(f){f=f.split("&");for(var w=0;w<f.length;w++){var I=f[w].indexOf("="),Q=null;if(0<=I){var nt=f[w].substring(0,I);Q=f[w].substring(I+1)}else nt=f[w];_(nt,Q?decodeURIComponent(Q.replace(/\+/g," ")):"")}}}function we(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof we){this.h=f.h,qi(this,f.j),this.o=f.o,this.g=f.g,Yr(this,f.s),this.l=f.l;var _=f.i,w=new _i;w.i=_.i,_.g&&(w.g=new Map(_.g),w.h=_.h),Hi(this,w),this.m=f.m}else f&&(_=String(f).match(pn))?(this.h=!1,qi(this,_[1]||"",!0),this.o=Vn(_[2]||""),this.g=Vn(_[3]||"",!0),Yr(this,_[4]),this.l=Vn(_[5]||"",!0),Hi(this,_[6]||"",!0),this.m=Vn(_[7]||"")):(this.h=!1,this.i=new _i(null,this.h))}we.prototype.toString=function(){var f=[],_=this.j;_&&f.push(_s(_,Kr,!0),":");var w=this.g;return(w||_=="file")&&(f.push("//"),(_=this.o)&&f.push(_s(_,Kr,!0),"@"),f.push(encodeURIComponent(String(w)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.s,w!=null&&f.push(":",String(w))),(w=this.l)&&(this.g&&w.charAt(0)!="/"&&f.push("/"),f.push(_s(w,w.charAt(0)=="/"?cc:oa,!0))),(w=this.i.toString())&&f.push("?",w),(w=this.m)&&f.push("#",_s(w,Ya)),f.join("")};function $n(f){return new we(f)}function qi(f,_,w){f.j=w?Vn(_,!0):_,f.j&&(f.j=f.j.replace(/:$/,""))}function Yr(f,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);f.s=_}else f.s=null}function Hi(f,_,w){_ instanceof _i?(f.i=_,el(f.i,f.h)):(w||(_=_s(_,yi)),f.i=new _i(_,f.h))}function be(f,_,w){f.i.set(_,w)}function aa(f){return be(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Vn(f,_){return f?_?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function _s(f,_,w){return typeof f=="string"?(f=encodeURI(f).replace(_,tl),w&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function tl(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Kr=/[#\/\?@]/g,oa=/[#\?:]/g,cc=/[#\?]/g,yi=/[#\?@]/g,Ya=/#/g;function _i(f,_){this.h=this.g=null,this.i=f||null,this.j=!!_}function _r(f){f.g||(f.g=new Map,f.h=0,f.i&&Zl(f.i,function(_,w){f.add(decodeURIComponent(_.replace(/\+/g," ")),w)}))}s=_i.prototype,s.add=function(f,_){_r(this),this.i=null,f=vr(this,f);var w=this.g.get(f);return w||this.g.set(f,w=[]),w.push(_),this.h+=1,this};function Fi(f,_){_r(f),_=vr(f,_),f.g.has(_)&&(f.i=null,f.h-=f.g.get(_).length,f.g.delete(_))}function Xr(f,_){return _r(f),_=vr(f,_),f.g.has(_)}s.forEach=function(f,_){_r(this),this.g.forEach(function(w,I){w.forEach(function(Q){f.call(_,Q,I,this)},this)},this)},s.na=function(){_r(this);const f=Array.from(this.g.values()),_=Array.from(this.g.keys()),w=[];for(let I=0;I<_.length;I++){const Q=f[I];for(let nt=0;nt<Q.length;nt++)w.push(_[I])}return w},s.V=function(f){_r(this);let _=[];if(typeof f=="string")Xr(this,f)&&(_=_.concat(this.g.get(vr(this,f))));else{f=Array.from(this.g.values());for(let w=0;w<f.length;w++)_=_.concat(f[w])}return _},s.set=function(f,_){return _r(this),this.i=null,f=vr(this,f),Xr(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[_]),this.h+=1,this},s.get=function(f,_){return f?(f=this.V(f),0<f.length?String(f[0]):_):_};function la(f,_,w){Fi(f,_),0<w.length&&(f.i=null,f.g.set(vr(f,_),Z(w)),f.h+=w.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],_=Array.from(this.g.keys());for(var w=0;w<_.length;w++){var I=_[w];const nt=encodeURIComponent(String(I)),_t=this.V(I);for(I=0;I<_t.length;I++){var Q=nt;_t[I]!==""&&(Q+="="+encodeURIComponent(String(_t[I]))),f.push(Q)}}return this.i=f.join("&")};function vr(f,_){return _=String(_),f.j&&(_=_.toLowerCase()),_}function el(f,_){_&&!f.j&&(_r(f),f.i=null,f.g.forEach(function(w,I){var Q=I.toLowerCase();I!=Q&&(Fi(this,I),la(this,Q,w))},f)),f.j=_}function $i(f,_){const w=new Rr;if(y.Image){const I=new Image;I.onload=V(ke,w,"TestLoadImage: loaded",!0,_,I),I.onerror=V(ke,w,"TestLoadImage: error",!1,_,I),I.onabort=V(ke,w,"TestLoadImage: abort",!1,_,I),I.ontimeout=V(ke,w,"TestLoadImage: timeout",!1,_,I),y.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=f}else _(!1)}function xr(f,_){const w=new Rr,I=new AbortController,Q=setTimeout(()=>{I.abort(),ke(w,"TestPingServer: timeout",!1,_)},1e4);fetch(f,{signal:I.signal}).then(nt=>{clearTimeout(Q),nt.ok?ke(w,"TestPingServer: ok",!0,_):ke(w,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(Q),ke(w,"TestPingServer: error",!1,_)})}function ke(f,_,w,I,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),I(w)}catch{}}function Gi(){this.g=new Js}function Zr(f,_,w){const I=w||"";try{Qa(f,function(Q,nt){let _t=Q;T(Q)&&(_t=$r(Q)),_.push(I+nt+"="+encodeURIComponent(_t))})}catch(Q){throw _.push(I+"type="+encodeURIComponent("_badmap")),Q}}function Qi(f){this.l=f.Ub||null,this.j=f.eb||!1}tt(Qi,Yo),Qi.prototype.g=function(){return new Dr(this.l,this.j)},Qi.prototype.i=(function(f){return function(){return f}})({});function Dr(f,_){ze.call(this),this.D=f,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}tt(Dr,ze),s=Dr.prototype,s.open=function(f,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=_,this.readyState=1,Wr(this)},s.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(_.body=f),(this.D||y).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Jr(this)),this.readyState=0},s.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Wr(this)),this.g&&(this.readyState=3,Wr(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof y.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ka(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ka(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}s.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var _=f.value?f.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!f.done}))&&(this.response=this.responseText+=_)}f.done?Jr(this):Wr(this),this.readyState==3&&Ka(this)}},s.Ra=function(f){this.g&&(this.response=this.responseText=f,Jr(this))},s.Qa=function(f){this.g&&(this.response=f,Jr(this))},s.ga=function(){this.g&&Jr(this)};function Jr(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Wr(f)}s.setRequestHeader=function(f,_){this.u.append(f,_)},s.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],_=this.h.entries();for(var w=_.next();!w.done;)w=w.value,f.push(w[0]+": "+w[1]),w=_.next();return f.join(`\r
`)};function Wr(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(Dr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function nl(f){let _="";return Mt(f,function(w,I){_+=I,_+=":",_+=w,_+=`\r
`}),_}function Fe(f,_,w){t:{for(I in w){var I=!1;break t}I=!0}I||(w=nl(w),typeof f=="string"?w!=null&&encodeURIComponent(String(w)):be(f,_,w))}function ue(f){ze.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}tt(ue,ze);var ua=/^https?$/i,vs=["POST","PUT"];s=ue.prototype,s.Ha=function(f){this.J=f},s.ea=function(f,_,w,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);_=_?_.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ht.g(),this.v=this.o?Ko(this.o):Ko(ht),this.g.onreadystatechange=N(this.Ea,this);try{this.B=!0,this.g.open(_,String(f),!0),this.B=!1}catch(nt){rl(this,nt);return}if(f=w||"",w=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var Q in I)w.set(Q,I[Q]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const nt of I.keys())w.set(nt,I.get(nt));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(w.keys()).find(nt=>nt.toLowerCase()=="content-type"),Q=y.FormData&&f instanceof y.FormData,!(0<=Array.prototype.indexOf.call(vs,_,void 0))||I||Q||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[nt,_t]of w)this.g.setRequestHeader(nt,_t);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Es(this),this.u=!0,this.g.send(f),this.u=!1}catch(nt){rl(this,nt)}};function rl(f,_){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=_,f.m=5,ca(f),ti(f)}function ca(f){f.A||(f.A=!0,_e(f,"complete"),_e(f,"error"))}s.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,_e(this,"complete"),_e(this,"abort"),ti(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),ue.aa.N.call(this)},s.Ea=function(){this.s||(this.B||this.u||this.j?fa(this):this.bb())},s.bb=function(){fa(this)};function fa(f){if(f.h&&typeof m<"u"&&(!f.v[1]||Er(f)!=4||f.Z()!=2)){if(f.u&&Er(f)==4)On(f.Ea,0,f);else if(_e(f,"readystatechange"),Er(f)==4){f.h=!1;try{const _t=f.Z();t:switch(_t){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break t;default:_=!1}var w;if(!(w=_)){var I;if(I=_t===0){var Q=String(f.D).match(pn)[1]||null;!Q&&y.self&&y.self.location&&(Q=y.self.location.protocol.slice(0,-1)),I=!ua.test(Q?Q.toLowerCase():"")}w=I}if(w)_e(f,"complete"),_e(f,"success");else{f.m=6;try{var nt=2<Er(f)?f.g.statusText:""}catch{nt=""}f.l=nt+" ["+f.Z()+"]",ca(f)}}finally{ti(f)}}}}function ti(f,_){if(f.g){Es(f);const w=f.g,I=f.v[0]?()=>{}:null;f.g=null,f.v=null,_||_e(f,"ready");try{w.onreadystatechange=I}catch{}}}function Es(f){f.I&&(y.clearTimeout(f.I),f.I=null)}s.isActive=function(){return!!this.g};function Er(f){return f.g?f.g.readyState:0}s.Z=function(){try{return 2<Er(this)?this.g.status:-1}catch{return-1}},s.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.Oa=function(f){if(this.g){var _=this.g.responseText;return f&&_.indexOf(f)==0&&(_=_.substring(f.length)),Zs(_)}};function il(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Jl(f){const _={};f=(f.g&&2<=Er(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<f.length;I++){if(pt(f[I]))continue;var w=L(f[I]);const Q=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const nt=_[Q]||[];_[Q]=nt,nt.push(w)}z(_,function(I){return I.join(", ")})}s.Ba=function(){return this.m},s.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ts(f,_,w){return w&&w.internalChannelParams&&w.internalChannelParams[f]||_}function ha(f){this.Aa=0,this.i=[],this.j=new Rr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ts("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ts("baseRetryDelayMs",5e3,f),this.cb=Ts("retryDelaySeedMs",1e4,f),this.Wa=Ts("forwardChannelMaxRetries",2,f),this.wa=Ts("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new yr(f&&f.concurrentRequestLimit),this.Da=new Gi,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}s=ha.prototype,s.la=8,s.G=1,s.connect=function(f,_,w,I){Me(0),this.W=f,this.H=_||{},w&&I!==void 0&&(this.H.OSID=w,this.H.OAID=I),this.F=this.X,this.I=Ve(this,null,this.W),pa(this)};function da(f){if(Wl(f),f.G==3){var _=f.U++,w=$n(f.I);if(be(w,"SID",f.K),be(w,"RID",_),be(w,"TYPE","terminate"),ga(f,w),_=new Lt(f,f.j,_),_.L=2,_.v=aa($n(w)),w=!1,y.navigator&&y.navigator.sendBeacon)try{w=y.navigator.sendBeacon(_.v.toString(),"")}catch{}!w&&y.Image&&(new Image().src=_.v,w=!0),w||(_.g=Ti(_.j,null),_.g.ea(_.v)),_.F=Date.now(),na(_)}Za(f)}function ma(f){f.g&&(Or(f),f.g.cancel(),f.g=null)}function Wl(f){ma(f),f.u&&(y.clearTimeout(f.u),f.u=null),Xa(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&y.clearTimeout(f.s),f.s=null)}function pa(f){if(!ia(f.h)&&!f.s){f.s=!0;var _=f.Ga;Tt||q(),Ot||(Tt(),Ot=!0),ce.add(_,f),f.B=0}}function vi(f,_){return ji(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=_.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=Ye(N(f.Ga,f,_),Ei(f,f.B)),f.B++,!0)}s.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const Q=new Lt(this,this.j,f);let nt=this.o;if(this.S&&(nt?(nt=O(nt),B(nt,this.S)):nt=this.S),this.m!==null||this.O||(Q.H=nt,nt=null),this.P)t:{for(var _=0,w=0;w<this.i.length;w++){e:{var I=this.i[w];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break e}I=void 0}if(I===void 0)break;if(_+=I,4096<_){_=w;break t}if(_===4096||w===this.i.length-1){_=w+1;break t}}_=1e3}else _=1e3;_=tu(this,Q,_),w=$n(this.I),be(w,"RID",f),be(w,"CVER",22),this.D&&be(w,"X-HTTP-Session-Id",this.D),ga(this,w),nt&&(this.O?_="headers="+encodeURIComponent(String(nl(nt)))+"&"+_:this.m&&Fe(w,this.m,nt)),gi(this.h,Q),this.Ua&&be(w,"TYPE","init"),this.P?(be(w,"$req",_),be(w,"SID","null"),Q.T=!0,Ir(Q,w,null)):Ir(Q,w,_),this.G=2}}else this.G==3&&(f?sl(this,f):this.i.length==0||ia(this.h)||sl(this))};function sl(f,_){var w;_?w=_.l:w=f.U++;const I=$n(f.I);be(I,"SID",f.K),be(I,"RID",w),be(I,"AID",f.T),ga(f,I),f.m&&f.o&&Fe(I,f.m,f.o),w=new Lt(f,f.j,w,f.B+1),f.m===null&&(w.H=f.o),_&&(f.i=_.D.concat(f.i)),_=tu(f,w,1e3),w.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),gi(f.h,w),Ir(w,I,_)}function ga(f,_){f.H&&Mt(f.H,function(w,I){be(_,I,w)}),f.l&&Qa({},function(w,I){be(_,I,w)})}function tu(f,_,w){w=Math.min(f.i.length,w);var I=f.l?N(f.l.Na,f.l,f):null;t:{var Q=f.i;let nt=-1;for(;;){const _t=["count="+w];nt==-1?0<w?(nt=Q[0].g,_t.push("ofs="+nt)):nt=0:_t.push("ofs="+nt);let re=!0;for(let Ke=0;Ke<w;Ke++){let ie=Q[Ke].g;const rn=Q[Ke].map;if(ie-=nt,0>ie)nt=Math.max(0,Q[Ke].g-100),re=!1;else try{Zr(rn,_t,"req"+ie+"_")}catch{I&&I(rn)}}if(re){I=_t.join("&");break t}}}return f=f.i.splice(0,w),_.D=f,I}function eu(f){if(!f.g&&!f.u){f.Y=1;var _=f.Fa;Tt||q(),Ot||(Tt(),Ot=!0),ce.add(_,f),f.v=0}}function Ae(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=Ye(N(f.Fa,f),Ei(f,f.v)),f.v++,!0)}s.Fa=function(){if(this.u=null,nu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=Ye(N(this.ab,this),f)}},s.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Me(10),ma(this),nu(this))};function Or(f){f.A!=null&&(y.clearTimeout(f.A),f.A=null)}function nu(f){f.g=new Lt(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var _=$n(f.qa);be(_,"RID","rpc"),be(_,"SID",f.K),be(_,"AID",f.T),be(_,"CI",f.F?"0":"1"),!f.F&&f.ja&&be(_,"TO",f.ja),be(_,"TYPE","xmlhttp"),ga(f,_),f.m&&f.o&&Fe(_,f.m,f.o),f.L&&(f.g.I=f.L);var w=f.g;f=f.ia,w.L=1,w.v=aa($n(_)),w.m=null,w.P=!0,Cr(w,f)}s.Za=function(){this.C!=null&&(this.C=null,ma(this),Ae(this),Me(19))};function Xa(f){f.C!=null&&(y.clearTimeout(f.C),f.C=null)}function ru(f,_){var w=null;if(f.g==_){Xa(f),Or(f),f.g=null;var I=2}else if(pi(f.h,_))w=_.D,Mn(f.h,_),I=1;else return;if(f.G!=0){if(_.o)if(I==1){w=_.m?_.m.length:0,_=Date.now()-_.F;var Q=f.B;I=gs(),_e(I,new nn(I,w)),pa(f)}else eu(f);else if(Q=_.s,Q==3||Q==0&&0<_.X||!(I==1&&vi(f,_)||I==2&&Ae(f)))switch(w&&0<w.length&&(_=f.h,_.i=_.i.concat(w)),Q){case 1:Qt(f,5);break;case 4:Qt(f,10);break;case 3:Qt(f,6);break;default:Qt(f,2)}}}function Ei(f,_){let w=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(w*=2),w*_}function Qt(f,_){if(f.j.info("Error code "+_),_==2){var w=N(f.fb,f),I=f.Xa;const Q=!I;I=new we(I||"//www.google.com/images/cleardot.gif"),y.location&&y.location.protocol=="http"||qi(I,"https"),aa(I),Q?$i(I.toString(),w):xr(I.toString(),w)}else Me(2);f.G=0,f.l&&f.l.sa(_),Za(f),Wl(f)}s.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Me(2)):(this.j.info("Failed to ping google.com"),Me(1))};function Za(f){if(f.G=0,f.ka=[],f.l){const _=zi(f.h);(_.length!=0||f.i.length!=0)&&(ot(f.ka,_),ot(f.ka,f.i),f.h.i.length=0,Z(f.i),f.i.length=0),f.l.ra()}}function Ve(f,_,w){var I=w instanceof we?$n(w):new we(w);if(I.g!="")_&&(I.g=_+"."+I.g),Yr(I,I.s);else{var Q=y.location;I=Q.protocol,_=_?_+"."+Q.hostname:Q.hostname,Q=+Q.port;var nt=new we(null);I&&qi(nt,I),_&&(nt.g=_),Q&&Yr(nt,Q),w&&(nt.l=w),I=nt}return w=f.D,_=f.ya,w&&_&&be(I,w,_),be(I,"VER",f.la),ga(f,I),I}function Ti(f,_,w){if(_&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=f.Ca&&!f.pa?new ue(new Qi({eb:w})):new ue(f.pa),_.Ha(f.J),_}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function al(){}s=al.prototype,s.ua=function(){},s.ta=function(){},s.sa=function(){},s.ra=function(){},s.isActive=function(){return!0},s.Na=function(){};function ya(){}ya.prototype.g=function(f,_){return new Pn(f,_)};function Pn(f,_){ze.call(this),this.g=new ha(_),this.l=f,this.h=_&&_.messageUrlParams||null,f=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(f?f["X-WebChannel-Content-Type"]=_.messageContentType:f={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(f?f["X-WebChannel-Client-Profile"]=_.va:f={"X-WebChannel-Client-Profile":_.va}),this.g.S=f,(f=_&&_.Sb)&&!pt(f)&&(this.g.m=f),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!pt(_)&&(this.g.D=_,f=this.h,f!==null&&_ in f&&(f=this.h,_ in f&&delete f[_])),this.j=new An(this)}tt(Pn,ze),Pn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pn.prototype.close=function(){da(this.g)},Pn.prototype.o=function(f){var _=this.g;if(typeof f=="string"){var w={};w.__data__=f,f=w}else this.u&&(w={},w.__data__=$r(f),f=w);_.i.push(new Wo(_.Ya++,f)),_.G==3&&pa(_)},Pn.prototype.N=function(){this.g.l=null,delete this.j,da(this.g),delete this.g,Pn.aa.N.call(this)};function ol(f){Li.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var _=f.__sm__;if(_){t:{for(const w in _){f=w;break t}f=void 0}(this.i=f)&&(f=this.i,_=_!==null&&f in _?_[f]:void 0),this.data=_}else this.data=f}tt(ol,Li);function ws(){Xo.call(this),this.status=1}tt(ws,Xo);function An(f){this.g=f}tt(An,al),An.prototype.ua=function(){_e(this.g,"a")},An.prototype.ta=function(f){_e(this.g,new ol(f))},An.prototype.sa=function(f){_e(this.g,new ws)},An.prototype.ra=function(){_e(this.g,"b")},ya.prototype.createWebChannel=ya.prototype.g,Pn.prototype.send=Pn.prototype.o,Pn.prototype.open=Pn.prototype.m,Pn.prototype.close=Pn.prototype.close,QT=function(){return new ya},GT=function(){return gs()},$T=di,ng={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Fn.NO_ERROR=0,Fn.TIMEOUT=8,Fn.HTTP_ERROR=6,rd=Fn,Nn.COMPLETE="complete",FT=Nn,ps.EventType=hi,hi.OPEN="a",hi.CLOSE="b",hi.ERROR="c",hi.MESSAGE="d",ze.prototype.listen=ze.prototype.K,sf=ps,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,HT=ue}).apply(typeof $h<"u"?$h:typeof self<"u"?self:typeof window<"u"?window:{});const L0="@firebase/firestore",B0="4.9.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}mr.UNAUTHENTICATED=new mr(null),mr.GOOGLE_CREDENTIALS=new mr("google-credentials-uid"),mr.FIRST_PARTY=new mr("first-party-uid"),mr.MOCK_USER=new mr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rc="12.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl=new Hg("@firebase/firestore");function ju(){return Bl.logLevel}function St(s,...t){if(Bl.logLevel<=me.DEBUG){const n=t.map(Gg);Bl.debug(`Firestore (${rc}): ${s}`,...n)}}function Fa(s,...t){if(Bl.logLevel<=me.ERROR){const n=t.map(Gg);Bl.error(`Firestore (${rc}): ${s}`,...n)}}function Xu(s,...t){if(Bl.logLevel<=me.WARN){const n=t.map(Gg);Bl.warn(`Firestore (${rc}): ${s}`,...n)}}function Gg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zt(s,t,n){let i="Unexpected state";typeof t=="string"?i=t:n=t,YT(s,i,n)}function YT(s,t,n){let i=`FIRESTORE (${rc}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(n!==void 0)try{i+=" CONTEXT: "+JSON.stringify(n)}catch{i+=" CONTEXT: "+n}throw Fa(i),new Error(i)}function Re(s,t,n,i){let o="Unexpected state";typeof n=="string"?o=n:i=n,s||YT(t,o,i)}function Xt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Rt extends Fo{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class b2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(mr.UNAUTHENTICATED)))}shutdown(){}}class A2{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class S2{constructor(t){this.t=t,this.currentUser=mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Re(this.o===void 0,42304);let i=this.i;const o=E=>this.i!==i?(i=this.i,n(E)):Promise.resolve();let u=new Vo;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new Vo,t.enqueueRetryable((()=>o(this.currentUser)))};const m=()=>{const E=u;t.enqueueRetryable((async()=>{await E.promise,await o(this.currentUser)}))},y=E=>{St("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=E,this.o&&(this.auth.addAuthTokenListener(this.o),m())};this.t.onInit((E=>y(E))),setTimeout((()=>{if(!this.auth){const E=this.t.getImmediate({optional:!0});E?y(E):(St("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new Vo)}}),0),m()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((i=>this.i!==t?(St("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Re(typeof i.accessToken=="string",31837,{l:i}),new KT(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Re(t===null||typeof t=="string",2055,{h:t}),new mr(t)}}class R2{constructor(t,n,i){this.P=t,this.T=n,this.I=i,this.type="FirstParty",this.user=mr.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class I2{constructor(t,n,i){this.P=t,this.T=n,this.I=i}getToken(){return Promise.resolve(new R2(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(mr.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class j0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class C2{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,a2(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Re(this.o===void 0,3512);const i=u=>{u.error!=null&&St("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const m=u.token!==this.m;return this.m=u.token,St("FirebaseAppCheckTokenProvider",`Received ${m?"new":"existing"} token.`),m?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>i(u)))};const o=u=>{St("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):St("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new j0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(Re(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new j0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let i=0;i<s;i++)n[i]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const o=x2(40);for(let u=0;u<o.length;++u)i.length<20&&o[u]<n&&(i+=t.charAt(o[u]%62))}return i}}function oe(s,t){return s<t?-1:s>t?1:0}function rg(s,t){const n=Math.min(s.length,t.length);for(let i=0;i<n;i++){const o=s.charAt(i),u=t.charAt(i);if(o!==u)return Dp(o)===Dp(u)?oe(o,u):Dp(o)?1:-1}return oe(s.length,t.length)}const D2=55296,O2=57343;function Dp(s){const t=s.charCodeAt(0);return t>=D2&&t<=O2}function Zu(s,t,n){return s.length===t.length&&s.every(((i,o)=>n(i,t[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z0="__name__";class ks{constructor(t,n,i){n===void 0?n=0:n>t.length&&zt(637,{offset:n,range:t.length}),i===void 0?i=t.length-n:i>t.length-n&&zt(1746,{length:i,range:t.length-n}),this.segments=t,this.offset=n,this.len=i}get length(){return this.len}isEqual(t){return ks.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ks?t.forEach((i=>{n.push(i)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,i=this.limit();n<i;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const i=Math.min(t.length,n.length);for(let o=0;o<i;o++){const u=ks.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return oe(t.length,n.length)}static compareSegments(t,n){const i=ks.isNumericId(t),o=ks.isNumericId(n);return i&&!o?-1:!i&&o?1:i&&o?ks.extractNumericId(t).compare(ks.extractNumericId(n)):rg(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return Mo.fromString(t.substring(4,t.length-2))}}class Ue extends ks{construct(t,n,i){return new Ue(t,n,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const i of t){if(i.indexOf("//")>=0)throw new Rt(ut.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);n.push(...i.split("/").filter((o=>o.length>0)))}return new Ue(n)}static emptyPath(){return new Ue([])}}const N2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Wn extends ks{construct(t,n,i){return new Wn(t,n,i)}static isValidIdentifier(t){return N2.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Wn.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===z0}static keyField(){return new Wn([z0])}static fromServerFormat(t){const n=[];let i="",o=0;const u=()=>{if(i.length===0)throw new Rt(ut.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(i),i=""};let m=!1;for(;o<t.length;){const y=t[o];if(y==="\\"){if(o+1===t.length)throw new Rt(ut.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const E=t[o+1];if(E!=="\\"&&E!=="."&&E!=="`")throw new Rt(ut.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=E,o+=2}else y==="`"?(m=!m,o++):y!=="."||m?(i+=y,o++):(u(),o++)}if(u(),m)throw new Rt(ut.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Wn(n)}static emptyPath(){return new Wn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t){this.path=t}static fromPath(t){return new Vt(Ue.fromString(t))}static fromName(t){return new Vt(Ue.fromString(t).popFirst(5))}static empty(){return new Vt(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ue.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Ue.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Vt(new Ue(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XT(s,t,n){if(!n)throw new Rt(ut.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function M2(s,t,n,i){if(t===!0&&i===!0)throw new Rt(ut.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function q0(s){if(!Vt.isDocumentKey(s))throw new Rt(ut.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function H0(s){if(Vt.isDocumentKey(s))throw new Rt(ut.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function ZT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Hd(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(i){return i.constructor?i.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":zt(12329,{type:typeof s})}function za(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new Rt(ut.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hd(s);throw new Rt(ut.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(s,t){const n={typeString:s};return t&&(n.value=t),n}function Lf(s,t){if(!ZT(s))throw new Rt(ut.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const o=t[i].typeString,u="value"in t[i]?{value:t[i].value}:void 0;if(!(i in s)){n=`JSON missing required field: '${i}'`;break}const m=s[i];if(o&&typeof m!==o){n=`JSON field '${i}' must be a ${o}.`;break}if(u!==void 0&&m!==u.value){n=`Expected '${i}' field to equal '${u.value}'`;break}}if(n)throw new Rt(ut.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F0=-62135596800,$0=1e6;class Be{static now(){return Be.fromMillis(Date.now())}static fromDate(t){return Be.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),i=Math.floor((t-1e3*n)*$0);return new Be(n,i)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Rt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Rt(ut.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<F0)throw new Rt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Rt(ut.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$0}_compareTo(t){return this.seconds===t.seconds?oe(this.nanoseconds,t.nanoseconds):oe(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Be._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(Lf(t,Be._jsonSchema))return new Be(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-F0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Be._jsonSchemaVersion="firestore/timestamp/1.0",Be._jsonSchema={type:En("string",Be._jsonSchemaVersion),seconds:En("number"),nanoseconds:En("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{static fromTimestamp(t){return new Yt(t)}static min(){return new Yt(new Be(0,0))}static max(){return new Yt(new Be(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=-1;function V2(s,t){const n=s.toTimestamp().seconds,i=s.toTimestamp().nanoseconds+1,o=Yt.fromTimestamp(i===1e9?new Be(n+1,0):new Be(n,i));return new Lo(o,Vt.empty(),t)}function P2(s){return new Lo(s.readTime,s.key,Of)}class Lo{constructor(t,n,i){this.readTime=t,this.documentKey=n,this.largestBatchId=i}static min(){return new Lo(Yt.min(),Vt.empty(),Of)}static max(){return new Lo(Yt.max(),Vt.empty(),Of)}}function U2(s,t){let n=s.readTime.compareTo(t.readTime);return n!==0?n:(n=Vt.comparator(s.documentKey,t.documentKey),n!==0?n:oe(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ic(s){if(s.code!==ut.FAILED_PRECONDITION||s.message!==k2)throw s;St("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&zt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new ft(((i,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(i,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(i,o)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof ft?n:ft.resolve(n)}catch(n){return ft.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):ft.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):ft.reject(n)}static resolve(t){return new ft(((n,i)=>{n(t)}))}static reject(t){return new ft(((n,i)=>{i(t)}))}static waitFor(t){return new ft(((n,i)=>{let o=0,u=0,m=!1;t.forEach((y=>{++o,y.next((()=>{++u,m&&u===o&&n()}),(E=>i(E)))})),m=!0,u===o&&n()}))}static or(t){let n=ft.resolve(!1);for(const i of t)n=n.next((o=>o?ft.resolve(o):i()));return n}static forEach(t,n){const i=[];return t.forEach(((o,u)=>{i.push(n.call(this,o,u))})),this.waitFor(i)}static mapArray(t,n){return new ft(((i,o)=>{const u=t.length,m=new Array(u);let y=0;for(let E=0;E<u;E++){const T=E;n(t[T]).next((S=>{m[T]=S,++y,y===u&&i(m)}),(S=>o(S)))}}))}static doWhile(t,n){return new ft(((i,o)=>{const u=()=>{t()===!0?n().next((()=>{u()}),o):i()};u()}))}}function B2(s){const t=s.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function sc(s){return s.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>n.writeSequenceNumber(i))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}Fd.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=-1;function $d(s){return s==null}function wd(s){return s===0&&1/s==-1/0}function j2(s){return typeof s=="number"&&Number.isInteger(s)&&!wd(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JT="";function z2(s){let t="";for(let n=0;n<s.length;n++)t.length>0&&(t=G0(t)),t=q2(s.get(n),t);return G0(t)}function q2(s,t){let n=t;const i=s.length;for(let o=0;o<i;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case JT:n+="";break;default:n+=u}}return n}function G0(s){return s+JT+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q0(s){let t=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t++;return t}function Fl(s,t){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t(n,s[n])}function WT(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(t,n){this.comparator=t,this.root=n||Jn.EMPTY}insert(t,n){return new Qe(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Jn.BLACK,null,null))}remove(t){return new Qe(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Jn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(i===0)return n.value;i<0?n=n.left:i>0&&(n=n.right)}return null}indexOf(t){let n=0,i=this.root;for(;!i.isEmpty();){const o=this.comparator(t,i.key);if(o===0)return n+i.left.size;o<0?i=i.left:(n+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,i)=>(t(n,i),!1)))}toString(){const t=[];return this.inorderTraversal(((n,i)=>(t.push(`${n}:${i}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Gh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Gh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Gh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Gh(this.root,t,this.comparator,!0)}}class Gh{constructor(t,n,i,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?i(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Jn{constructor(t,n,i,o,u){this.key=t,this.value=n,this.color=i??Jn.RED,this.left=o??Jn.EMPTY,this.right=u??Jn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,i,o,u){return new Jn(t??this.key,n??this.value,i??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,i){let o=this;const u=i(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,i),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,i)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Jn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let i,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return Jn.EMPTY;i=o.right.min(),o=o.copy(i.key,i.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Jn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Jn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw zt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw zt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw zt(27949);return t+(this.isRed()?0:1)}}Jn.EMPTY=null,Jn.RED=!0,Jn.BLACK=!1;Jn.EMPTY=new class{constructor(){this.size=0}get key(){throw zt(57766)}get value(){throw zt(16141)}get color(){throw zt(16727)}get left(){throw zt(29726)}get right(){throw zt(36894)}copy(t,n,i,o,u){return this}insert(t,n,i){return new Jn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xn{constructor(t){this.comparator=t,this.data=new Qe(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,i)=>(t(n),!1)))}forEachInRange(t,n){const i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){const o=i.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let i;for(i=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Y0(this.data.getIterator())}getIteratorFrom(t){return new Y0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((i=>{n=n.add(i)})),n}isEqual(t){if(!(t instanceof xn)||this.size!==t.size)return!1;const n=this.data.getIterator(),i=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new xn(this.comparator);return n.data=t,n}}class Y0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs{constructor(t){this.fields=t,t.sort(Wn.comparator)}static empty(){return new cs([])}unionWith(t){let n=new xn(Wn.comparator);for(const i of this.fields)n=n.add(i);for(const i of t)n=n.add(i);return new cs(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Zu(this.fields,t.fields,((n,i)=>n.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new tw("Invalid base64 string: "+u):u}})(t);return new tr(n)}static fromUint8Array(t){const n=(function(o){let u="";for(let m=0;m<o.length;++m)u+=String.fromCharCode(o[m]);return u})(t);return new tr(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const i=new Uint8Array(n.length);for(let o=0;o<n.length;o++)i[o]=n.charCodeAt(o);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return oe(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}tr.EMPTY_BYTE_STRING=new tr("");const H2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bo(s){if(Re(!!s,39018),typeof s=="string"){let t=0;const n=H2.exec(s);if(Re(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const i=new Date(s);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:hn(s.seconds),nanos:hn(s.nanos)}}function hn(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function jo(s){return typeof s=="string"?tr.fromBase64String(s):tr.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ew="server_timestamp",nw="__type__",rw="__previous_value__",iw="__local_write_time__";function Kg(s){return(s?.mapValue?.fields||{})[nw]?.stringValue===ew}function Gd(s){const t=s.mapValue.fields[rw];return Kg(t)?Gd(t):t}function Nf(s){const t=Bo(s.mapValue.fields[iw].timestampValue);return new Be(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(t,n,i,o,u,m,y,E,T,S){this.databaseId=t,this.appId=n,this.persistenceKey=i,this.host=o,this.ssl=u,this.forceLongPolling=m,this.autoDetectLongPolling=y,this.longPollingOptions=E,this.useFetchStreams=T,this.isUsingEmulator=S}}const ig="(default)";class Mf{constructor(t,n){this.projectId=t,this.database=n||ig}static empty(){return new Mf("","")}get isDefaultDatabase(){return this.database===ig}isEqual(t){return t instanceof Mf&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sw="__type__",$2="__max__",Qh={mapValue:{}},aw="__vector__",bd="value";function zo(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Kg(s)?4:Q2(s)?9007199254740991:G2(s)?10:11:zt(28295,{value:s})}function Gs(s,t){if(s===t)return!0;const n=zo(s);if(n!==zo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return Nf(s).isEqual(Nf(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const m=Bo(o.timestampValue),y=Bo(u.timestampValue);return m.seconds===y.seconds&&m.nanos===y.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return jo(o.bytesValue).isEqual(jo(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return hn(o.geoPointValue.latitude)===hn(u.geoPointValue.latitude)&&hn(o.geoPointValue.longitude)===hn(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return hn(o.integerValue)===hn(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const m=hn(o.doubleValue),y=hn(u.doubleValue);return m===y?wd(m)===wd(y):isNaN(m)&&isNaN(y)}return!1})(s,t);case 9:return Zu(s.arrayValue.values||[],t.arrayValue.values||[],Gs);case 10:case 11:return(function(o,u){const m=o.mapValue.fields||{},y=u.mapValue.fields||{};if(Q0(m)!==Q0(y))return!1;for(const E in m)if(m.hasOwnProperty(E)&&(y[E]===void 0||!Gs(m[E],y[E])))return!1;return!0})(s,t);default:return zt(52216,{left:s})}}function Vf(s,t){return(s.values||[]).find((n=>Gs(n,t)))!==void 0}function Ju(s,t){if(s===t)return 0;const n=zo(s),i=zo(t);if(n!==i)return oe(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(s.booleanValue,t.booleanValue);case 2:return(function(u,m){const y=hn(u.integerValue||u.doubleValue),E=hn(m.integerValue||m.doubleValue);return y<E?-1:y>E?1:y===E?0:isNaN(y)?isNaN(E)?0:-1:1})(s,t);case 3:return K0(s.timestampValue,t.timestampValue);case 4:return K0(Nf(s),Nf(t));case 5:return rg(s.stringValue,t.stringValue);case 6:return(function(u,m){const y=jo(u),E=jo(m);return y.compareTo(E)})(s.bytesValue,t.bytesValue);case 7:return(function(u,m){const y=u.split("/"),E=m.split("/");for(let T=0;T<y.length&&T<E.length;T++){const S=oe(y[T],E[T]);if(S!==0)return S}return oe(y.length,E.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,m){const y=oe(hn(u.latitude),hn(m.latitude));return y!==0?y:oe(hn(u.longitude),hn(m.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return X0(s.arrayValue,t.arrayValue);case 10:return(function(u,m){const y=u.fields||{},E=m.fields||{},T=y[bd]?.arrayValue,S=E[bd]?.arrayValue,x=oe(T?.values?.length||0,S?.values?.length||0);return x!==0?x:X0(T,S)})(s.mapValue,t.mapValue);case 11:return(function(u,m){if(u===Qh.mapValue&&m===Qh.mapValue)return 0;if(u===Qh.mapValue)return 1;if(m===Qh.mapValue)return-1;const y=u.fields||{},E=Object.keys(y),T=m.fields||{},S=Object.keys(T);E.sort(),S.sort();for(let x=0;x<E.length&&x<S.length;++x){const N=rg(E[x],S[x]);if(N!==0)return N;const V=Ju(y[E[x]],T[S[x]]);if(V!==0)return V}return oe(E.length,S.length)})(s.mapValue,t.mapValue);default:throw zt(23264,{he:n})}}function K0(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return oe(s,t);const n=Bo(s),i=Bo(t),o=oe(n.seconds,i.seconds);return o!==0?o:oe(n.nanos,i.nanos)}function X0(s,t){const n=s.values||[],i=t.values||[];for(let o=0;o<n.length&&o<i.length;++o){const u=Ju(n[o],i[o]);if(u)return u}return oe(n.length,i.length)}function Wu(s){return sg(s)}function sg(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const i=Bo(n);return`time(${i.seconds},${i.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return jo(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return Vt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let i="[",o=!0;for(const u of n.values||[])o?o=!1:i+=",",i+=sg(u);return i+"]"})(s.arrayValue):"mapValue"in s?(function(n){const i=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const m of i)u?u=!1:o+=",",o+=`${m}:${sg(n.fields[m])}`;return o+"}"})(s.mapValue):zt(61005,{value:s})}function id(s){switch(zo(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Gd(s);return t?16+id(t):16;case 5:return 2*s.stringValue.length;case 6:return jo(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((o,u)=>o+id(u)),0)})(s.arrayValue);case 10:case 11:return(function(i){let o=0;return Fl(i.fields,((u,m)=>{o+=u.length+id(m)})),o})(s.mapValue);default:throw zt(13486,{value:s})}}function Z0(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function ag(s){return!!s&&"integerValue"in s}function Xg(s){return!!s&&"arrayValue"in s}function J0(s){return!!s&&"nullValue"in s}function W0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function sd(s){return!!s&&"mapValue"in s}function G2(s){return(s?.mapValue?.fields||{})[sw]?.stringValue===aw}function Tf(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return Fl(s.mapValue.fields,((n,i)=>t.mapValue.fields[n]=Tf(i))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Tf(s.arrayValue.values[n]);return t}return{...s}}function Q2(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===$2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(t){this.value=t}static empty(){return new Ni({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let i=0;i<t.length-1;++i)if(n=(n.mapValue.fields||{})[t.get(i)],!sd(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=Tf(n)}setAll(t){let n=Wn.emptyPath(),i={},o=[];t.forEach(((m,y)=>{if(!n.isImmediateParentOf(y)){const E=this.getFieldsMap(n);this.applyChanges(E,i,o),i={},o=[],n=y.popLast()}m?i[y.lastSegment()]=Tf(m):o.push(y.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,i,o)}delete(t){const n=this.field(t.popLast());sd(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Gs(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let i=0;i<t.length;++i){let o=n.mapValue.fields[t.get(i)];sd(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(i)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,i){Fl(n,((o,u)=>t[o]=u));for(const o of i)delete t[o]}clone(){return new Ni(Tf(this.value))}}function ow(s){const t=[];return Fl(s.fields,((n,i)=>{const o=new Wn([n]);if(sd(i)){const u=ow(i.mapValue).fields;if(u.length===0)t.push(o);else for(const m of u)t.push(o.child(m))}else t.push(o)})),new cs(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t,n,i,o,u,m,y){this.key=t,this.documentType=n,this.version=i,this.readTime=o,this.createTime=u,this.data=m,this.documentState=y}static newInvalidDocument(t){return new pr(t,0,Yt.min(),Yt.min(),Yt.min(),Ni.empty(),0)}static newFoundDocument(t,n,i,o){return new pr(t,1,n,Yt.min(),i,o,0)}static newNoDocument(t,n){return new pr(t,2,n,Yt.min(),Yt.min(),Ni.empty(),0)}static newUnknownDocument(t,n){return new pr(t,3,n,Yt.min(),Yt.min(),Ni.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(Yt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Ni.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Ni.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Yt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof pr&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new pr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(t,n){this.position=t,this.inclusive=n}}function tE(s,t,n){let i=0;for(let o=0;o<s.position.length;o++){const u=t[o],m=s.position[o];if(u.field.isKeyField()?i=Vt.comparator(Vt.fromName(m.referenceValue),n.key):i=Ju(m,n.data.field(u.field)),u.dir==="desc"&&(i*=-1),i!==0)break}return i}function eE(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Gs(s.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sd{constructor(t,n="asc"){this.field=t,this.dir=n}}function Y2(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{}class vn extends lw{constructor(t,n,i){super(),this.field=t,this.op=n,this.value=i}static create(t,n,i){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,i):new X2(t,n,i):n==="array-contains"?new W2(t,i):n==="in"?new tI(t,i):n==="not-in"?new eI(t,i):n==="array-contains-any"?new nI(t,i):new vn(t,n,i)}static createKeyFieldInFilter(t,n,i){return n==="in"?new Z2(t,i):new J2(t,i)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ju(n,this.value)):n!==null&&zo(this.value)===zo(n)&&this.matchesComparison(Ju(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return zt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fs extends lw{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new fs(t,n)}matches(t){return uw(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function uw(s){return s.op==="and"}function cw(s){return K2(s)&&uw(s)}function K2(s){for(const t of s.filters)if(t instanceof fs)return!1;return!0}function og(s){if(s instanceof vn)return s.field.canonicalString()+s.op.toString()+Wu(s.value);if(cw(s))return s.filters.map((t=>og(t))).join(",");{const t=s.filters.map((n=>og(n))).join(",");return`${s.op}(${t})`}}function fw(s,t){return s instanceof vn?(function(i,o){return o instanceof vn&&i.op===o.op&&i.field.isEqual(o.field)&&Gs(i.value,o.value)})(s,t):s instanceof fs?(function(i,o){return o instanceof fs&&i.op===o.op&&i.filters.length===o.filters.length?i.filters.reduce(((u,m,y)=>u&&fw(m,o.filters[y])),!0):!1})(s,t):void zt(19439)}function hw(s){return s instanceof vn?(function(n){return`${n.field.canonicalString()} ${n.op} ${Wu(n.value)}`})(s):s instanceof fs?(function(n){return n.op.toString()+" {"+n.getFilters().map(hw).join(" ,")+"}"})(s):"Filter"}class X2 extends vn{constructor(t,n,i){super(t,n,i),this.key=Vt.fromName(i.referenceValue)}matches(t){const n=Vt.comparator(t.key,this.key);return this.matchesComparison(n)}}class Z2 extends vn{constructor(t,n){super(t,"in",n),this.keys=dw("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class J2 extends vn{constructor(t,n){super(t,"not-in",n),this.keys=dw("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function dw(s,t){return(t.arrayValue?.values||[]).map((n=>Vt.fromName(n.referenceValue)))}class W2 extends vn{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Xg(n)&&Vf(n.arrayValue,this.value)}}class tI extends vn{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Vf(this.value.arrayValue,n)}}class eI extends vn{constructor(t,n){super(t,"not-in",n)}matches(t){if(Vf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Vf(this.value.arrayValue,n)}}class nI extends vn{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Xg(n)||!n.arrayValue.values)&&n.arrayValue.values.some((i=>Vf(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(t,n=null,i=[],o=[],u=null,m=null,y=null){this.path=t,this.collectionGroup=n,this.orderBy=i,this.filters=o,this.limit=u,this.startAt=m,this.endAt=y,this.Te=null}}function nE(s,t=null,n=[],i=[],o=null,u=null,m=null){return new rI(s,t,n,i,o,u,m)}function Zg(s){const t=Xt(s);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((i=>og(i))).join(","),n+="|ob:",n+=t.orderBy.map((i=>(function(u){return u.field.canonicalString()+u.dir})(i))).join(","),$d(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((i=>Wu(i))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((i=>Wu(i))).join(",")),t.Te=n}return t.Te}function Jg(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!Y2(s.orderBy[n],t.orderBy[n]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!fw(s.filters[n],t.filters[n]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!eE(s.startAt,t.startAt)&&eE(s.endAt,t.endAt)}function lg(s){return Vt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(t,n=null,i=[],o=[],u=null,m="F",y=null,E=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=i,this.filters=o,this.limit=u,this.limitType=m,this.startAt=y,this.endAt=E,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function iI(s,t,n,i,o,u,m,y){return new Bf(s,t,n,i,o,u,m,y)}function Wg(s){return new Bf(s)}function rE(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function mw(s){return s.collectionGroup!==null}function wf(s){const t=Xt(s);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(m){let y=new xn(Wn.comparator);return m.filters.forEach((E=>{E.getFlattenedFilters().forEach((T=>{T.isInequality()&&(y=y.add(T.field))}))})),y})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Sd(u,i))})),n.has(Wn.keyField().canonicalString())||t.Ie.push(new Sd(Wn.keyField(),i))}return t.Ie}function zs(s){const t=Xt(s);return t.Ee||(t.Ee=sI(t,wf(s))),t.Ee}function sI(s,t){if(s.limitType==="F")return nE(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Sd(o.field,u)}));const n=s.endAt?new Ad(s.endAt.position,s.endAt.inclusive):null,i=s.startAt?new Ad(s.startAt.position,s.startAt.inclusive):null;return nE(s.path,s.collectionGroup,t,s.filters,s.limit,n,i)}}function ug(s,t){const n=s.filters.concat([t]);return new Bf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function cg(s,t,n){return new Bf(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,n,s.startAt,s.endAt)}function Qd(s,t){return Jg(zs(s),zs(t))&&s.limitType===t.limitType}function pw(s){return`${Zg(zs(s))}|lt:${s.limitType}`}function zu(s){return`Query(target=${(function(n){let i=n.path.canonicalString();return n.collectionGroup!==null&&(i+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(i+=`, filters: [${n.filters.map((o=>hw(o))).join(", ")}]`),$d(n.limit)||(i+=", limit: "+n.limit),n.orderBy.length>0&&(i+=`, orderBy: [${n.orderBy.map((o=>(function(m){return`${m.field.canonicalString()} (${m.dir})`})(o))).join(", ")}]`),n.startAt&&(i+=", startAt: ",i+=n.startAt.inclusive?"b:":"a:",i+=n.startAt.position.map((o=>Wu(o))).join(",")),n.endAt&&(i+=", endAt: ",i+=n.endAt.inclusive?"a:":"b:",i+=n.endAt.position.map((o=>Wu(o))).join(",")),`Target(${i})`})(zs(s))}; limitType=${s.limitType})`}function Yd(s,t){return t.isFoundDocument()&&(function(i,o){const u=o.key.path;return i.collectionGroup!==null?o.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(u):Vt.isDocumentKey(i.path)?i.path.isEqual(u):i.path.isImmediateParentOf(u)})(s,t)&&(function(i,o){for(const u of wf(i))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(i,o){for(const u of i.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(i,o){return!(i.startAt&&!(function(m,y,E){const T=tE(m,y,E);return m.inclusive?T<=0:T<0})(i.startAt,wf(i),o)||i.endAt&&!(function(m,y,E){const T=tE(m,y,E);return m.inclusive?T>=0:T>0})(i.endAt,wf(i),o))})(s,t)}function aI(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function gw(s){return(t,n)=>{let i=!1;for(const o of wf(s)){const u=oI(o,t,n);if(u!==0)return u;i=i||o.field.isKeyField()}return 0}}function oI(s,t,n){const i=s.field.isKeyField()?Vt.comparator(t.key,n.key):(function(u,m,y){const E=m.data.field(u),T=y.data.field(u);return E!==null&&T!==null?Ju(E,T):zt(42886)})(s.field,t,n);switch(s.dir){case"asc":return i;case"desc":return-1*i;default:return zt(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $l{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i!==void 0){for(const[o,u]of i)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const i=this.mapKeyFn(t),o=this.inner[i];if(o===void 0)return this.inner[i]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),i=this.inner[n];if(i===void 0)return!1;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],t))return i.length===1?delete this.inner[n]:i.splice(o,1),this.innerSize--,!0;return!1}forEach(t){Fl(this.inner,((n,i)=>{for(const[o,u]of i)t(o,u)}))}isEmpty(){return WT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lI=new Qe(Vt.comparator);function $a(){return lI}const yw=new Qe(Vt.comparator);function af(...s){let t=yw;for(const n of s)t=t.insert(n.key,n);return t}function _w(s){let t=yw;return s.forEach(((n,i)=>t=t.insert(n,i.overlayedDocument))),t}function Ml(){return bf()}function vw(){return bf()}function bf(){return new $l((s=>s.toString()),((s,t)=>s.isEqual(t)))}const uI=new Qe(Vt.comparator),cI=new xn(Vt.comparator);function le(...s){let t=cI;for(const n of s)t=t.add(n);return t}const fI=new xn(oe);function hI(){return fI}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ty(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wd(t)?"-0":t}}function Ew(s){return{integerValue:""+s}}function dI(s,t){return j2(t)?Ew(t):ty(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this._=void 0}}function mI(s,t,n){return s instanceof Rd?(function(o,u){const m={fields:{[nw]:{stringValue:ew},[iw]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Kg(u)&&(u=Gd(u)),u&&(m.fields[rw]=u),{mapValue:m}})(n,t):s instanceof Pf?ww(s,t):s instanceof Uf?bw(s,t):(function(o,u){const m=Tw(o,u),y=iE(m)+iE(o.Ae);return ag(m)&&ag(o.Ae)?Ew(y):ty(o.serializer,y)})(s,t)}function pI(s,t,n){return s instanceof Pf?ww(s,t):s instanceof Uf?bw(s,t):n}function Tw(s,t){return s instanceof Id?(function(i){return ag(i)||(function(u){return!!u&&"doubleValue"in u})(i)})(t)?t:{integerValue:0}:null}class Rd extends Kd{}class Pf extends Kd{constructor(t){super(),this.elements=t}}function ww(s,t){const n=Aw(t);for(const i of s.elements)n.some((o=>Gs(o,i)))||n.push(i);return{arrayValue:{values:n}}}class Uf extends Kd{constructor(t){super(),this.elements=t}}function bw(s,t){let n=Aw(t);for(const i of s.elements)n=n.filter((o=>!Gs(o,i)));return{arrayValue:{values:n}}}class Id extends Kd{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function iE(s){return hn(s.integerValue||s.doubleValue)}function Aw(s){return Xg(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}function gI(s,t){return s.field.isEqual(t.field)&&(function(i,o){return i instanceof Pf&&o instanceof Pf||i instanceof Uf&&o instanceof Uf?Zu(i.elements,o.elements,Gs):i instanceof Id&&o instanceof Id?Gs(i.Ae,o.Ae):i instanceof Rd&&o instanceof Rd})(s.transform,t.transform)}class yI{constructor(t,n){this.version=t,this.transformResults=n}}class qs{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new qs}static exists(t){return new qs(void 0,t)}static updateTime(t){return new qs(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function ad(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class Xd{}function Sw(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new ey(s.key,qs.none()):new jf(s.key,s.data,qs.none());{const n=s.data,i=Ni.empty();let o=new xn(Wn.comparator);for(let u of t.fields)if(!o.has(u)){let m=n.field(u);m===null&&u.length>1&&(u=u.popLast(),m=n.field(u)),m===null?i.delete(u):i.set(u,m),o=o.add(u)}return new Gl(s.key,i,new cs(o.toArray()),qs.none())}}function _I(s,t,n){s instanceof jf?(function(o,u,m){const y=o.value.clone(),E=aE(o.fieldTransforms,u,m.transformResults);y.setAll(E),u.convertToFoundDocument(m.version,y).setHasCommittedMutations()})(s,t,n):s instanceof Gl?(function(o,u,m){if(!ad(o.precondition,u))return void u.convertToUnknownDocument(m.version);const y=aE(o.fieldTransforms,u,m.transformResults),E=u.data;E.setAll(Rw(o)),E.setAll(y),u.convertToFoundDocument(m.version,E).setHasCommittedMutations()})(s,t,n):(function(o,u,m){u.convertToNoDocument(m.version).setHasCommittedMutations()})(0,t,n)}function Af(s,t,n,i){return s instanceof jf?(function(u,m,y,E){if(!ad(u.precondition,m))return y;const T=u.value.clone(),S=oE(u.fieldTransforms,E,m);return T.setAll(S),m.convertToFoundDocument(m.version,T).setHasLocalMutations(),null})(s,t,n,i):s instanceof Gl?(function(u,m,y,E){if(!ad(u.precondition,m))return y;const T=oE(u.fieldTransforms,E,m),S=m.data;return S.setAll(Rw(u)),S.setAll(T),m.convertToFoundDocument(m.version,S).setHasLocalMutations(),y===null?null:y.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((x=>x.field)))})(s,t,n,i):(function(u,m,y){return ad(u.precondition,m)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):y})(s,t,n)}function vI(s,t){let n=null;for(const i of s.fieldTransforms){const o=t.data.field(i.field),u=Tw(i.transform,o||null);u!=null&&(n===null&&(n=Ni.empty()),n.set(i.field,u))}return n||null}function sE(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(i,o){return i===void 0&&o===void 0||!(!i||!o)&&Zu(i,o,((u,m)=>gI(u,m)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class jf extends Xd{constructor(t,n,i,o=[]){super(),this.key=t,this.value=n,this.precondition=i,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Gl extends Xd{constructor(t,n,i,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=i,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Rw(s){const t=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=s.data.field(n);t.set(n,i)}})),t}function aE(s,t,n){const i=new Map;Re(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],m=u.transform,y=t.data.field(u.field);i.set(u.field,pI(m,y,n[o]))}return i}function oE(s,t,n){const i=new Map;for(const o of s){const u=o.transform,m=n.data.field(o.field);i.set(o.field,mI(u,m,t))}return i}class ey extends Xd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class EI extends Xd{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(t,n,i,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=i,this.mutations=o}applyToRemoteDocument(t,n){const i=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&_I(u,t,i[o])}}applyToLocalView(t,n){for(const i of this.baseMutations)i.key.isEqual(t.key)&&(n=Af(i,t,n,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(t.key)&&(n=Af(i,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const i=vw();return this.mutations.forEach((o=>{const u=t.get(o.key),m=u.overlayedDocument;let y=this.applyToLocalView(m,u.mutatedFields);y=n.has(o.key)?null:y;const E=Sw(m,y);E!==null&&i.set(o.key,E),m.isValidDocument()||m.convertToNoDocument(Yt.min())})),i}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),le())}isEqual(t){return this.batchId===t.batchId&&Zu(this.mutations,t.mutations,((n,i)=>sE(n,i)))&&Zu(this.baseMutations,t.baseMutations,((n,i)=>sE(n,i)))}}class ny{constructor(t,n,i,o){this.batch=t,this.commitVersion=n,this.mutationResults=i,this.docVersions=o}static from(t,n,i){Re(t.mutations.length===i.length,58842,{me:t.mutations.length,fe:i.length});let o=(function(){return uI})();const u=t.mutations;for(let m=0;m<u.length;m++)o=o.insert(u[m].key,i[m].version);return new ny(t,n,i,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wI{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _n,de;function AI(s){switch(s){case ut.OK:return zt(64938);case ut.CANCELLED:case ut.UNKNOWN:case ut.DEADLINE_EXCEEDED:case ut.RESOURCE_EXHAUSTED:case ut.INTERNAL:case ut.UNAVAILABLE:case ut.UNAUTHENTICATED:return!1;case ut.INVALID_ARGUMENT:case ut.NOT_FOUND:case ut.ALREADY_EXISTS:case ut.PERMISSION_DENIED:case ut.FAILED_PRECONDITION:case ut.ABORTED:case ut.OUT_OF_RANGE:case ut.UNIMPLEMENTED:case ut.DATA_LOSS:return!0;default:return zt(15467,{code:s})}}function Iw(s){if(s===void 0)return Fa("GRPC error has no .code"),ut.UNKNOWN;switch(s){case _n.OK:return ut.OK;case _n.CANCELLED:return ut.CANCELLED;case _n.UNKNOWN:return ut.UNKNOWN;case _n.DEADLINE_EXCEEDED:return ut.DEADLINE_EXCEEDED;case _n.RESOURCE_EXHAUSTED:return ut.RESOURCE_EXHAUSTED;case _n.INTERNAL:return ut.INTERNAL;case _n.UNAVAILABLE:return ut.UNAVAILABLE;case _n.UNAUTHENTICATED:return ut.UNAUTHENTICATED;case _n.INVALID_ARGUMENT:return ut.INVALID_ARGUMENT;case _n.NOT_FOUND:return ut.NOT_FOUND;case _n.ALREADY_EXISTS:return ut.ALREADY_EXISTS;case _n.PERMISSION_DENIED:return ut.PERMISSION_DENIED;case _n.FAILED_PRECONDITION:return ut.FAILED_PRECONDITION;case _n.ABORTED:return ut.ABORTED;case _n.OUT_OF_RANGE:return ut.OUT_OF_RANGE;case _n.UNIMPLEMENTED:return ut.UNIMPLEMENTED;case _n.DATA_LOSS:return ut.DATA_LOSS;default:return zt(39323,{code:s})}}(de=_n||(_n={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new Mo([4294967295,4294967295],0);function lE(s){const t=SI().encode(s),n=new qT;return n.update(t),new Uint8Array(n.digest())}function uE(s){const t=new DataView(s.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new Mo([n,i],0),new Mo([o,u],0)]}class ry{constructor(t,n,i){if(this.bitmap=t,this.padding=n,this.hashCount=i,n<0||n>=8)throw new of(`Invalid padding: ${n}`);if(i<0)throw new of(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new of(`Invalid hash count: ${i}`);if(t.length===0&&n!==0)throw new of(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=Mo.fromNumber(this.ge)}ye(t,n,i){let o=t.add(n.multiply(Mo.fromNumber(i)));return o.compare(RI)===1&&(o=new Mo([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=lE(t),[i,o]=uE(n);for(let u=0;u<this.hashCount;u++){const m=this.ye(i,o,u);if(!this.we(m))return!1}return!0}static create(t,n,i){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),m=new ry(u,o,n);return i.forEach((y=>m.insert(y))),m}insert(t){if(this.ge===0)return;const n=lE(t),[i,o]=uE(n);for(let u=0;u<this.hashCount;u++){const m=this.ye(i,o,u);this.Se(m)}}Se(t){const n=Math.floor(t/8),i=t%8;this.bitmap[n]|=1<<i}}class of extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(t,n,i,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=i,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,i){const o=new Map;return o.set(t,zf.createSynthesizedTargetChangeForCurrentChange(t,n,i)),new Zd(Yt.min(),o,new Qe(oe),$a(),le())}}class zf{constructor(t,n,i,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=i,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,i){return new zf(i,n,le(),le(),le())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(t,n,i,o){this.be=t,this.removedTargetIds=n,this.key=i,this.De=o}}class Cw{constructor(t,n){this.targetId=t,this.Ce=n}}class xw{constructor(t,n,i=tr.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=i,this.cause=o}}class cE{constructor(){this.ve=0,this.Fe=fE(),this.Me=tr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=le(),n=le(),i=le();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:i=i.add(o);break;default:zt(38017,{changeType:u})}})),new zf(this.Me,this.xe,t,n,i)}qe(){this.Oe=!1,this.Fe=fE()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,Re(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class II{constructor(t){this.Ge=t,this.ze=new Map,this.je=$a(),this.Je=Yh(),this.He=Yh(),this.Ye=new Qe(oe)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const i=this.nt(n);switch(t.state){case 0:this.rt(n)&&i.Le(t.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(t.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(i.We(),i.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),i.Le(t.resumeToken));break;default:zt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((i,o)=>{this.rt(o)&&n(o)}))}st(t){const n=t.targetId,i=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(lg(u))if(i===0){const m=new Vt(u.path);this.et(n,m,pr.newNoDocument(m,Yt.min()))}else Re(i===1,20013,{expectedCount:i});else{const m=this._t(n);if(m!==i){const y=this.ut(t),E=y?this.ct(y,t,m):1;if(E!==0){this.it(n);const T=E===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,T)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:i="",padding:o=0},hashCount:u=0}=n;let m,y;try{m=jo(i).toUint8Array()}catch(E){if(E instanceof tw)return Xu("Decoding the base64 bloom filter in existence filter failed ("+E.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw E}try{y=new ry(m,o,u)}catch(E){return Xu(E instanceof of?"BloomFilter error: ":"Applying bloom filter failed: ",E),null}return y.ge===0?null:y}ct(t,n,i){return n.Ce.count===i-this.Pt(t,n.targetId)?0:2}Pt(t,n){const i=this.Ge.getRemoteKeysForTarget(n);let o=0;return i.forEach((u=>{const m=this.Ge.ht(),y=`projects/${m.projectId}/databases/${m.database}/documents/${u.path.canonicalString()}`;t.mightContain(y)||(this.et(n,u,null),o++)})),o}Tt(t){const n=new Map;this.ze.forEach(((u,m)=>{const y=this.ot(m);if(y){if(u.current&&lg(y.target)){const E=new Vt(y.target.path);this.It(E).has(m)||this.Et(m,E)||this.et(m,E,pr.newNoDocument(E,t))}u.Be&&(n.set(m,u.ke()),u.qe())}}));let i=le();this.He.forEach(((u,m)=>{let y=!0;m.forEachWhile((E=>{const T=this.ot(E);return!T||T.purpose==="TargetPurposeLimboResolution"||(y=!1,!1)})),y&&(i=i.add(u))})),this.je.forEach(((u,m)=>m.setReadTime(t)));const o=new Zd(t,n,this.Ye,this.je,i);return this.je=$a(),this.Je=Yh(),this.He=Yh(),this.Ye=new Qe(oe),o}Xe(t,n){if(!this.rt(t))return;const i=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,i),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,i){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),i&&(this.je=this.je.insert(n,i))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new cE,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new xn(oe),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new xn(oe),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||St("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new cE),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function Yh(){return new Qe(Vt.comparator)}function fE(){return new Qe(Vt.comparator)}const CI={asc:"ASCENDING",desc:"DESCENDING"},xI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DI={and:"AND",or:"OR"};class OI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function fg(s,t){return s.useProto3Json||$d(t)?t:{value:t}}function Cd(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Dw(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function NI(s,t){return Cd(s,t.toTimestamp())}function Hs(s){return Re(!!s,49232),Yt.fromTimestamp((function(n){const i=Bo(n);return new Be(i.seconds,i.nanos)})(s))}function iy(s,t){return hg(s,t).canonicalString()}function hg(s,t){const n=(function(o){return new Ue(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?n:n.child(t)}function Ow(s){const t=Ue.fromString(s);return Re(Uw(t),10190,{key:t.toString()}),t}function dg(s,t){return iy(s.databaseId,t.path)}function Op(s,t){const n=Ow(t);if(n.get(1)!==s.databaseId.projectId)throw new Rt(ut.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new Rt(ut.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new Vt(Mw(n))}function Nw(s,t){return iy(s.databaseId,t)}function MI(s){const t=Ow(s);return t.length===4?Ue.emptyPath():Mw(t)}function mg(s){return new Ue(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function Mw(s){return Re(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function hE(s,t,n){return{name:dg(s,t),fields:n.value.mapValue.fields}}function VI(s,t){let n;if("targetChange"in t){t.targetChange;const i=(function(T){return T==="NO_CHANGE"?0:T==="ADD"?1:T==="REMOVE"?2:T==="CURRENT"?3:T==="RESET"?4:zt(39313,{state:T})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(T,S){return T.useProto3Json?(Re(S===void 0||typeof S=="string",58123),tr.fromBase64String(S||"")):(Re(S===void 0||S instanceof Buffer||S instanceof Uint8Array,16193),tr.fromUint8Array(S||new Uint8Array))})(s,t.targetChange.resumeToken),m=t.targetChange.cause,y=m&&(function(T){const S=T.code===void 0?ut.UNKNOWN:Iw(T.code);return new Rt(S,T.message||"")})(m);n=new xw(i,o,u,y||null)}else if("documentChange"in t){t.documentChange;const i=t.documentChange;i.document,i.document.name,i.document.updateTime;const o=Op(s,i.document.name),u=Hs(i.document.updateTime),m=i.document.createTime?Hs(i.document.createTime):Yt.min(),y=new Ni({mapValue:{fields:i.document.fields}}),E=pr.newFoundDocument(o,u,m,y),T=i.targetIds||[],S=i.removedTargetIds||[];n=new od(T,S,E.key,E)}else if("documentDelete"in t){t.documentDelete;const i=t.documentDelete;i.document;const o=Op(s,i.document),u=i.readTime?Hs(i.readTime):Yt.min(),m=pr.newNoDocument(o,u),y=i.removedTargetIds||[];n=new od([],y,m.key,m)}else if("documentRemove"in t){t.documentRemove;const i=t.documentRemove;i.document;const o=Op(s,i.document),u=i.removedTargetIds||[];n=new od([],u,o,null)}else{if(!("filter"in t))return zt(11601,{Rt:t});{t.filter;const i=t.filter;i.targetId;const{count:o=0,unchangedNames:u}=i,m=new bI(o,u),y=i.targetId;n=new Cw(y,m)}}return n}function PI(s,t){let n;if(t instanceof jf)n={update:hE(s,t.key,t.value)};else if(t instanceof ey)n={delete:dg(s,t.key)};else if(t instanceof Gl)n={update:hE(s,t.key,t.data),updateMask:FI(t.fieldMask)};else{if(!(t instanceof EI))return zt(16599,{Vt:t.type});n={verify:dg(s,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((i=>(function(u,m){const y=m.transform;if(y instanceof Rd)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(y instanceof Pf)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:y.elements}};if(y instanceof Uf)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:y.elements}};if(y instanceof Id)return{fieldPath:m.field.canonicalString(),increment:y.Ae};throw zt(20930,{transform:m.transform})})(0,i)))),t.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:NI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:zt(27497)})(s,t.precondition)),n}function UI(s,t){return s&&s.length>0?(Re(t!==void 0,14353),s.map((n=>(function(o,u){let m=o.updateTime?Hs(o.updateTime):Hs(u);return m.isEqual(Yt.min())&&(m=Hs(u)),new yI(m,o.transformResults||[])})(n,t)))):[]}function kI(s,t){return{documents:[Nw(s,t.path)]}}function LI(s,t){const n={structuredQuery:{}},i=t.path;let o;t.collectionGroup!==null?(o=i,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=Nw(s,o);const u=(function(T){if(T.length!==0)return Pw(fs.create(T,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const m=(function(T){if(T.length!==0)return T.map((S=>(function(N){return{field:qu(N.field),direction:zI(N.dir)}})(S)))})(t.orderBy);m&&(n.structuredQuery.orderBy=m);const y=fg(s,t.limit);return y!==null&&(n.structuredQuery.limit=y),t.startAt&&(n.structuredQuery.startAt=(function(T){return{before:T.inclusive,values:T.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(T){return{before:!T.inclusive,values:T.position}})(t.endAt)),{ft:n,parent:o}}function BI(s){let t=MI(s.parent);const n=s.structuredQuery,i=n.from?n.from.length:0;let o=null;if(i>0){Re(i===1,65062);const S=n.from[0];S.allDescendants?o=S.collectionId:t=t.child(S.collectionId)}let u=[];n.where&&(u=(function(x){const N=Vw(x);return N instanceof fs&&cw(N)?N.getFilters():[N]})(n.where));let m=[];n.orderBy&&(m=(function(x){return x.map((N=>(function(tt){return new Sd(Hu(tt.field),(function(ot){switch(ot){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(tt.direction))})(N)))})(n.orderBy));let y=null;n.limit&&(y=(function(x){let N;return N=typeof x=="object"?x.value:x,$d(N)?null:N})(n.limit));let E=null;n.startAt&&(E=(function(x){const N=!!x.before,V=x.values||[];return new Ad(V,N)})(n.startAt));let T=null;return n.endAt&&(T=(function(x){const N=!x.before,V=x.values||[];return new Ad(V,N)})(n.endAt)),iI(t,o,m,u,y,"F",E,T)}function jI(s,t){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return zt(28987,{purpose:o})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Vw(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const i=Hu(n.unaryFilter.field);return vn.create(i,"==",{doubleValue:NaN});case"IS_NULL":const o=Hu(n.unaryFilter.field);return vn.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=Hu(n.unaryFilter.field);return vn.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const m=Hu(n.unaryFilter.field);return vn.create(m,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return zt(61313);default:return zt(60726)}})(s):s.fieldFilter!==void 0?(function(n){return vn.create(Hu(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return zt(58110);default:return zt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return fs.create(n.compositeFilter.filters.map((i=>Vw(i))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return zt(1026)}})(n.compositeFilter.op))})(s):zt(30097,{filter:s})}function zI(s){return CI[s]}function qI(s){return xI[s]}function HI(s){return DI[s]}function qu(s){return{fieldPath:s.canonicalString()}}function Hu(s){return Wn.fromServerFormat(s.fieldPath)}function Pw(s){return s instanceof vn?(function(n){if(n.op==="=="){if(W0(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NAN"}};if(J0(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(W0(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NOT_NAN"}};if(J0(n.value))return{unaryFilter:{field:qu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qu(n.field),op:qI(n.op),value:n.value}}})(s):s instanceof fs?(function(n){const i=n.getFilters().map((o=>Pw(o)));return i.length===1?i[0]:{compositeFilter:{op:HI(n.op),filters:i}}})(s):zt(54877,{filter:s})}function FI(s){const t=[];return s.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function Uw(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t,n,i,o,u=Yt.min(),m=Yt.min(),y=tr.EMPTY_BYTE_STRING,E=null){this.target=t,this.targetId=n,this.purpose=i,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=m,this.resumeToken=y,this.expectedCount=E}withSequenceNumber(t){return new Do(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Do(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $I{constructor(t){this.yt=t}}function GI(s){const t=BI({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?cg(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{constructor(){this.Cn=new YI}addToCollectionParentIndex(t,n){return this.Cn.add(n),ft.resolve()}getCollectionParents(t,n){return ft.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return ft.resolve()}deleteFieldIndex(t,n){return ft.resolve()}deleteAllFieldIndexes(t){return ft.resolve()}createTargetIndexes(t,n){return ft.resolve()}getDocumentsMatchingTarget(t,n){return ft.resolve(null)}getIndexType(t,n){return ft.resolve(0)}getFieldIndexes(t,n){return ft.resolve([])}getNextCollectionGroupToUpdate(t){return ft.resolve(null)}getMinOffset(t,n){return ft.resolve(Lo.min())}getMinOffsetFromCollectionGroup(t,n){return ft.resolve(Lo.min())}updateCollectionGroup(t,n,i){return ft.resolve()}updateIndexEntries(t,n){return ft.resolve()}}class YI{constructor(){this.index={}}add(t){const n=t.lastSegment(),i=t.popLast(),o=this.index[n]||new xn(Ue.comparator),u=!o.has(i);return this.index[n]=o.add(i),u}has(t){const n=t.lastSegment(),i=t.popLast(),o=this.index[n];return o&&o.has(i)}getEntries(t){return(this.index[t]||new xn(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},kw=41943040;class jr{static withCacheSize(t){return new jr(t,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */jr.DEFAULT_COLLECTION_PERCENTILE=10,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jr.DEFAULT=new jr(kw,jr.DEFAULT_COLLECTION_PERCENTILE,jr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jr.DISABLED=new jr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tc{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new tc(0)}static cr(){return new tc(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="LruGarbageCollector",KI=1048576;function pE([s,t],[n,i]){const o=oe(s,n);return o===0?oe(t,i):o}class XI{constructor(t){this.Ir=t,this.buffer=new xn(pE),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const i=this.buffer.last();pE(n,i)<0&&(this.buffer=this.buffer.delete(i).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ZI{constructor(t,n,i){this.garbageCollector=t,this.asyncQueue=n,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){St(mE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){sc(n)?St(mE,"Ignoring IndexedDB error during garbage collection: ",n):await ic(n)}await this.Vr(3e5)}))}}class JI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((i=>Math.floor(n/100*i)))}nthSequenceNumber(t,n){if(n===0)return ft.resolve(Fd.ce);const i=new XI(n);return this.mr.forEachTarget(t,(o=>i.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>i.Ar(o))))).next((()=>i.maxValue))}removeTargets(t,n,i){return this.mr.removeTargets(t,n,i)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(St("LruGarbageCollector","Garbage collection skipped; disabled"),ft.resolve(dE)):this.getCacheSize(t).next((i=>i<this.params.cacheSizeCollectionThreshold?(St("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dE):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let i,o,u,m,y,E,T;const S=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((x=>(x>this.params.maximumSequenceNumbersToCollect?(St("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${x}`),o=this.params.maximumSequenceNumbersToCollect):o=x,m=Date.now(),this.nthSequenceNumber(t,o)))).next((x=>(i=x,y=Date.now(),this.removeTargets(t,i,n)))).next((x=>(u=x,E=Date.now(),this.removeOrphanedDocuments(t,i)))).next((x=>(T=Date.now(),ju()<=me.DEBUG&&St("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${m-S}ms
	Determined least recently used ${o} in `+(y-m)+`ms
	Removed ${u} targets in `+(E-y)+`ms
	Removed ${x} documents in `+(T-E)+`ms
Total Duration: ${T-S}ms`),ft.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:x}))))}}function WI(s,t){return new JI(s,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(){this.changes=new $l((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,pr.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const i=this.changes.get(n);return i!==void 0?ft.resolve(i):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(t,n,i,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=i,this.indexManager=o}getDocument(t,n){let i=null;return this.documentOverlayCache.getOverlay(t,n).next((o=>(i=o,this.remoteDocumentCache.getEntry(t,n)))).next((o=>(i!==null&&Af(i.mutation,o,cs.empty(),Be.now()),o)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.getLocalViewOfDocuments(t,i,le()).next((()=>i))))}getLocalViewOfDocuments(t,n,i=le()){const o=Ml();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,i).next((u=>{let m=af();return u.forEach(((y,E)=>{m=m.insert(y,E.overlayedDocument)})),m}))))}getOverlayedDocuments(t,n){const i=Ml();return this.populateOverlays(t,i,n).next((()=>this.computeViews(t,n,i,le())))}populateOverlays(t,n,i){const o=[];return i.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((m,y)=>{n.set(m,y)}))}))}computeViews(t,n,i,o){let u=$a();const m=bf(),y=(function(){return bf()})();return n.forEach(((E,T)=>{const S=i.get(T.key);o.has(T.key)&&(S===void 0||S.mutation instanceof Gl)?u=u.insert(T.key,T):S!==void 0?(m.set(T.key,S.mutation.getFieldMask()),Af(S.mutation,T,S.mutation.getFieldMask(),Be.now())):m.set(T.key,cs.empty())})),this.recalculateAndSaveOverlays(t,u).next((E=>(E.forEach(((T,S)=>m.set(T,S))),n.forEach(((T,S)=>y.set(T,new eC(S,m.get(T)??null)))),y)))}recalculateAndSaveOverlays(t,n){const i=bf();let o=new Qe(((m,y)=>m-y)),u=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((m=>{for(const y of m)y.keys().forEach((E=>{const T=n.get(E);if(T===null)return;let S=i.get(E)||cs.empty();S=y.applyToLocalView(T,S),i.set(E,S);const x=(o.get(y.batchId)||le()).add(E);o=o.insert(y.batchId,x)}))})).next((()=>{const m=[],y=o.getReverseIterator();for(;y.hasNext();){const E=y.getNext(),T=E.key,S=E.value,x=vw();S.forEach((N=>{if(!u.has(N)){const V=Sw(n.get(N),i.get(N));V!==null&&x.set(N,V),u=u.add(N)}})),m.push(this.documentOverlayCache.saveOverlays(t,T,x))}return ft.waitFor(m)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((i=>this.recalculateAndSaveOverlays(t,i)))}getDocumentsMatchingQuery(t,n,i,o){return(function(m){return Vt.isDocumentKey(m.path)&&m.collectionGroup===null&&m.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):mw(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,i,o):this.getDocumentsMatchingCollectionQuery(t,n,i,o)}getNextDocuments(t,n,i,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,i,o).next((u=>{const m=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,i.largestBatchId,o-u.size):ft.resolve(Ml());let y=Of,E=u;return m.next((T=>ft.forEach(T,((S,x)=>(y<x.largestBatchId&&(y=x.largestBatchId),u.get(S)?ft.resolve():this.remoteDocumentCache.getEntry(t,S).next((N=>{E=E.insert(S,N)}))))).next((()=>this.populateOverlays(t,T,u))).next((()=>this.computeViews(t,E,T,le()))).next((S=>({batchId:y,changes:_w(S)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Vt(n)).next((i=>{let o=af();return i.isFoundDocument()&&(o=o.insert(i.key,i)),o}))}getDocumentsMatchingCollectionGroupQuery(t,n,i,o){const u=n.collectionGroup;let m=af();return this.indexManager.getCollectionParents(t,u).next((y=>ft.forEach(y,(E=>{const T=(function(x,N){return new Bf(N,null,x.explicitOrderBy.slice(),x.filters.slice(),x.limit,x.limitType,x.startAt,x.endAt)})(n,E.child(u));return this.getDocumentsMatchingCollectionQuery(t,T,i,o).next((S=>{S.forEach(((x,N)=>{m=m.insert(x,N)}))}))})).next((()=>m))))}getDocumentsMatchingCollectionQuery(t,n,i,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,i.largestBatchId).next((m=>(u=m,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,i,u,o)))).next((m=>{u.forEach(((E,T)=>{const S=T.getKey();m.get(S)===null&&(m=m.insert(S,pr.newInvalidDocument(S)))}));let y=af();return m.forEach(((E,T)=>{const S=u.get(E);S!==void 0&&Af(S.mutation,T,cs.empty(),Be.now()),Yd(n,T)&&(y=y.insert(E,T))})),y}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return ft.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:Hs(o.createTime)}})(n)),ft.resolve()}getNamedQuery(t,n){return ft.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:GI(o.bundledQuery),readTime:Hs(o.readTime)}})(n)),ft.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(){this.overlays=new Qe(Vt.comparator),this.qr=new Map}getOverlay(t,n){return ft.resolve(this.overlays.get(n))}getOverlays(t,n){const i=Ml();return ft.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&i.set(o,u)})))).next((()=>i))}saveOverlays(t,n,i){return i.forEach(((o,u)=>{this.St(t,n,u)})),ft.resolve()}removeOverlaysForBatchId(t,n,i){const o=this.qr.get(i);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(i)),ft.resolve()}getOverlaysForCollection(t,n,i){const o=Ml(),u=n.length+1,m=new Vt(n.child("")),y=this.overlays.getIteratorFrom(m);for(;y.hasNext();){const E=y.getNext().value,T=E.getKey();if(!n.isPrefixOf(T.path))break;T.path.length===u&&E.largestBatchId>i&&o.set(E.getKey(),E)}return ft.resolve(o)}getOverlaysForCollectionGroup(t,n,i,o){let u=new Qe(((T,S)=>T-S));const m=this.overlays.getIterator();for(;m.hasNext();){const T=m.getNext().value;if(T.getKey().getCollectionGroup()===n&&T.largestBatchId>i){let S=u.get(T.largestBatchId);S===null&&(S=Ml(),u=u.insert(T.largestBatchId,S)),S.set(T.getKey(),T)}}const y=Ml(),E=u.getIterator();for(;E.hasNext()&&(E.getNext().value.forEach(((T,S)=>y.set(T,S))),!(y.size()>=o)););return ft.resolve(y)}St(t,n,i){const o=this.overlays.get(i.key);if(o!==null){const m=this.qr.get(o.largestBatchId).delete(i.key);this.qr.set(o.largestBatchId,m)}this.overlays=this.overlays.insert(i.key,new wI(n,i));let u=this.qr.get(n);u===void 0&&(u=le(),this.qr.set(n,u)),this.qr.set(n,u.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.sessionToken=tr.EMPTY_BYTE_STRING}getSessionToken(t){return ft.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,ft.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(){this.Qr=new xn(Hn.$r),this.Ur=new xn(Hn.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const i=new Hn(t,n);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(t,n){t.forEach((i=>this.addReference(i,n)))}removeReference(t,n){this.Gr(new Hn(t,n))}zr(t,n){t.forEach((i=>this.removeReference(i,n)))}jr(t){const n=new Vt(new Ue([])),i=new Hn(n,t),o=new Hn(n,t+1),u=[];return this.Ur.forEachInRange([i,o],(m=>{this.Gr(m),u.push(m.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Vt(new Ue([])),i=new Hn(n,t),o=new Hn(n,t+1);let u=le();return this.Ur.forEachInRange([i,o],(m=>{u=u.add(m.key)})),u}containsKey(t){const n=new Hn(t,0),i=this.Qr.firstAfterOrEqual(n);return i!==null&&t.isEqual(i.key)}}class Hn{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Vt.comparator(t.key,n.key)||oe(t.Yr,n.Yr)}static Kr(t,n){return oe(t.Yr,n.Yr)||Vt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xn(Hn.$r)}checkEmpty(t){return ft.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,i,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const m=new TI(u,n,i,o);this.mutationQueue.push(m);for(const y of o)this.Zr=this.Zr.add(new Hn(y.key,u)),this.indexManager.addToCollectionParentIndex(t,y.key.path.popLast());return ft.resolve(m)}lookupMutationBatch(t,n){return ft.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const i=n+1,o=this.ei(i),u=o<0?0:o;return ft.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ft.resolve(this.mutationQueue.length===0?Yg:this.tr-1)}getAllMutationBatches(t){return ft.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const i=new Hn(n,0),o=new Hn(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([i,o],(m=>{const y=this.Xr(m.Yr);u.push(y)})),ft.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let i=new xn(oe);return n.forEach((o=>{const u=new Hn(o,0),m=new Hn(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,m],(y=>{i=i.add(y.Yr)}))})),ft.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(t,n){const i=n.path,o=i.length+1;let u=i;Vt.isDocumentKey(u)||(u=u.child(""));const m=new Hn(new Vt(u),0);let y=new xn(oe);return this.Zr.forEachWhile((E=>{const T=E.key.path;return!!i.isPrefixOf(T)&&(T.length===o&&(y=y.add(E.Yr)),!0)}),m),ft.resolve(this.ti(y))}ti(t){const n=[];return t.forEach((i=>{const o=this.Xr(i);o!==null&&n.push(o)})),n}removeMutationBatch(t,n){Re(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return ft.forEach(n.mutations,(o=>{const u=new Hn(o.key,n.batchId);return i=i.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=i}))}ir(t){}containsKey(t,n){const i=new Hn(n,0),o=this.Zr.firstAfterOrEqual(i);return ft.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,ft.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(t){this.ri=t,this.docs=(function(){return new Qe(Vt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const i=n.key,o=this.docs.get(i),u=o?o.size:0,m=this.ri(n);return this.docs=this.docs.insert(i,{document:n.mutableCopy(),size:m}),this.size+=m-u,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const i=this.docs.get(n);return ft.resolve(i?i.document.mutableCopy():pr.newInvalidDocument(n))}getEntries(t,n){let i=$a();return n.forEach((o=>{const u=this.docs.get(o);i=i.insert(o,u?u.document.mutableCopy():pr.newInvalidDocument(o))})),ft.resolve(i)}getDocumentsMatchingQuery(t,n,i,o){let u=$a();const m=n.path,y=new Vt(m.child("__id-9223372036854775808__")),E=this.docs.getIteratorFrom(y);for(;E.hasNext();){const{key:T,value:{document:S}}=E.getNext();if(!m.isPrefixOf(T.path))break;T.path.length>m.length+1||U2(P2(S),i)<=0||(o.has(S.key)||Yd(n,S))&&(u=u.insert(S.key,S.mutableCopy()))}return ft.resolve(u)}getAllFromCollectionGroup(t,n,i,o){zt(9500)}ii(t,n){return ft.forEach(this.docs,(i=>n(i)))}newChangeBuffer(t){return new lC(this)}getSize(t){return ft.resolve(this.size)}}class lC extends tC{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((i,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(i)})),ft.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC{constructor(t){this.persistence=t,this.si=new $l((n=>Zg(n)),Jg),this.lastRemoteSnapshotVersion=Yt.min(),this.highestTargetId=0,this.oi=0,this._i=new sy,this.targetCount=0,this.ai=tc.ur()}forEachTarget(t,n){return this.si.forEach(((i,o)=>n(o))),ft.resolve()}getLastRemoteSnapshotVersion(t){return ft.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return ft.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),ft.resolve(this.highestTargetId)}setTargetsMetadata(t,n,i){return i&&(this.lastRemoteSnapshotVersion=i),n>this.oi&&(this.oi=n),ft.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new tc(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,ft.resolve()}updateTargetData(t,n){return this.Pr(n),ft.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ft.resolve()}removeTargets(t,n,i){let o=0;const u=[];return this.si.forEach(((m,y)=>{y.sequenceNumber<=n&&i.get(y.targetId)===null&&(this.si.delete(m),u.push(this.removeMatchingKeysForTargetId(t,y.targetId)),o++)})),ft.waitFor(u).next((()=>o))}getTargetCount(t){return ft.resolve(this.targetCount)}getTargetData(t,n){const i=this.si.get(n)||null;return ft.resolve(i)}addMatchingKeys(t,n,i){return this._i.Wr(n,i),ft.resolve()}removeMatchingKeys(t,n,i){this._i.zr(n,i);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((m=>{u.push(o.markPotentiallyOrphaned(t,m))})),ft.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),ft.resolve()}getMatchingKeysForTargetId(t,n){const i=this._i.Hr(n);return ft.resolve(i)}containsKey(t,n){return ft.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lw{constructor(t,n){this.ui={},this.overlays={},this.ci=new Fd(0),this.li=!1,this.li=!0,this.hi=new sC,this.referenceDelegate=t(this),this.Pi=new uC(this),this.indexManager=new QI,this.remoteDocumentCache=(function(o){return new oC(o)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new $I(n),this.Ii=new rC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new iC,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let i=this.ui[t.toKey()];return i||(i=new aC(n,this.referenceDelegate),this.ui[t.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,i){St("MemoryPersistence","Starting transaction:",t);const o=new cC(this.ci.next());return this.referenceDelegate.Ei(),i(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,n){return ft.or(Object.values(this.ui).map((i=>()=>i.containsKey(t,n))))}}class cC extends L2{constructor(t){super(),this.currentSequenceNumber=t}}class ay{constructor(t){this.persistence=t,this.Ri=new sy,this.Vi=null}static mi(t){return new ay(t)}get fi(){if(this.Vi)return this.Vi;throw zt(60996)}addReference(t,n,i){return this.Ri.addReference(i,n),this.fi.delete(i.toString()),ft.resolve()}removeReference(t,n,i){return this.Ri.removeReference(i,n),this.fi.add(i.toString()),ft.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),ft.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>i.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ft.forEach(this.fi,(i=>{const o=Vt.fromPath(i);return this.gi(t,o).next((u=>{u||n.removeEntry(o,Yt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((i=>{i?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return ft.or([()=>ft.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class xd{constructor(t,n){this.persistence=t,this.pi=new $l((i=>z2(i.path)),((i,o)=>i.isEqual(o))),this.garbageCollector=WI(this,n)}static mi(t,n){return new xd(t,n)}Ei(){}di(t){return ft.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((i=>n.next((o=>i+o))))}wr(t){let n=0;return this.pr(t,(i=>{n++})).next((()=>n))}pr(t,n){return ft.forEach(this.pi,((i,o)=>this.br(t,i,o).next((u=>u?ft.resolve():n(o)))))}removeTargets(t,n,i){return this.persistence.getTargetCache().removeTargets(t,n,i)}removeOrphanedDocuments(t,n){let i=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(m=>this.br(t,m,n).next((y=>{y||(i++,u.removeEntry(m,Yt.min()))})))).next((()=>u.apply(t))).next((()=>i))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),ft.resolve()}removeTarget(t,n){const i=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,i)}addReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),ft.resolve()}removeReference(t,n,i){return this.pi.set(i,t.currentSequenceNumber),ft.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),ft.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=id(t.data.value)),n}br(t,n,i){return ft.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return ft.resolve(o!==void 0&&o>i)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oy{constructor(t,n,i,o){this.targetId=t,this.fromCache=n,this.Es=i,this.ds=o}static As(t,n){let i=le(),o=le();for(const u of n.docChanges)switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new oy(t,n.fromCache,i,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return nR()?8:B2(WS())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,i,o){const u={result:null};return this.ys(t,n).next((m=>{u.result=m})).next((()=>{if(!u.result)return this.ws(t,n,o,i).next((m=>{u.result=m}))})).next((()=>{if(u.result)return;const m=new fC;return this.Ss(t,n,m).next((y=>{if(u.result=y,this.Vs)return this.bs(t,n,m,y.size)}))})).next((()=>u.result))}bs(t,n,i,o){return i.documentReadCount<this.fs?(ju()<=me.DEBUG&&St("QueryEngine","SDK will not create cache indexes for query:",zu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ft.resolve()):(ju()<=me.DEBUG&&St("QueryEngine","Query:",zu(n),"scans",i.documentReadCount,"local documents and returns",o,"documents as results."),i.documentReadCount>this.gs*o?(ju()<=me.DEBUG&&St("QueryEngine","The SDK decides to create cache indexes for query:",zu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,zs(n))):ft.resolve())}ys(t,n){if(rE(n))return ft.resolve(null);let i=zs(n);return this.indexManager.getIndexType(t,i).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=cg(n,null,"F"),i=zs(n)),this.indexManager.getDocumentsMatchingTarget(t,i).next((u=>{const m=le(...u);return this.ps.getDocuments(t,m).next((y=>this.indexManager.getMinOffset(t,i).next((E=>{const T=this.Ds(n,y);return this.Cs(n,T,m,E.readTime)?this.ys(t,cg(n,null,"F")):this.vs(t,T,n,E)}))))})))))}ws(t,n,i,o){return rE(n)||o.isEqual(Yt.min())?ft.resolve(null):this.ps.getDocuments(t,i).next((u=>{const m=this.Ds(n,u);return this.Cs(n,m,i,o)?ft.resolve(null):(ju()<=me.DEBUG&&St("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),zu(n)),this.vs(t,m,n,V2(o,Of)).next((y=>y)))}))}Ds(t,n){let i=new xn(gw(t));return n.forEach(((o,u)=>{Yd(t,u)&&(i=i.add(u))})),i}Cs(t,n,i,o){if(t.limit===null)return!1;if(i.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,i){return ju()<=me.DEBUG&&St("QueryEngine","Using full collection scan to execute query:",zu(n)),this.ps.getDocumentsMatchingQuery(t,n,Lo.min(),i)}vs(t,n,i,o){return this.ps.getDocumentsMatchingQuery(t,i,o).next((u=>(n.forEach((m=>{u=u.insert(m.key,m)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ly="LocalStore",dC=3e8;class mC{constructor(t,n,i,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new Qe(oe),this.xs=new $l((u=>Zg(u)),Jg),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(i)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new nC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function pC(s,t,n,i){return new mC(s,t,n,i)}async function Bw(s,t){const n=Xt(s);return await n.persistence.runTransaction("Handle user change","readonly",(i=>{let o;return n.mutationQueue.getAllMutationBatches(i).next((u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(i)))).next((u=>{const m=[],y=[];let E=le();for(const T of o){m.push(T.batchId);for(const S of T.mutations)E=E.add(S.key)}for(const T of u){y.push(T.batchId);for(const S of T.mutations)E=E.add(S.key)}return n.localDocuments.getDocuments(i,E).next((T=>({Ls:T,removedBatchIds:m,addedBatchIds:y})))}))}))}function gC(s,t){const n=Xt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(y,E,T,S){const x=T.batch,N=x.keys();let V=ft.resolve();return N.forEach((tt=>{V=V.next((()=>S.getEntry(E,tt))).next((Z=>{const ot=T.docVersions.get(tt);Re(ot!==null,48541),Z.version.compareTo(ot)<0&&(x.applyToRemoteDocument(Z,T),Z.isValidDocument()&&(Z.setReadTime(T.commitVersion),S.addEntry(Z)))}))})),V.next((()=>y.mutationQueue.removeMutationBatch(E,x)))})(n,i,t,u).next((()=>u.apply(i))).next((()=>n.mutationQueue.performConsistencyCheck(i))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(i,o,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(y){let E=le();for(let T=0;T<y.mutationResults.length;++T)y.mutationResults[T].transformResults.length>0&&(E=E.add(y.batch.mutations[T].key));return E})(t)))).next((()=>n.localDocuments.getDocuments(i,o)))}))}function jw(s){const t=Xt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function yC(s,t){const n=Xt(s),i=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const m=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const y=[];t.targetChanges.forEach(((S,x)=>{const N=o.get(x);if(!N)return;y.push(n.Pi.removeMatchingKeys(u,S.removedDocuments,x).next((()=>n.Pi.addMatchingKeys(u,S.addedDocuments,x))));let V=N.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(x)!==null?V=V.withResumeToken(tr.EMPTY_BYTE_STRING,Yt.min()).withLastLimboFreeSnapshotVersion(Yt.min()):S.resumeToken.approximateByteSize()>0&&(V=V.withResumeToken(S.resumeToken,i)),o=o.insert(x,V),(function(Z,ot,bt){return Z.resumeToken.approximateByteSize()===0||ot.snapshotVersion.toMicroseconds()-Z.snapshotVersion.toMicroseconds()>=dC?!0:bt.addedDocuments.size+bt.modifiedDocuments.size+bt.removedDocuments.size>0})(N,V,S)&&y.push(n.Pi.updateTargetData(u,V))}));let E=$a(),T=le();if(t.documentUpdates.forEach((S=>{t.resolvedLimboDocuments.has(S)&&y.push(n.persistence.referenceDelegate.updateLimboDocument(u,S))})),y.push(_C(u,m,t.documentUpdates).next((S=>{E=S.ks,T=S.qs}))),!i.isEqual(Yt.min())){const S=n.Pi.getLastRemoteSnapshotVersion(u).next((x=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,i)));y.push(S)}return ft.waitFor(y).next((()=>m.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,E,T))).next((()=>E))})).then((u=>(n.Ms=o,u)))}function _C(s,t,n){let i=le(),o=le();return n.forEach((u=>i=i.add(u))),t.getEntries(s,i).next((u=>{let m=$a();return n.forEach(((y,E)=>{const T=u.get(y);E.isFoundDocument()!==T.isFoundDocument()&&(o=o.add(y)),E.isNoDocument()&&E.version.isEqual(Yt.min())?(t.removeEntry(y,E.readTime),m=m.insert(y,E)):!T.isValidDocument()||E.version.compareTo(T.version)>0||E.version.compareTo(T.version)===0&&T.hasPendingWrites?(t.addEntry(E),m=m.insert(y,E)):St(ly,"Ignoring outdated watch update for ",y,". Current version:",T.version," Watch version:",E.version)})),{ks:m,qs:o}}))}function vC(s,t){const n=Xt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(i=>(t===void 0&&(t=Yg),n.mutationQueue.getNextMutationBatchAfterBatchId(i,t))))}function EC(s,t){const n=Xt(s);return n.persistence.runTransaction("Allocate target","readwrite",(i=>{let o;return n.Pi.getTargetData(i,t).next((u=>u?(o=u,ft.resolve(o)):n.Pi.allocateTargetId(i).next((m=>(o=new Do(t,m,"TargetPurposeListen",i.currentSequenceNumber),n.Pi.addTargetData(i,o).next((()=>o)))))))})).then((i=>{const o=n.Ms.get(i.targetId);return(o===null||i.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(i.targetId,i),n.xs.set(t,i.targetId)),i}))}async function pg(s,t,n){const i=Xt(s),o=i.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",u,(m=>i.persistence.referenceDelegate.removeTarget(m,o)))}catch(m){if(!sc(m))throw m;St(ly,`Failed to update sequence numbers for target ${t}: ${m}`)}i.Ms=i.Ms.remove(t),i.xs.delete(o.target)}function gE(s,t,n){const i=Xt(s);let o=Yt.min(),u=le();return i.persistence.runTransaction("Execute query","readwrite",(m=>(function(E,T,S){const x=Xt(E),N=x.xs.get(S);return N!==void 0?ft.resolve(x.Ms.get(N)):x.Pi.getTargetData(T,S)})(i,m,zs(t)).next((y=>{if(y)return o=y.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(m,y.targetId).next((E=>{u=E}))})).next((()=>i.Fs.getDocumentsMatchingQuery(m,t,n?o:Yt.min(),n?u:le()))).next((y=>(TC(i,aI(t),y),{documents:y,Qs:u})))))}function TC(s,t,n){let i=s.Os.get(t)||Yt.min();n.forEach(((o,u)=>{u.readTime.compareTo(i)>0&&(i=u.readTime)})),s.Os.set(t,i)}class yE{constructor(){this.activeTargetIds=hI()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class wC{constructor(){this.Mo=new yE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,i){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,i){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new yE,Promise.resolve()}handleUserChange(t,n,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _E="ConnectivityMonitor";class vE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){St(_E,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){St(_E,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh=null;function gg(){return Kh===null?Kh=(function(){return 268435456+Math.round(2147483648*Math.random())})():Kh++,"0x"+Kh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Np="RestConnection",AC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class SC{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${i}/databases/${o}`,this.Wo=this.databaseId.database===ig?`project_id=${i}`:`project_id=${i}&database_id=${o}`}Go(t,n,i,o,u){const m=gg(),y=this.zo(t,n.toUriEncodedString());St(Np,`Sending RPC '${t}' ${m}:`,y,i);const E={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(E,o,u);const{host:T}=new URL(y),S=qg(T);return this.Jo(t,y,E,i,S).then((x=>(St(Np,`Received RPC '${t}' ${m}: `,x),x)),(x=>{throw Xu(Np,`RPC '${t}' ${m} failed with error: `,x,"url: ",y,"request:",i),x}))}Ho(t,n,i,o,u,m){return this.Go(t,n,i,o,u)}jo(t,n,i){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+rc})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>t[u]=o)),i&&i.headers.forEach(((o,u)=>t[u]=o))}zo(t,n){const i=AC[t];return`${this.Uo}/v1/${n}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="WebChannelConnection";class IC extends SC{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,i,o,u){const m=gg();return new Promise(((y,E)=>{const T=new HT;T.setWithCredentials(!0),T.listenOnce(FT.COMPLETE,(()=>{try{switch(T.getLastErrorCode()){case rd.NO_ERROR:const x=T.getResponseJson();St(hr,`XHR for RPC '${t}' ${m} received:`,JSON.stringify(x)),y(x);break;case rd.TIMEOUT:St(hr,`RPC '${t}' ${m} timed out`),E(new Rt(ut.DEADLINE_EXCEEDED,"Request time out"));break;case rd.HTTP_ERROR:const N=T.getStatus();if(St(hr,`RPC '${t}' ${m} failed with status:`,N,"response text:",T.getResponseText()),N>0){let V=T.getResponseJson();Array.isArray(V)&&(V=V[0]);const tt=V?.error;if(tt&&tt.status&&tt.message){const Z=(function(bt){const pt=bt.toLowerCase().replace(/_/g,"-");return Object.values(ut).indexOf(pt)>=0?pt:ut.UNKNOWN})(tt.status);E(new Rt(Z,tt.message))}else E(new Rt(ut.UNKNOWN,"Server responded with status "+T.getStatus()))}else E(new Rt(ut.UNAVAILABLE,"Connection failed."));break;default:zt(9055,{l_:t,streamId:m,h_:T.getLastErrorCode(),P_:T.getLastError()})}}finally{St(hr,`RPC '${t}' ${m} completed.`)}}));const S=JSON.stringify(o);St(hr,`RPC '${t}' ${m} sending request:`,o),T.send(n,"POST",S,i,15)}))}T_(t,n,i){const o=gg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],m=QT(),y=GT(),E={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},T=this.longPollingOptions.timeoutSeconds;T!==void 0&&(E.longPollingTimeout=Math.round(1e3*T)),this.useFetchStreams&&(E.useFetchStreams=!0),this.jo(E.initMessageHeaders,n,i),E.encodeInitMessageHeaders=!0;const S=u.join("");St(hr,`Creating RPC '${t}' stream ${o}: ${S}`,E);const x=m.createWebChannel(S,E);this.I_(x);let N=!1,V=!1;const tt=new RC({Yo:ot=>{V?St(hr,`Not sending because RPC '${t}' stream ${o} is closed:`,ot):(N||(St(hr,`Opening RPC '${t}' stream ${o} transport.`),x.open(),N=!0),St(hr,`RPC '${t}' stream ${o} sending:`,ot),x.send(ot))},Zo:()=>x.close()}),Z=(ot,bt,pt)=>{ot.listen(bt,(wt=>{try{pt(wt)}catch(Et){setTimeout((()=>{throw Et}),0)}}))};return Z(x,sf.EventType.OPEN,(()=>{V||(St(hr,`RPC '${t}' stream ${o} transport opened.`),tt.o_())})),Z(x,sf.EventType.CLOSE,(()=>{V||(V=!0,St(hr,`RPC '${t}' stream ${o} transport closed`),tt.a_(),this.E_(x))})),Z(x,sf.EventType.ERROR,(ot=>{V||(V=!0,Xu(hr,`RPC '${t}' stream ${o} transport errored. Name:`,ot.name,"Message:",ot.message),tt.a_(new Rt(ut.UNAVAILABLE,"The operation could not be completed")))})),Z(x,sf.EventType.MESSAGE,(ot=>{if(!V){const bt=ot.data[0];Re(!!bt,16349);const pt=bt,wt=pt?.error||pt[0]?.error;if(wt){St(hr,`RPC '${t}' stream ${o} received error:`,wt);const Et=wt.status;let Dt=(function(O){const M=_n[O];if(M!==void 0)return Iw(M)})(Et),Mt=wt.message;Dt===void 0&&(Dt=ut.INTERNAL,Mt="Unknown error status: "+Et+" with message "+wt.message),V=!0,tt.a_(new Rt(Dt,Mt)),x.close()}else St(hr,`RPC '${t}' stream ${o} received:`,bt),tt.u_(bt)}})),Z(y,$T.STAT_EVENT,(ot=>{ot.stat===ng.PROXY?St(hr,`RPC '${t}' stream ${o} detected buffering proxy`):ot.stat===ng.NOPROXY&&St(hr,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{tt.__()}),0),tt}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function Mp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jd(s){return new OI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(t,n,i=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=i,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-i);o>0&&St("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="PersistentStream";class qw{constructor(t,n,i,o,u,m,y,E){this.Mi=t,this.S_=i,this.b_=o,this.connection=u,this.authCredentialsProvider=m,this.appCheckCredentialsProvider=y,this.listener=E,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new zw(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===ut.RESOURCE_EXHAUSTED?(Fa(n.toString()),Fa("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===ut.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,o])=>{this.D_===n&&this.G_(i,o)}),(i=>{t((()=>{const o=new Rt(ut.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(o)}))}))}G_(t,n){const i=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{i((()=>this.z_(o)))})),this.stream.onMessage((o=>{i((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return St(EE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(St(EE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class CC extends qw{constructor(t,n,i,o,u,m){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,i,o,m),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=VI(this.serializer,t),i=(function(u){if(!("targetChange"in u))return Yt.min();const m=u.targetChange;return m.targetIds&&m.targetIds.length?Yt.min():m.readTime?Hs(m.readTime):Yt.min()})(t);return this.listener.H_(n,i)}Y_(t){const n={};n.database=mg(this.serializer),n.addTarget=(function(u,m){let y;const E=m.target;if(y=lg(E)?{documents:kI(u,E)}:{query:LI(u,E).ft},y.targetId=m.targetId,m.resumeToken.approximateByteSize()>0){y.resumeToken=Dw(u,m.resumeToken);const T=fg(u,m.expectedCount);T!==null&&(y.expectedCount=T)}else if(m.snapshotVersion.compareTo(Yt.min())>0){y.readTime=Cd(u,m.snapshotVersion.toTimestamp());const T=fg(u,m.expectedCount);T!==null&&(y.expectedCount=T)}return y})(this.serializer,t);const i=jI(this.serializer,t);i&&(n.labels=i),this.q_(n)}Z_(t){const n={};n.database=mg(this.serializer),n.removeTarget=t,this.q_(n)}}class xC extends qw{constructor(t,n,i,o,u,m){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,i,o,m),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return Re(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,Re(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){Re(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=UI(t.writeResults,t.commitTime),i=Hs(t.commitTime);return this.listener.na(i,n)}ra(){const t={};t.database=mg(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((i=>PI(this.serializer,i)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{}class OC extends DC{constructor(t,n,i,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=i,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new Rt(ut.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,m])=>this.connection.Go(t,hg(n,i),o,u,m))).catch((u=>{throw u.name==="FirebaseError"?(u.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Rt(ut.UNKNOWN,u.toString())}))}Ho(t,n,i,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([m,y])=>this.connection.Ho(t,hg(n,i),o,m,y,u))).catch((m=>{throw m.name==="FirebaseError"?(m.code===ut.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Rt(ut.UNKNOWN,m.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class NC{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Fa(n),this.aa=!1):St("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl="RemoteStore";class MC{constructor(t,n,i,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((m=>{i.enqueueAndForget((async()=>{Ql(this)&&(St(jl,"Restarting streams for network reachability change."),await(async function(E){const T=Xt(E);T.Ea.add(4),await qf(T),T.Ra.set("Unknown"),T.Ea.delete(4),await Wd(T)})(this))}))})),this.Ra=new NC(i,o)}}async function Wd(s){if(Ql(s))for(const t of s.da)await t(!0)}async function qf(s){for(const t of s.da)await t(!1)}function Hw(s,t){const n=Xt(s);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),hy(n)?fy(n):ac(n).O_()&&cy(n,t))}function uy(s,t){const n=Xt(s),i=ac(n);n.Ia.delete(t),i.O_()&&Fw(n,t),n.Ia.size===0&&(i.O_()?i.L_():Ql(n)&&n.Ra.set("Unknown"))}function cy(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Yt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}ac(s).Y_(t)}function Fw(s,t){s.Va.Ue(t),ac(s).Z_(t)}function fy(s){s.Va=new II({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),ac(s).start(),s.Ra.ua()}function hy(s){return Ql(s)&&!ac(s).x_()&&s.Ia.size>0}function Ql(s){return Xt(s).Ea.size===0}function $w(s){s.Va=void 0}async function VC(s){s.Ra.set("Online")}async function PC(s){s.Ia.forEach(((t,n)=>{cy(s,t)}))}async function UC(s,t){$w(s),hy(s)?(s.Ra.ha(t),fy(s)):s.Ra.set("Unknown")}async function kC(s,t,n){if(s.Ra.set("Online"),t instanceof xw&&t.state===2&&t.cause)try{await(async function(o,u){const m=u.cause;for(const y of u.targetIds)o.Ia.has(y)&&(await o.remoteSyncer.rejectListen(y,m),o.Ia.delete(y),o.Va.removeTarget(y))})(s,t)}catch(i){St(jl,"Failed to remove targets %s: %s ",t.targetIds.join(","),i),await Dd(s,i)}else if(t instanceof od?s.Va.Ze(t):t instanceof Cw?s.Va.st(t):s.Va.tt(t),!n.isEqual(Yt.min()))try{const i=await jw(s.localStore);n.compareTo(i)>=0&&await(function(u,m){const y=u.Va.Tt(m);return y.targetChanges.forEach(((E,T)=>{if(E.resumeToken.approximateByteSize()>0){const S=u.Ia.get(T);S&&u.Ia.set(T,S.withResumeToken(E.resumeToken,m))}})),y.targetMismatches.forEach(((E,T)=>{const S=u.Ia.get(E);if(!S)return;u.Ia.set(E,S.withResumeToken(tr.EMPTY_BYTE_STRING,S.snapshotVersion)),Fw(u,E);const x=new Do(S.target,E,T,S.sequenceNumber);cy(u,x)})),u.remoteSyncer.applyRemoteEvent(y)})(s,n)}catch(i){St(jl,"Failed to raise snapshot:",i),await Dd(s,i)}}async function Dd(s,t,n){if(!sc(t))throw t;s.Ea.add(1),await qf(s),s.Ra.set("Offline"),n||(n=()=>jw(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{St(jl,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await Wd(s)}))}function Gw(s,t){return t().catch((n=>Dd(s,n,t)))}async function tm(s){const t=Xt(s),n=qo(t);let i=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Yg;for(;LC(t);)try{const o=await vC(t.localStore,i);if(o===null){t.Ta.length===0&&n.L_();break}i=o.batchId,BC(t,o)}catch(o){await Dd(t,o)}Qw(t)&&Yw(t)}function LC(s){return Ql(s)&&s.Ta.length<10}function BC(s,t){s.Ta.push(t);const n=qo(s);n.O_()&&n.X_&&n.ea(t.mutations)}function Qw(s){return Ql(s)&&!qo(s).x_()&&s.Ta.length>0}function Yw(s){qo(s).start()}async function jC(s){qo(s).ra()}async function zC(s){const t=qo(s);for(const n of s.Ta)t.ea(n.mutations)}async function qC(s,t,n){const i=s.Ta.shift(),o=ny.from(i,t,n);await Gw(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await tm(s)}async function HC(s,t){t&&qo(s).X_&&await(async function(i,o){if((function(m){return AI(m)&&m!==ut.ABORTED})(o.code)){const u=i.Ta.shift();qo(i).B_(),await Gw(i,(()=>i.remoteSyncer.rejectFailedWrite(u.batchId,o))),await tm(i)}})(s,t),Qw(s)&&Yw(s)}async function TE(s,t){const n=Xt(s);n.asyncQueue.verifyOperationInProgress(),St(jl,"RemoteStore received new credentials");const i=Ql(n);n.Ea.add(3),await qf(n),i&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await Wd(n)}async function FC(s,t){const n=Xt(s);t?(n.Ea.delete(2),await Wd(n)):t||(n.Ea.add(2),await qf(n),n.Ra.set("Unknown"))}function ac(s){return s.ma||(s.ma=(function(n,i,o){const u=Xt(n);return u.sa(),new CC(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:VC.bind(null,s),t_:PC.bind(null,s),r_:UC.bind(null,s),H_:kC.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),hy(s)?fy(s):s.Ra.set("Unknown")):(await s.ma.stop(),$w(s))}))),s.ma}function qo(s){return s.fa||(s.fa=(function(n,i,o){const u=Xt(n);return u.sa(),new xC(i,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:jC.bind(null,s),r_:HC.bind(null,s),ta:zC.bind(null,s),na:qC.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await tm(s)):(await s.fa.stop(),s.Ta.length>0&&(St(jl,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dy{constructor(t,n,i,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=i,this.op=o,this.removalCallback=u,this.deferred=new Vo,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((m=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,i,o,u){const m=Date.now()+i,y=new dy(t,n,m,o,u);return y.start(i),y}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Rt(ut.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function my(s,t){if(Fa("AsyncQueue",`${t}: ${s}`),sc(s))return new Rt(ut.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{static emptySet(t){return new Ku(t.comparator)}constructor(t){this.comparator=t?(n,i)=>t(n,i)||Vt.comparator(n.key,i.key):(n,i)=>Vt.comparator(n.key,i.key),this.keyedMap=af(),this.sortedSet=new Qe(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,i)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ku)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=i.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const i=new Ku;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=n,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wE{constructor(){this.ga=new Qe(Vt.comparator)}track(t){const n=t.doc.key,i=this.ga.get(n);i?t.type!==0&&i.type===3?this.ga=this.ga.insert(n,t):t.type===3&&i.type!==1?this.ga=this.ga.insert(n,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.ga=this.ga.remove(n):t.type===1&&i.type===2?this.ga=this.ga.insert(n,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):zt(63341,{Rt:t,pa:i}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,i)=>{t.push(i)})),t}}class ec{constructor(t,n,i,o,u,m,y,E,T){this.query=t,this.docs=n,this.oldDocs=i,this.docChanges=o,this.mutatedKeys=u,this.fromCache=m,this.syncStateChanged=y,this.excludesMetadataChanges=E,this.hasCachedResults=T}static fromInitialDocuments(t,n,i,o,u){const m=[];return n.forEach((y=>{m.push({type:0,doc:y})})),new ec(t,n,Ku.emptySet(n),m,i,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Qd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,i=t.docChanges;if(n.length!==i.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==i[o].type||!n[o].doc.isEqual(i[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class GC{constructor(){this.queries=bE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,i){const o=Xt(n),u=o.queries;o.queries=bE(),u.forEach(((m,y)=>{for(const E of y.Sa)E.onError(i)}))})(this,new Rt(ut.ABORTED,"Firestore shutting down"))}}function bE(){return new $l((s=>pw(s)),Qd)}async function Kw(s,t){const n=Xt(s);let i=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(i=2):(u=new $C,i=t.Da()?0:1);try{switch(i){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(m){const y=my(m,`Initialization of query '${zu(t.query)}' failed`);return void t.onError(y)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&py(n)}async function Xw(s,t){const n=Xt(s),i=t.query;let o=3;const u=n.queries.get(i);if(u){const m=u.Sa.indexOf(t);m>=0&&(u.Sa.splice(m,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(i),n.onUnlisten(i,!0);case 1:return n.queries.delete(i),n.onUnlisten(i,!1);case 2:return n.onLastRemoteStoreUnlisten(i);default:return}}function QC(s,t){const n=Xt(s);let i=!1;for(const o of t){const u=o.query,m=n.queries.get(u);if(m){for(const y of m.Sa)y.Fa(o)&&(i=!0);m.wa=o}}i&&py(n)}function YC(s,t,n){const i=Xt(s),o=i.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);i.queries.delete(t)}function py(s){s.Ca.forEach((t=>{t.next()}))}var yg,AE;(AE=yg||(yg={})).Ma="default",AE.Cache="cache";class Zw{constructor(t,n,i){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(t){if(!this.options.includeMetadataChanges){const i=[];for(const o of t.docChanges)o.type!==3&&i.push(o);t=new ec(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const i=n!=="Offline";return(!this.options.qa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=ec.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==yg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(t){this.key=t}}class Ww{constructor(t){this.key=t}}class KC{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=le(),this.mutatedKeys=le(),this.eu=gw(t),this.tu=new Ku(this.eu)}get nu(){return this.Ya}ru(t,n){const i=n?n.iu:new wE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,m=o,y=!1;const E=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,T=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((S,x)=>{const N=o.get(S),V=Yd(this.query,x)?x:null,tt=!!N&&this.mutatedKeys.has(N.key),Z=!!V&&(V.hasLocalMutations||this.mutatedKeys.has(V.key)&&V.hasCommittedMutations);let ot=!1;N&&V?N.data.isEqual(V.data)?tt!==Z&&(i.track({type:3,doc:V}),ot=!0):this.su(N,V)||(i.track({type:2,doc:V}),ot=!0,(E&&this.eu(V,E)>0||T&&this.eu(V,T)<0)&&(y=!0)):!N&&V?(i.track({type:0,doc:V}),ot=!0):N&&!V&&(i.track({type:1,doc:N}),ot=!0,(E||T)&&(y=!0)),ot&&(V?(m=m.add(V),u=Z?u.add(S):u.delete(S)):(m=m.delete(S),u=u.delete(S)))})),this.query.limit!==null)for(;m.size>this.query.limit;){const S=this.query.limitType==="F"?m.last():m.first();m=m.delete(S.key),u=u.delete(S.key),i.track({type:1,doc:S})}return{tu:m,iu:i,Cs:y,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,i,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const m=t.iu.ya();m.sort(((S,x)=>(function(V,tt){const Z=ot=>{switch(ot){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zt(20277,{Rt:ot})}};return Z(V)-Z(tt)})(S.type,x.type)||this.eu(S.doc,x.doc))),this.ou(i),o=o??!1;const y=n&&!o?this._u():[],E=this.Xa.size===0&&this.current&&!o?1:0,T=E!==this.Za;return this.Za=E,m.length!==0||T?{snapshot:new ec(this.query,t.tu,u,m,t.mutatedKeys,E===0,T,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:y}:{au:y}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new wE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=le(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const n=[];return t.forEach((i=>{this.Xa.has(i)||n.push(new Ww(i))})),this.Xa.forEach((i=>{t.has(i)||n.push(new Jw(i))})),n}cu(t){this.Ya=t.Qs,this.Xa=le();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return ec.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const gy="SyncEngine";class XC{constructor(t,n,i){this.query=t,this.targetId=n,this.view=i}}class ZC{constructor(t){this.key=t,this.hu=!1}}class JC{constructor(t,n,i,o,u,m){this.localStore=t,this.remoteStore=n,this.eventManager=i,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=m,this.Pu={},this.Tu=new $l((y=>pw(y)),Qd),this.Iu=new Map,this.Eu=new Set,this.du=new Qe(Vt.comparator),this.Au=new Map,this.Ru=new sy,this.Vu={},this.mu=new Map,this.fu=tc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function WC(s,t,n=!0){const i=sb(s);let o;const u=i.Tu.get(t);return u?(i.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await tb(i,t,n,!0),o}async function tx(s,t){const n=sb(s);await tb(n,t,!0,!1)}async function tb(s,t,n,i){const o=await EC(s.localStore,zs(t)),u=o.targetId,m=s.sharedClientState.addLocalQueryTarget(u,n);let y;return i&&(y=await ex(s,t,u,m==="current",o.resumeToken)),s.isPrimaryClient&&n&&Hw(s.remoteStore,o),y}async function ex(s,t,n,i,o){s.pu=(x,N,V)=>(async function(Z,ot,bt,pt){let wt=ot.view.ru(bt);wt.Cs&&(wt=await gE(Z.localStore,ot.query,!1).then((({documents:z})=>ot.view.ru(z,wt))));const Et=pt&&pt.targetChanges.get(ot.targetId),Dt=pt&&pt.targetMismatches.get(ot.targetId)!=null,Mt=ot.view.applyChanges(wt,Z.isPrimaryClient,Et,Dt);return RE(Z,ot.targetId,Mt.au),Mt.snapshot})(s,x,N,V);const u=await gE(s.localStore,t,!0),m=new KC(t,u.Qs),y=m.ru(u.documents),E=zf.createSynthesizedTargetChangeForCurrentChange(n,i&&s.onlineState!=="Offline",o),T=m.applyChanges(y,s.isPrimaryClient,E);RE(s,n,T.au);const S=new XC(t,n,m);return s.Tu.set(t,S),s.Iu.has(n)?s.Iu.get(n).push(t):s.Iu.set(n,[t]),T.snapshot}async function nx(s,t,n){const i=Xt(s),o=i.Tu.get(t),u=i.Iu.get(o.targetId);if(u.length>1)return i.Iu.set(o.targetId,u.filter((m=>!Qd(m,t)))),void i.Tu.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(o.targetId),i.sharedClientState.isActiveQueryTarget(o.targetId)||await pg(i.localStore,o.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(o.targetId),n&&uy(i.remoteStore,o.targetId),_g(i,o.targetId)})).catch(ic)):(_g(i,o.targetId),await pg(i.localStore,o.targetId,!0))}async function rx(s,t){const n=Xt(s),i=n.Tu.get(t),o=n.Iu.get(i.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(i.targetId),uy(n.remoteStore,i.targetId))}async function ix(s,t,n){const i=fx(s);try{const o=await(function(m,y){const E=Xt(m),T=Be.now(),S=y.reduce(((V,tt)=>V.add(tt.key)),le());let x,N;return E.persistence.runTransaction("Locally write mutations","readwrite",(V=>{let tt=$a(),Z=le();return E.Ns.getEntries(V,S).next((ot=>{tt=ot,tt.forEach(((bt,pt)=>{pt.isValidDocument()||(Z=Z.add(bt))}))})).next((()=>E.localDocuments.getOverlayedDocuments(V,tt))).next((ot=>{x=ot;const bt=[];for(const pt of y){const wt=vI(pt,x.get(pt.key).overlayedDocument);wt!=null&&bt.push(new Gl(pt.key,wt,ow(wt.value.mapValue),qs.exists(!0)))}return E.mutationQueue.addMutationBatch(V,T,bt,y)})).next((ot=>{N=ot;const bt=ot.applyToLocalDocumentSet(x,Z);return E.documentOverlayCache.saveOverlays(V,ot.batchId,bt)}))})).then((()=>({batchId:N.batchId,changes:_w(x)})))})(i.localStore,t);i.sharedClientState.addPendingMutation(o.batchId),(function(m,y,E){let T=m.Vu[m.currentUser.toKey()];T||(T=new Qe(oe)),T=T.insert(y,E),m.Vu[m.currentUser.toKey()]=T})(i,o.batchId,n),await Hf(i,o.changes),await tm(i.remoteStore)}catch(o){const u=my(o,"Failed to persist write");n.reject(u)}}async function eb(s,t){const n=Xt(s);try{const i=await yC(n.localStore,t);t.targetChanges.forEach(((o,u)=>{const m=n.Au.get(u);m&&(Re(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?m.hu=!0:o.modifiedDocuments.size>0?Re(m.hu,14607):o.removedDocuments.size>0&&(Re(m.hu,42227),m.hu=!1))})),await Hf(n,i,t)}catch(i){await ic(i)}}function SE(s,t,n){const i=Xt(s);if(i.isPrimaryClient&&n===0||!i.isPrimaryClient&&n===1){const o=[];i.Tu.forEach(((u,m)=>{const y=m.view.va(t);y.snapshot&&o.push(y.snapshot)})),(function(m,y){const E=Xt(m);E.onlineState=y;let T=!1;E.queries.forEach(((S,x)=>{for(const N of x.Sa)N.va(y)&&(T=!0)})),T&&py(E)})(i.eventManager,t),o.length&&i.Pu.H_(o),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function sx(s,t,n){const i=Xt(s);i.sharedClientState.updateQueryState(t,"rejected",n);const o=i.Au.get(t),u=o&&o.key;if(u){let m=new Qe(Vt.comparator);m=m.insert(u,pr.newNoDocument(u,Yt.min()));const y=le().add(u),E=new Zd(Yt.min(),new Map,new Qe(oe),m,y);await eb(i,E),i.du=i.du.remove(u),i.Au.delete(t),yy(i)}else await pg(i.localStore,t,!1).then((()=>_g(i,t,n))).catch(ic)}async function ax(s,t){const n=Xt(s),i=t.batch.batchId;try{const o=await gC(n.localStore,t);rb(n,i,null),nb(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Hf(n,o)}catch(o){await ic(o)}}async function ox(s,t,n){const i=Xt(s);try{const o=await(function(m,y){const E=Xt(m);return E.persistence.runTransaction("Reject batch","readwrite-primary",(T=>{let S;return E.mutationQueue.lookupMutationBatch(T,y).next((x=>(Re(x!==null,37113),S=x.keys(),E.mutationQueue.removeMutationBatch(T,x)))).next((()=>E.mutationQueue.performConsistencyCheck(T))).next((()=>E.documentOverlayCache.removeOverlaysForBatchId(T,S,y))).next((()=>E.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(T,S))).next((()=>E.localDocuments.getDocuments(T,S)))}))})(i.localStore,t);rb(i,t,n),nb(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await Hf(i,o)}catch(o){await ic(o)}}function nb(s,t){(s.mu.get(t)||[]).forEach((n=>{n.resolve()})),s.mu.delete(t)}function rb(s,t,n){const i=Xt(s);let o=i.Vu[i.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),i.Vu[i.currentUser.toKey()]=o}}function _g(s,t,n=null){s.sharedClientState.removeLocalQueryTarget(t);for(const i of s.Iu.get(t))s.Tu.delete(i),n&&s.Pu.yu(i,n);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((i=>{s.Ru.containsKey(i)||ib(s,i)}))}function ib(s,t){s.Eu.delete(t.path.canonicalString());const n=s.du.get(t);n!==null&&(uy(s.remoteStore,n),s.du=s.du.remove(t),s.Au.delete(n),yy(s))}function RE(s,t,n){for(const i of n)i instanceof Jw?(s.Ru.addReference(i.key,t),lx(s,i)):i instanceof Ww?(St(gy,"Document no longer in limbo: "+i.key),s.Ru.removeReference(i.key,t),s.Ru.containsKey(i.key)||ib(s,i.key)):zt(19791,{wu:i})}function lx(s,t){const n=t.key,i=n.path.canonicalString();s.du.get(n)||s.Eu.has(i)||(St(gy,"New document in limbo: "+n),s.Eu.add(i),yy(s))}function yy(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const n=new Vt(Ue.fromString(t)),i=s.fu.next();s.Au.set(i,new ZC(n)),s.du=s.du.insert(n,i),Hw(s.remoteStore,new Do(zs(Wg(n.path)),i,"TargetPurposeLimboResolution",Fd.ce))}}async function Hf(s,t,n){const i=Xt(s),o=[],u=[],m=[];i.Tu.isEmpty()||(i.Tu.forEach(((y,E)=>{m.push(i.pu(E,t,n).then((T=>{if((T||n)&&i.isPrimaryClient){const S=T?!T.fromCache:n?.targetChanges.get(E.targetId)?.current;i.sharedClientState.updateQueryState(E.targetId,S?"current":"not-current")}if(T){o.push(T);const S=oy.As(E.targetId,T);u.push(S)}})))})),await Promise.all(m),i.Pu.H_(o),await(async function(E,T){const S=Xt(E);try{await S.persistence.runTransaction("notifyLocalViewChanges","readwrite",(x=>ft.forEach(T,(N=>ft.forEach(N.Es,(V=>S.persistence.referenceDelegate.addReference(x,N.targetId,V))).next((()=>ft.forEach(N.ds,(V=>S.persistence.referenceDelegate.removeReference(x,N.targetId,V)))))))))}catch(x){if(!sc(x))throw x;St(ly,"Failed to update sequence numbers: "+x)}for(const x of T){const N=x.targetId;if(!x.fromCache){const V=S.Ms.get(N),tt=V.snapshotVersion,Z=V.withLastLimboFreeSnapshotVersion(tt);S.Ms=S.Ms.insert(N,Z)}}})(i.localStore,u))}async function ux(s,t){const n=Xt(s);if(!n.currentUser.isEqual(t)){St(gy,"User change. New user:",t.toKey());const i=await Bw(n.localStore,t);n.currentUser=t,(function(u,m){u.mu.forEach((y=>{y.forEach((E=>{E.reject(new Rt(ut.CANCELLED,m))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),await Hf(n,i.Ls)}}function cx(s,t){const n=Xt(s),i=n.Au.get(t);if(i&&i.hu)return le().add(i.key);{let o=le();const u=n.Iu.get(t);if(!u)return o;for(const m of u){const y=n.Tu.get(m);o=o.unionWith(y.view.nu)}return o}}function sb(s){const t=Xt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=eb.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cx.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=sx.bind(null,t),t.Pu.H_=QC.bind(null,t.eventManager),t.Pu.yu=YC.bind(null,t.eventManager),t}function fx(s){const t=Xt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ax.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ox.bind(null,t),t}class Od{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Jd(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return pC(this.persistence,new hC,t.initialUser,this.serializer)}Cu(t){return new Lw(ay.mi,this.serializer)}Du(t){return new wC}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Od.provider={build:()=>new Od};class hx extends Od{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){Re(this.persistence.referenceDelegate instanceof xd,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new ZI(i,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?jr.withCacheSize(this.cacheSizeBytes):jr.DEFAULT;return new Lw((i=>xd.mi(i,n)),this.serializer)}}class vg{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>SE(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=ux.bind(null,this.syncEngine),await FC(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new GC})()}createDatastore(t){const n=Jd(t.databaseInfo.databaseId),i=(function(u){return new IC(u)})(t.databaseInfo);return(function(u,m,y,E){return new OC(u,m,y,E)})(t.authCredentials,t.appCheckCredentials,i,n)}createRemoteStore(t){return(function(i,o,u,m,y){return new MC(i,o,u,m,y)})(this.localStore,this.datastore,t.asyncQueue,(n=>SE(this.syncEngine,n,0)),(function(){return vE.v()?new vE:new bC})())}createSyncEngine(t,n){return(function(o,u,m,y,E,T,S){const x=new JC(o,u,m,y,E,T);return S&&(x.gu=!0),x})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const i=Xt(n);St(jl,"RemoteStore shutting down."),i.Ea.add(5),await qf(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}vg.provider={build:()=>new vg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ab{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):Fa("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="FirestoreClient";class dx{constructor(t,n,i,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=i,this.databaseInfo=o,this.user=mr.UNAUTHENTICATED,this.clientId=Qg.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(i,(async m=>{St(Ho,"Received user=",m.uid),await this.authCredentialListener(m),this.user=m})),this.appCheckCredentials.start(i,(m=>(St(Ho,"Received new app check token=",m),this.appCheckCredentialListener(m,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new Vo;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const i=my(n,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}async function Vp(s,t){s.asyncQueue.verifyOperationInProgress(),St(Ho,"Initializing OfflineComponentProvider");const n=s.configuration;await t.initialize(n);let i=n.initialUser;s.setCredentialChangeListener((async o=>{i.isEqual(o)||(await Bw(t.localStore,o),i=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function IE(s,t){s.asyncQueue.verifyOperationInProgress();const n=await mx(s);St(Ho,"Initializing OnlineComponentProvider"),await t.initialize(n,s.configuration),s.setCredentialChangeListener((i=>TE(t.remoteStore,i))),s.setAppCheckTokenChangeListener(((i,o)=>TE(t.remoteStore,o))),s._onlineComponents=t}async function mx(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){St(Ho,"Using user provided OfflineComponentProvider");try{await Vp(s,s._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(o){return o.name==="FirebaseError"?o.code===ut.FAILED_PRECONDITION||o.code===ut.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;Xu("Error using user provided cache. Falling back to memory cache: "+n),await Vp(s,new Od)}}else St(Ho,"Using default OfflineComponentProvider"),await Vp(s,new hx(void 0));return s._offlineComponents}async function ob(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(St(Ho,"Using user provided OnlineComponentProvider"),await IE(s,s._uninitializedComponentsProvider._online)):(St(Ho,"Using default OnlineComponentProvider"),await IE(s,new vg))),s._onlineComponents}function px(s){return ob(s).then((t=>t.syncEngine))}async function Eg(s){const t=await ob(s),n=t.eventManager;return n.onListen=WC.bind(null,t.syncEngine),n.onUnlisten=nx.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=tx.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=rx.bind(null,t.syncEngine),n}function gx(s,t,n={}){const i=new Vo;return s.asyncQueue.enqueueAndForget((async()=>(function(u,m,y,E,T){const S=new ab({next:N=>{S.Nu(),m.enqueueAndForget((()=>Xw(u,x))),N.fromCache&&E.source==="server"?T.reject(new Rt(ut.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):T.resolve(N)},error:N=>T.reject(N)}),x=new Zw(y,S,{includeMetadataChanges:!0,qa:!0});return Kw(u,x)})(await Eg(s),s.asyncQueue,t,n,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub="firestore.googleapis.com",xE=!0;class DE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new Rt(ut.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ub,this.ssl=xE}else this.host=t.host,this.ssl=t.ssl??xE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=kw;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<KI)throw new Rt(ut.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}M2("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=lb(t.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Rt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Rt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Rt(ut.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(i,o){return i.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class em{constructor(t,n,i,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=i,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new DE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Rt(ut.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Rt(ut.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new DE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new b2;switch(i.type){case"firstParty":return new I2(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new Rt(ut.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const i=CE.get(n);i&&(St("ComponentProvider","Removing Datastore"),CE.delete(n),i.terminate())})(this),Promise.resolve()}}function yx(s,t,n,i={}){s=za(s,em);const o=qg(t),u=s._getSettings(),m={...u,emulatorOptions:s._getEmulatorOptions()},y=`${t}:${n}`;o&&(YS(`https://${y}`),JS("Firestore",!0)),u.host!==ub&&u.host!==y&&Xu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const E={...u,host:y,ssl:o,emulatorOptions:i};if(!Ed(E,m)&&(s._setSettings(E),i.mockUserToken)){let T,S;if(typeof i.mockUserToken=="string")T=i.mockUserToken,S=mr.MOCK_USER;else{T=KS(i.mockUserToken,s._app?.options.projectId);const x=i.mockUserToken.sub||i.mockUserToken.user_id;if(!x)throw new Rt(ut.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");S=new mr(x)}s._authCredentials=new A2(new KT(T,S))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yl{constructor(t,n,i){this.converter=n,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new Yl(this.firestore,t,this._query)}}class Tn{constructor(t,n,i){this.converter=n,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Po(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Tn(this.firestore,t,this._key)}toJSON(){return{type:Tn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,i){if(Lf(n,Tn._jsonSchema))return new Tn(t,i||null,new Vt(Ue.fromString(n.referencePath)))}}Tn._jsonSchemaVersion="firestore/documentReference/1.0",Tn._jsonSchema={type:En("string",Tn._jsonSchemaVersion),referencePath:En("string")};class Po extends Yl{constructor(t,n,i){super(t,n,Wg(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Tn(this.firestore,null,new Vt(t))}withConverter(t){return new Po(this.firestore,t,this._path)}}function Tg(s,t,...n){if(s=Uo(s),XT("collection","path",t),s instanceof em){const i=Ue.fromString(t,...n);return H0(i),new Po(s,null,i)}{if(!(s instanceof Tn||s instanceof Po))throw new Rt(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Ue.fromString(t,...n));return H0(i),new Po(s.firestore,null,i)}}function cb(s,t,...n){if(s=Uo(s),arguments.length===1&&(t=Qg.newId()),XT("doc","path",t),s instanceof em){const i=Ue.fromString(t,...n);return q0(i),new Tn(s,null,new Vt(i))}{if(!(s instanceof Tn||s instanceof Po))throw new Rt(ut.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=s._path.child(Ue.fromString(t,...n));return q0(i),new Tn(s.firestore,s instanceof Po?s.converter:null,new Vt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE="AsyncQueue";class NE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new zw(this,"async_queue_retry"),this._c=()=>{const i=Mp();i&&St(OE,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=t;const n=Mp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Mp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new Vo;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!sc(t))throw t;St(OE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((i=>{throw this.nc=i,this.rc=!1,Fa("INTERNAL UNHANDLED ERROR: ",ME(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=n,n}enqueueAfterDelay(t,n,i){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=dy.createAndSchedule(this,t,n,i,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&zt(47125,{Pc:ME(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,i)=>n.targetTimeMs-i.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function ME(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(s){return(function(n,i){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of i)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class nc extends em{constructor(t,n,i,o){super(t,n,i,o),this.type="firestore",this._queue=new NE,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new NE(t),this._firestoreClient=void 0,await t}}}function _x(s,t){const n=typeof s=="object"?s:c2(),i=typeof s=="string"?s:t,o=$g(n,"firestore").getImmediate({identifier:i});if(!o._initialized){const u=GS("firestore");u&&yx(o,...u)}return o}function _y(s){if(s._terminated)throw new Rt(ut.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||vx(s),s._firestoreClient}function vx(s){const t=s._freezeSettings(),n=(function(o,u,m,y){return new F2(o,u,m,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,lb(y.experimentalLongPollingOptions),y.useFetchStreams,y.isUsingEmulator)})(s._databaseId,s._app?.options.appId||"",s._persistenceKey,t);s._componentsProvider||t.localCache?._offlineComponentProvider&&t.localCache?._onlineComponentProvider&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new dx(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(s._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mi(tr.fromBase64String(t))}catch(n){throw new Rt(ut.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Mi(tr.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Mi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(Lf(t,Mi._jsonSchema))return Mi.fromBase64String(t.bytes)}}Mi._jsonSchemaVersion="firestore/bytes/1.0",Mi._jsonSchema={type:En("string",Mi._jsonSchemaVersion),bytes:En("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vy{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Rt(ut.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Wn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Rt(ut.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Rt(ut.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return oe(this._lat,t._lat)||oe(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Fs._jsonSchemaVersion}}static fromJSON(t){if(Lf(t,Fs._jsonSchema))return new Fs(t.latitude,t.longitude)}}Fs._jsonSchemaVersion="firestore/geoPoint/1.0",Fs._jsonSchema={type:En("string",Fs._jsonSchemaVersion),latitude:En("number"),longitude:En("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(i,o){if(i.length!==o.length)return!1;for(let u=0;u<i.length;++u)if(i[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:$s._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(Lf(t,$s._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new $s(t.vectorValues);throw new Rt(ut.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}$s._jsonSchemaVersion="firestore/vectorValue/1.0",$s._jsonSchema={type:En("string",$s._jsonSchemaVersion),vectorValues:En("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ex=/^__.*__$/;class Tx{constructor(t,n,i){this.data=t,this.fieldMask=n,this.fieldTransforms=i}toMutation(t,n){return this.fieldMask!==null?new Gl(t,this.data,this.fieldMask,n,this.fieldTransforms):new jf(t,this.data,n,this.fieldTransforms)}}function hb(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw zt(40011,{Ac:s})}}class Ey{constructor(t,n,i,o,u,m){this.settings=t,this.databaseId=n,this.serializer=i,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=m||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Ey({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.gc(t),i}yc(t){const n=this.path?.child(t),i=this.Vc({path:n,fc:!1});return i.Rc(),i}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Nd(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(hb(this.Ac)&&Ex.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class wx{constructor(t,n,i){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=i||Jd(t)}Cc(t,n,i,o=!1){return new Ey({Ac:t,methodName:n,Dc:i,path:Wn.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function db(s){const t=s._freezeSettings(),n=Jd(s._databaseId);return new wx(s._databaseId,!!t.ignoreUndefinedProperties,n)}function bx(s,t,n,i,o,u={}){const m=s.Cc(u.merge||u.mergeFields?2:0,t,n,o);gb("Data must be an object, but it was:",m,i);const y=mb(i,m);let E,T;if(u.merge)E=new cs(m.fieldMask),T=m.fieldTransforms;else if(u.mergeFields){const S=[];for(const x of u.mergeFields){const N=Sx(t,x,n);if(!m.contains(N))throw new Rt(ut.INVALID_ARGUMENT,`Field '${N}' is specified in your field mask but missing from your input data.`);Ix(S,N)||S.push(N)}E=new cs(S),T=m.fieldTransforms.filter((x=>E.covers(x.field)))}else E=null,T=m.fieldTransforms;return new Tx(new Ni(y),E,T)}function Ax(s,t,n,i=!1){return Ty(n,s.Cc(i?4:3,t))}function Ty(s,t){if(pb(s=Uo(s)))return gb("Unsupported field value:",t,s),mb(s,t);if(s instanceof fb)return(function(i,o){if(!hb(o.Ac))throw o.Sc(`${i._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${i._methodName}() is not currently supported inside arrays`);const u=i._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(i,o){const u=[];let m=0;for(const y of i){let E=Ty(y,o.wc(m));E==null&&(E={nullValue:"NULL_VALUE"}),u.push(E),m++}return{arrayValue:{values:u}}})(s,t)}return(function(i,o){if((i=Uo(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return dI(o.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const u=Be.fromDate(i);return{timestampValue:Cd(o.serializer,u)}}if(i instanceof Be){const u=new Be(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Cd(o.serializer,u)}}if(i instanceof Fs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Mi)return{bytesValue:Dw(o.serializer,i._byteString)};if(i instanceof Tn){const u=o.databaseId,m=i.firestore._databaseId;if(!m.isEqual(u))throw o.Sc(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:iy(i.firestore._databaseId||o.databaseId,i._key.path)}}if(i instanceof $s)return(function(m,y){return{mapValue:{fields:{[sw]:{stringValue:aw},[bd]:{arrayValue:{values:m.toArray().map((T=>{if(typeof T!="number")throw y.Sc("VectorValues must only contain numeric values.");return ty(y.serializer,T)}))}}}}}})(i,o);throw o.Sc(`Unsupported field value: ${Hd(i)}`)})(s,t)}function mb(s,t){const n={};return WT(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Fl(s,((i,o)=>{const u=Ty(o,t.mc(i));u!=null&&(n[i]=u)})),{mapValue:{fields:n}}}function pb(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Be||s instanceof Fs||s instanceof Mi||s instanceof Tn||s instanceof fb||s instanceof $s)}function gb(s,t,n){if(!pb(n)||!ZT(n)){const i=Hd(n);throw i==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+i)}}function Sx(s,t,n){if((t=Uo(t))instanceof vy)return t._internalPath;if(typeof t=="string")return yb(s,t);throw Nd("Field path arguments must be of type string or ",s,!1,void 0,n)}const Rx=new RegExp("[~\\*/\\[\\]]");function yb(s,t,n){if(t.search(Rx)>=0)throw Nd(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new vy(...t.split("."))._internalPath}catch{throw Nd(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function Nd(s,t,n,i,o){const u=i&&!i.isEmpty(),m=o!==void 0;let y=`Function ${t}() called with invalid data`;n&&(y+=" (via `toFirestore()`)"),y+=". ";let E="";return(u||m)&&(E+=" (found",u&&(E+=` in field ${i}`),m&&(E+=` in document ${o}`),E+=")"),new Rt(ut.INVALID_ARGUMENT,y+s+E)}function Ix(s,t){return s.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t,n,i,o,u){this._firestore=t,this._userDataWriter=n,this._key=i,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new Tn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new Cx(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(wy("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Cx extends _b{data(){return super.data()}}function wy(s,t){return typeof t=="string"?yb(s,t):t instanceof vy?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new Rt(ut.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class by{}class xx extends by{}function wg(s,t,...n){let i=[];t instanceof by&&i.push(t),i=i.concat(n),(function(u){const m=u.filter((E=>E instanceof Ay)).length,y=u.filter((E=>E instanceof nm)).length;if(m>1||m>0&&y>0)throw new Rt(ut.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(i);for(const o of i)s=o._apply(s);return s}class nm extends xx{constructor(t,n,i){super(),this._field=t,this._op=n,this._value=i,this.type="where"}static _create(t,n,i){return new nm(t,n,i)}_apply(t){const n=this._parse(t);return Tb(t._query,n),new Yl(t.firestore,t.converter,ug(t._query,n))}_parse(t){const n=db(t.firestore);return(function(u,m,y,E,T,S,x){let N;if(T.isKeyField()){if(S==="array-contains"||S==="array-contains-any")throw new Rt(ut.INVALID_ARGUMENT,`Invalid Query. You can't perform '${S}' queries on documentId().`);if(S==="in"||S==="not-in"){UE(x,S);const tt=[];for(const Z of x)tt.push(PE(E,u,Z));N={arrayValue:{values:tt}}}else N=PE(E,u,x)}else S!=="in"&&S!=="not-in"&&S!=="array-contains-any"||UE(x,S),N=Ax(y,m,x,S==="in"||S==="not-in");return vn.create(T,S,N)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function Eb(s,t,n){const i=t,o=wy("where",s);return nm._create(o,i,n)}class Ay extends by{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Ay(t,n)}_parse(t){const n=this._queryConstraints.map((i=>i._parse(t))).filter((i=>i.getFilters().length>0));return n.length===1?n[0]:fs.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(o,u){let m=o;const y=u.getFlattenedFilters();for(const E of y)Tb(m,E),m=ug(m,E)})(t._query,n),new Yl(t.firestore,t.converter,ug(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function PE(s,t,n){if(typeof(n=Uo(n))=="string"){if(n==="")throw new Rt(ut.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!mw(t)&&n.indexOf("/")!==-1)throw new Rt(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=t.path.child(Ue.fromString(n));if(!Vt.isDocumentKey(i))throw new Rt(ut.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return Z0(s,new Vt(i))}if(n instanceof Tn)return Z0(s,n._key);throw new Rt(ut.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hd(n)}.`)}function UE(s,t){if(!Array.isArray(s)||s.length===0)throw new Rt(ut.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Tb(s,t){const n=(function(o,u){for(const m of o)for(const y of m.getFlattenedFilters())if(u.indexOf(y.op)>=0)return y.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new Rt(ut.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Rt(ut.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class Dx{convertValue(t,n="none"){switch(zo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return hn(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(jo(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw zt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const i={};return Fl(t,((o,u)=>{i[o]=this.convertValue(u,n)})),i}convertVectorValue(t){const n=t.fields?.[bd].arrayValue?.values?.map((i=>hn(i.doubleValue)));return new $s(n)}convertGeoPoint(t){return new Fs(hn(t.latitude),hn(t.longitude))}convertArray(t,n){return(t.values||[]).map((i=>this.convertValue(i,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const i=Gd(t);return i==null?null:this.convertValue(i,n);case"estimate":return this.convertTimestamp(Nf(t));default:return null}}convertTimestamp(t){const n=Bo(t);return new Be(n.seconds,n.nanos)}convertDocumentKey(t,n){const i=Ue.fromString(t);Re(Uw(i),9688,{name:t});const o=new Mf(i.get(1),i.get(3)),u=new Vt(i.popFirst(5));return o.isEqual(n)||Fa(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ox(s,t,n){let i;return i=s?s.toFirestore(t):t,i}class lf{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class kl extends _b{constructor(t,n,i,o,u,m){super(t,n,i,o,m),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new ld(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const i=this._document.data.field(wy("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Rt(ut.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=kl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}kl._jsonSchemaVersion="firestore/documentSnapshot/1.0",kl._jsonSchema={type:En("string",kl._jsonSchemaVersion),bundleSource:En("string","DocumentSnapshot"),bundleName:En("string"),bundle:En("string")};class ld extends kl{data(t={}){return super.data(t)}}class Ll{constructor(t,n,i,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new lf(o.hasPendingWrites,o.fromCache),this.query=i}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((i=>{t.call(n,new ld(this._firestore,this._userDataWriter,i.key,i,new lf(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Rt(ut.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map((y=>{const E=new ld(o._firestore,o._userDataWriter,y.doc.key,y.doc,new lf(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);return y.doc,{type:"added",doc:E,oldIndex:-1,newIndex:m++}}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((y=>u||y.type!==3)).map((y=>{const E=new ld(o._firestore,o._userDataWriter,y.doc.key,y.doc,new lf(o._snapshot.mutatedKeys.has(y.doc.key),o._snapshot.fromCache),o.query.converter);let T=-1,S=-1;return y.type!==0&&(T=m.indexOf(y.doc.key),m=m.delete(y.doc.key)),y.type!==1&&(m=m.add(y.doc),S=m.indexOf(y.doc.key)),{type:Nx(y.type),doc:E,oldIndex:T,newIndex:S}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Rt(ut.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Ll._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Qg.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],i=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),i.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function Nx(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zt(61501,{type:s})}}Ll._jsonSchemaVersion="firestore/querySnapshot/1.0",Ll._jsonSchema={type:En("string",Ll._jsonSchemaVersion),bundleSource:En("string","QuerySnapshot"),bundleName:En("string"),bundle:En("string")};class Sy extends Dx{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mi(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Tn(this.firestore,null,n)}}function kE(s){s=za(s,Yl);const t=za(s.firestore,nc),n=_y(t),i=new Sy(t);return vb(s._query),gx(n,s._query).then((o=>new Ll(t,i,s,o)))}function bg(s,t,n){s=za(s,Tn);const i=za(s.firestore,nc),o=Ox(s.converter,t);return bb(i,[bx(db(i),"setDoc",s._key,o,s.converter!==null,n).toMutation(s._key,qs.none())])}function Mx(s){return bb(za(s.firestore,nc),[new ey(s._key,qs.none())])}function wb(s,...t){s=Uo(s);let n={includeMetadataChanges:!1,source:"default"},i=0;typeof t[i]!="object"||VE(t[i])||(n=t[i++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(VE(t[i])){const E=t[i];t[i]=E.next?.bind(E),t[i+1]=E.error?.bind(E),t[i+2]=E.complete?.bind(E)}let u,m,y;if(s instanceof Tn)m=za(s.firestore,nc),y=Wg(s._key.path),u={next:E=>{t[i]&&t[i](Vx(m,s,E))},error:t[i+1],complete:t[i+2]};else{const E=za(s,Yl);m=za(E.firestore,nc),y=E._query;const T=new Sy(m);u={next:S=>{t[i]&&t[i](new Ll(m,T,E,S))},error:t[i+1],complete:t[i+2]},vb(s._query)}return(function(T,S,x,N){const V=new ab(N),tt=new Zw(S,V,x);return T.asyncQueue.enqueueAndForget((async()=>Kw(await Eg(T),tt))),()=>{V.Nu(),T.asyncQueue.enqueueAndForget((async()=>Xw(await Eg(T),tt)))}})(_y(m),y,o,u)}function bb(s,t){return(function(i,o){const u=new Vo;return i.asyncQueue.enqueueAndForget((async()=>ix(await px(i),o,u))),u.promise})(_y(s),t)}function Vx(s,t,n){const i=n.docs.get(t._key),o=new Sy(s);return new kl(s,o,t._key,i,new lf(n.hasPendingWrites,n.fromCache),t.converter)}(function(t,n=!0){(function(o){rc=o})(u2),ko(new qa("firestore",((i,{instanceIdentifier:o,options:u})=>{const m=i.getProvider("app").getImmediate(),y=new nc(new S2(i.getProvider("auth-internal")),new C2(m,i.getProvider("app-check-internal")),(function(T,S){if(!Object.prototype.hasOwnProperty.apply(T.options,["projectId"]))throw new Rt(ut.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mf(T.options.projectId,S)})(m,o),m);return u={useFetchStreams:n,...u},y._setSettings(u),y}),"PUBLIC").setMultipleInstances(!0)),js(L0,B0,t),js(L0,B0,"esm2020")})();const Px={apiKey:"AIzaSyDnKx5QIDiqC4NzZZrfyH-OAStrUAjNS4o",authDomain:"tirc-468716.firebaseapp.com",projectId:"tirc-468716",storageBucket:"tirc-468716.firebasestorage.app",messagingSenderId:"938581311149",appId:"1:938581311149:web:78cc73bdf36aa469f2d024",measurementId:"G-E7C10TGSVP"},Ux=BT(Px),Sf=_x(Ux,"tirc-db");let ef=!1,LE=null;const Pp=document.title;function kx(){const s=t=>{if(Notification.permission==="granted"&&t.type==="comment"&&document.hidden&&!ef){console.log("notification will be send!");const n="Uusi viesti käyttäjältä: "+t.nick,i=new Notification(n,{body:t.line});LE=setInterval(()=>{document.title===Pp?document.title=n:document.title=Pp},100),ef=!0,i.addEventListener("close",()=>{ef=!1,alert("onclose event triggered!")}),i.addEventListener("click",()=>{ef=!1,alert("onclick event triggered!")})}};return dn.useEffect(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||(ef=!1,console.log("no hidden!"),clearInterval(LE),document.title=Pp)}),Notification.permission==="default"&&Notification.requestPermission()},[]),{notify:s}}const Ab=async(s,t,n)=>{const i=Date.now(),o=cb(Sf,"messages",i.toString());await bg(o,{nick:s,type:t,line:n,time:i,source:"TIRC"}),console.log("send text success!")},Sb=()=>{const s="phantomrows",[t,n]=dn.useState([]),i=JSON.stringify(t);async function o(){const m=wg(Tg(Sf,s));wb(m,y=>{const E=y.docs.map(T=>T.data());n(E)})}dn.useEffect(()=>{o()},[i]);async function u(m,y){console.log("nick is",y);const E=wg(Tg(Sf,s),Eb("nick","==",y));if(m==="idle"){(await kE(E)).forEach(async x=>{await Mx(x.ref)});return}const T=await kE(E);if(T.empty){const S=Date.now(),x=cb(Sf,s,S.toString());await bg(x,{nick:y,state:m,time:S,source:"TIRC"})}else{const S=T.docs[0].data(),x=T.docs[0].ref,N={...S,state:m};console.log("updating doc",S),await bg(x,N)}}return{phantomMessages:t,savePhantomMessage:u}},Rb=()=>{const{notify:s}=kx(),n=new Date().getTime()-24*60*60*1e3,[i,o]=dn.useState([]),[u,m]=dn.useState([]),[y,E]=dn.useState(!1);return dn.useEffect(()=>{let T=!0;const S=wg(Tg(Sf,"messages"),Eb("time",">",n)),x=wb(S,N=>{if(T){const V=N.docs.map(tt=>tt.data()).filter(tt=>tt.type!=="phantom");o(V),console.log("messaged initialization load done!"),T=!1,E(!0)}else N.docChanges().forEach(V=>{V.type==="added"&&(s(V.doc.data()),m(tt=>{const Z={...V.doc.data(),active:!0,first:tt.length==0};return[...tt,Z]}))})});return()=>x()},[]),{messages:i,activeMessages:u,sendMessage:Ab}};class BE extends jg.Component{render(){let t="",n="";return this.props.items&&this.props.items.length>0&&(t=this.props.items.length,n=this.props.items.join(", ")),It.jsxs("div",{className:"emotion",children:[It.jsx("i",{title:n,onClick:this.props.toggleEmotion,className:this.props.classNames})," ",It.jsx("small",{className:"emo_count",children:t})]})}}const Lx=()=>({t:n=>new Date(n).toLocaleString(),em:n=>{if(n)return n.replace(/:\)/g,"🙂").replace(/=\)/g,"🙂").replace(/:\(/g,"🙁").replace(/=\(/g,"🙁").replace(/:D/g,"😃").replace(/;\)/g,"😉").replace(/=D/g,"😃")},useWindowFocus:Bx}),Bx=()=>{const[s,t]=dn.useState(!1),[n,i]=dn.useState(!1);return dn.useEffect(()=>{const o=()=>{console.log("focused!"),t(!0),i(!0)},u=()=>{console.log("blurred!"),t(!1),i(!0)};window.addEventListener("focus",o),window.addEventListener("blur",u)},[s]),{focused:s,focusChanged:n}};class jx extends jg.Component{getClassName(t){return this.isJoinOrPart(t)?"joinOrPart":""}isJoinOrPart(t){return t.indexOf("has joined #")!==-1||t.indexOf("has left #")!==-1}isQuit(t){return t.indexOf("has quit ")!==-1}isMePart(t){return t.indexOf(" * ")!==-1&&t.indexOf(" has ")===-1&&t.indexOf("<")===-1&&t.indexOf(">")===-1}isActionPart(t){return t.indexOf("is known as")!==-1}parseTime(t){return t.match(/[0-9][0-9]:[0-9][0-9](:[0-9][0-9])?/g)[0]}format(t){var n=/(\b(https?|ftp|file):\/\/[\-A-Z0-9+&@#\/%?=~_|!:,.;]*[\-A-Z0-9+&@#\/%=~_|])/gi,i=t.match(n);if(i){var o=this;$(i).each(function(u,m){if(Parser.isPic(m)){var y=o.formatImage(m);t=t.replace(m,y)}else{var E=o.formatLink(m);t=t.replace(m,E)}})}return t}formatImage(t){var n='<a href="'+t+'" target="_blank"><img src="'+t+'" title="'+t+'" /></a>';return n}formatLink(t){var n='<a href="'+t+'" target="_blank">'+t+'</a><div class="selector-wrapper"></div> ';return n}generateEmotionStyle(t,n){var i=0;return t&&t.length>0&&(i+=t.length*10),n&&n.length>0&&(i-=n.length*10),"size-"+(100+i)}handleText(t){return t.indexOf("lol")>-1?t.replace("lol",' <span class="icon" style="background-position: 65% 42.5%;"></span> '):t}rendercomment(t,n,i){var o="row comment textrow";return t.nick===Qu.loadUser("taho")&&(o+=" own"),o+=" "+this.generateEmotionStyle(t.likes,t.dislikes),t.active&&(o+=" active"),t.first&&(o+=" first"),It.jsxs("div",{className:o,children:[It.jsx("div",{className:"nick columns col-md-3 col-xs-3 text-right",children:t.nick}),It.jsx("div",{className:"nicktext col-md-9 col-xs-9",children:It.jsxs("div",{className:"text",children:[It.jsx("span",{dangerouslySetInnerHTML:{__html:i(t.line)}}),It.jsx(BE,{items:t.likes,toggleEmotion:()=>this.props.toggleEmotion(t.date,!0),classNames:"glyphicon glyphicon-thumbs-up text-primary"}),It.jsx(BE,{items:t.dislikes,toggleEmotion:()=>this.props.toggleEmotion(t.date,!1),classNames:"glyphicon glyphicon-thumbs-down text-danger"}),It.jsxs("span",{className:"time small",children:[" - ",n(t.time)]})]})})]})}renderme(t){return It.jsx("div",{className:"row textrow",children:It.jsx("div",{className:"action",dangerouslySetInnerHTML:{__html:t.line+'<span class="time"> - '+t.time+"</span>"}})})}renderwelcome(t,n){return It.jsx("div",{className:"row textrow",children:It.jsx("div",{className:"action col-md-12 thumbnail",dangerouslySetInnerHTML:{__html:'<div><div class="caption" >'+t.nick+" saapui paikalle "+t.line+'</div><span class="time small"> - '+n(t.time)+"</span></div>"}})})}renderaction(t){return It.jsx("div",{className:"row textrow",children:It.jsx("div",{className:"star bg-warning col-md-12",dangerouslySetInnerHTML:{__html:t.line+'<span class="time"> - '+t.time+"</span>"}})})}renderquit(t,n){return It.jsx("div",{className:"row textrow",children:It.jsxs("div",{className:"bg-danger col-md-12 quit",children:[" ",t.nick," poistui kokonaan ircistä: ",t.line,n(t.time)]})})}renderjoin(t,n){return It.jsx("div",{className:"row textrow",children:It.jsxs("div",{className:"col-md-12 bg-info quit",children:[t.nick," saapui kanavalle - ",n(t.time)]})})}renderpart(t){return It.jsx("div",{className:"row textrow",children:It.jsxs("div",{className:"bg-warning col-md-12 quit",children:[" ",t.nick," jätti kanavan - ",t.time]})})}render(){const{t,em:n}=Lx();return this["render"+this.props.elem.type]?this["render"+this.props.elem.type](this.props.elem,t,n):(console.log("ERROR! method: render"+this.props.elem.type+" cannot be found, row: "+JSON.stringify(this.props.elem)),null)}renderlogevent(t){return It.jsx("div",{className:"textrow row logevent alert-warning",children:It.jsx("div",{className:"col-md-12",children:t.line})})}}const zx=()=>{const s=dn.useRef(null),[t,n]=dn.useState(!0),{messages:i,activeMessages:o}=Rb(),{phantomMessages:u}=Sb();dn.useEffect(()=>{const tt=s.current;tt.scrollTop=tt.scrollHeight},[i.length,u.length,o.length]);var m=i.concat(o),y=0,E="tirc_screen",T=0,S="tirc_screen_"+T,x=m.map(tt=>(y++,It.jsx(jx,{elem:tt},y))),N=u.map((tt,Z)=>It.jsx(PS,{...tt},{index:Z}));let V=x.concat(N);return It.jsx("div",{ref:s,className:E,id:S,children:V})},qx=s=>{s.tircusers.sort((i,o)=>o.time-i.time);var t=s.index,n="tirc_main_panel_middle_0";return It.jsx("div",{className:"tirc_main_panel_middle  row",id:n,children:It.jsx(zx,{scrolling:s.scrolling,scroll:s.scroll,toggleEmotion:s.toggleEmotion,index:t,connectdata:s.connectdata,currentdata:s.currentdata,activedata:s.activedata})})};function Ft(s,t,n,i,o){if(typeof t=="function"?s!==t||!0:!t.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(s,n),n}function J(s,t,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?s!==t||!i:!t.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(s):i?i.value:t.get(s)}let Ib=function(){const{crypto:s}=globalThis;if(s?.randomUUID)return Ib=s.randomUUID.bind(s),s.randomUUID();const t=new Uint8Array(1),n=s?()=>s.getRandomValues(t)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^n()&15>>+i/4).toString(16))};function Ag(s){return typeof s=="object"&&s!==null&&("name"in s&&s.name==="AbortError"||"message"in s&&String(s.message).includes("FetchRequestCanceledException"))}const Sg=s=>{if(s instanceof Error)return s;if(typeof s=="object"&&s!==null){try{if(Object.prototype.toString.call(s)==="[object Error]"){const t=new Error(s.message,s.cause?{cause:s.cause}:{});return s.stack&&(t.stack=s.stack),s.cause&&!t.cause&&(t.cause=s.cause),s.name&&(t.name=s.name),t}}catch{}try{return new Error(JSON.stringify(s))}catch{}}return new Error(s)};class jt extends Error{}class er extends jt{constructor(t,n,i,o){super(`${er.makeMessage(t,n,i)}`),this.status=t,this.headers=o,this.requestID=o?.get("x-request-id"),this.error=n;const u=n;this.code=u?.code,this.param=u?.param,this.type=u?.type}static makeMessage(t,n,i){const o=n?.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):i;return t&&o?`${t} ${o}`:t?`${t} status code (no body)`:o||"(no status code or body)"}static generate(t,n,i,o){if(!t||!o)return new rm({message:i,cause:Sg(n)});const u=n?.error;return t===400?new Cb(t,u,i,o):t===401?new xb(t,u,i,o):t===403?new Db(t,u,i,o):t===404?new Ob(t,u,i,o):t===409?new Nb(t,u,i,o):t===422?new Mb(t,u,i,o):t===429?new Vb(t,u,i,o):t>=500?new Pb(t,u,i,o):new er(t,u,i,o)}}class Vi extends er{constructor({message:t}={}){super(void 0,void 0,t||"Request was aborted.",void 0)}}class rm extends er{constructor({message:t,cause:n}){super(void 0,void 0,t||"Connection error.",void 0),n&&(this.cause=n)}}class Ry extends rm{constructor({message:t}={}){super({message:t??"Request timed out."})}}class Cb extends er{}class xb extends er{}class Db extends er{}class Ob extends er{}class Nb extends er{}class Mb extends er{}class Vb extends er{}class Pb extends er{}class Ub extends jt{constructor(){super("Could not parse response content as the length limit was reached")}}class kb extends jt{constructor(){super("Could not parse response content as the request was rejected by the content filter")}}class uf extends Error{constructor(t){super(t)}}const Hx=/^[a-z][a-z0-9+.-]*:/i,Fx=s=>Hx.test(s);let zr=s=>(zr=Array.isArray,zr(s)),jE=zr;function Lb(s){return typeof s!="object"?{}:s??{}}function $x(s){if(!s)return!0;for(const t in s)return!1;return!0}function Gx(s,t){return Object.prototype.hasOwnProperty.call(s,t)}function Up(s){return s!=null&&typeof s=="object"&&!Array.isArray(s)}const Qx=(s,t)=>{if(typeof t!="number"||!Number.isInteger(t))throw new jt(`${s} must be an integer`);if(t<0)throw new jt(`${s} must be a positive integer`);return t},Yx=s=>{try{return JSON.parse(s)}catch{return}},Ff=s=>new Promise(t=>setTimeout(t,s)),Fu="5.16.0",Kx=()=>typeof window<"u"&&typeof window.document<"u"&&typeof navigator<"u";function Xx(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const Zx=()=>{const s=Xx();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fu,"X-Stainless-OS":qE(Deno.build.os),"X-Stainless-Arch":zE(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:Deno.version?.deno??"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fu,"X-Stainless-OS":qE(globalThis.process.platform??"unknown"),"X-Stainless-Arch":zE(globalThis.process.arch??"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":globalThis.process.version??"unknown"};const t=Jx();return t?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${t.browser}`,"X-Stainless-Runtime-Version":t.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function Jx(){if(typeof navigator>"u"||!navigator)return null;const s=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:n}of s){const i=n.exec(navigator.userAgent);if(i){const o=i[1]||0,u=i[2]||0,m=i[3]||0;return{browser:t,version:`${o}.${u}.${m}`}}}return null}const zE=s=>s==="x32"?"x32":s==="x86_64"||s==="x64"?"x64":s==="arm"?"arm":s==="aarch64"||s==="arm64"?"arm64":s?`other:${s}`:"unknown",qE=s=>(s=s.toLowerCase(),s.includes("ios")?"iOS":s==="android"?"Android":s==="darwin"?"MacOS":s==="win32"?"Windows":s==="freebsd"?"FreeBSD":s==="openbsd"?"OpenBSD":s==="linux"?"Linux":s?`Other:${s}`:"Unknown");let HE;const Wx=()=>HE??(HE=Zx());function tD(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new OpenAI({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Bb(...s){const t=globalThis.ReadableStream;if(typeof t>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new t(...s)}function jb(s){let t=Symbol.asyncIterator in s?s[Symbol.asyncIterator]():s[Symbol.iterator]();return Bb({start(){},async pull(n){const{done:i,value:o}=await t.next();i?n.close():n.enqueue(o)},async cancel(){await t.return?.()}})}function zb(s){if(s[Symbol.asyncIterator])return s;const t=s.getReader();return{async next(){try{const n=await t.read();return n?.done&&t.releaseLock(),n}catch(n){throw t.releaseLock(),n}},async return(){const n=t.cancel();return t.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function eD(s){if(s===null||typeof s!="object")return;if(s[Symbol.asyncIterator]){await s[Symbol.asyncIterator]().return?.();return}const t=s.getReader(),n=t.cancel();t.releaseLock(),await n}const nD=({headers:s,body:t})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(t)}),qb="RFC3986",Hb=s=>String(s),FE={RFC1738:s=>String(s).replace(/%20/g,"+"),RFC3986:Hb},rD="RFC1738";let Rg=(s,t)=>(Rg=Object.hasOwn??Function.prototype.call.bind(Object.prototype.hasOwnProperty),Rg(s,t));const Us=(()=>{const s=[];for(let t=0;t<256;++t)s.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return s})(),kp=1024,iD=(s,t,n,i,o)=>{if(s.length===0)return s;let u=s;if(typeof s=="symbol"?u=Symbol.prototype.toString.call(s):typeof s!="string"&&(u=String(s)),n==="iso-8859-1")return escape(u).replace(/%u[0-9a-f]{4}/gi,function(y){return"%26%23"+parseInt(y.slice(2),16)+"%3B"});let m="";for(let y=0;y<u.length;y+=kp){const E=u.length>=kp?u.slice(y,y+kp):u,T=[];for(let S=0;S<E.length;++S){let x=E.charCodeAt(S);if(x===45||x===46||x===95||x===126||x>=48&&x<=57||x>=65&&x<=90||x>=97&&x<=122||o===rD&&(x===40||x===41)){T[T.length]=E.charAt(S);continue}if(x<128){T[T.length]=Us[x];continue}if(x<2048){T[T.length]=Us[192|x>>6]+Us[128|x&63];continue}if(x<55296||x>=57344){T[T.length]=Us[224|x>>12]+Us[128|x>>6&63]+Us[128|x&63];continue}S+=1,x=65536+((x&1023)<<10|E.charCodeAt(S)&1023),T[T.length]=Us[240|x>>18]+Us[128|x>>12&63]+Us[128|x>>6&63]+Us[128|x&63]}m+=T.join("")}return m};function sD(s){return!s||typeof s!="object"?!1:!!(s.constructor&&s.constructor.isBuffer&&s.constructor.isBuffer(s))}function $E(s,t){if(zr(s)){const n=[];for(let i=0;i<s.length;i+=1)n.push(t(s[i]));return n}return t(s)}const Fb={brackets(s){return String(s)+"[]"},comma:"comma",indices(s,t){return String(s)+"["+t+"]"},repeat(s){return String(s)}},$b=function(s,t){Array.prototype.push.apply(s,zr(t)?t:[t])};let GE;const Cn={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:iD,encodeValuesOnly:!1,format:qb,formatter:Hb,indices:!1,serializeDate(s){return(GE??(GE=Function.prototype.call.bind(Date.prototype.toISOString)))(s)},skipNulls:!1,strictNullHandling:!1};function aD(s){return typeof s=="string"||typeof s=="number"||typeof s=="boolean"||typeof s=="symbol"||typeof s=="bigint"}const Lp={};function Gb(s,t,n,i,o,u,m,y,E,T,S,x,N,V,tt,Z,ot,bt){let pt=s,wt=bt,Et=0,Dt=!1;for(;(wt=wt.get(Lp))!==void 0&&!Dt;){const B=wt.get(s);if(Et+=1,typeof B<"u"){if(B===Et)throw new RangeError("Cyclic object value");Dt=!0}typeof wt.get(Lp)>"u"&&(Et=0)}if(typeof T=="function"?pt=T(t,pt):pt instanceof Date?pt=N?.(pt):n==="comma"&&zr(pt)&&(pt=$E(pt,function(B){return B instanceof Date?N?.(B):B})),pt===null){if(u)return E&&!Z?E(t,Cn.encoder,ot,"key",V):t;pt=""}if(aD(pt)||sD(pt)){if(E){const B=Z?t:E(t,Cn.encoder,ot,"key",V);return[tt?.(B)+"="+tt?.(E(pt,Cn.encoder,ot,"value",V))]}return[tt?.(t)+"="+tt?.(String(pt))]}const Mt=[];if(typeof pt>"u")return Mt;let z;if(n==="comma"&&zr(pt))Z&&E&&(pt=$E(pt,E)),z=[{value:pt.length>0?pt.join(",")||null:void 0}];else if(zr(T))z=T;else{const B=Object.keys(pt);z=S?B.sort(S):B}const O=y?String(t).replace(/\./g,"%2E"):String(t),M=i&&zr(pt)&&pt.length===1?O+"[]":O;if(o&&zr(pt)&&pt.length===0)return M+"[]";for(let B=0;B<z.length;++B){const L=z[B],F=typeof L=="object"&&typeof L.value<"u"?L.value:pt[L];if(m&&F===null)continue;const P=x&&y?L.replace(/\./g,"%2E"):L,He=zr(pt)?typeof n=="function"?n(M,P):M:M+(x?"."+P:"["+P+"]");bt.set(s,Et);const Oe=new WeakMap;Oe.set(Lp,bt),$b(Mt,Gb(F,He,n,i,o,u,m,y,n==="comma"&&Z&&zr(pt)?null:E,T,S,x,N,V,tt,Z,ot,Oe))}return Mt}function oD(s=Cn){if(typeof s.allowEmptyArrays<"u"&&typeof s.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof s.encodeDotInKeys<"u"&&typeof s.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(s.encoder!==null&&typeof s.encoder<"u"&&typeof s.encoder!="function")throw new TypeError("Encoder has to be a function.");const t=s.charset||Cn.charset;if(typeof s.charset<"u"&&s.charset!=="utf-8"&&s.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");let n=qb;if(typeof s.format<"u"){if(!Rg(FE,s.format))throw new TypeError("Unknown format option provided.");n=s.format}const i=FE[n];let o=Cn.filter;(typeof s.filter=="function"||zr(s.filter))&&(o=s.filter);let u;if(s.arrayFormat&&s.arrayFormat in Fb?u=s.arrayFormat:"indices"in s?u=s.indices?"indices":"repeat":u=Cn.arrayFormat,"commaRoundTrip"in s&&typeof s.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");const m=typeof s.allowDots>"u"?s.encodeDotInKeys?!0:Cn.allowDots:!!s.allowDots;return{addQueryPrefix:typeof s.addQueryPrefix=="boolean"?s.addQueryPrefix:Cn.addQueryPrefix,allowDots:m,allowEmptyArrays:typeof s.allowEmptyArrays=="boolean"?!!s.allowEmptyArrays:Cn.allowEmptyArrays,arrayFormat:u,charset:t,charsetSentinel:typeof s.charsetSentinel=="boolean"?s.charsetSentinel:Cn.charsetSentinel,commaRoundTrip:!!s.commaRoundTrip,delimiter:typeof s.delimiter>"u"?Cn.delimiter:s.delimiter,encode:typeof s.encode=="boolean"?s.encode:Cn.encode,encodeDotInKeys:typeof s.encodeDotInKeys=="boolean"?s.encodeDotInKeys:Cn.encodeDotInKeys,encoder:typeof s.encoder=="function"?s.encoder:Cn.encoder,encodeValuesOnly:typeof s.encodeValuesOnly=="boolean"?s.encodeValuesOnly:Cn.encodeValuesOnly,filter:o,format:n,formatter:i,serializeDate:typeof s.serializeDate=="function"?s.serializeDate:Cn.serializeDate,skipNulls:typeof s.skipNulls=="boolean"?s.skipNulls:Cn.skipNulls,sort:typeof s.sort=="function"?s.sort:null,strictNullHandling:typeof s.strictNullHandling=="boolean"?s.strictNullHandling:Cn.strictNullHandling}}function lD(s,t={}){let n=s;const i=oD(t);let o,u;typeof i.filter=="function"?(u=i.filter,n=u("",n)):zr(i.filter)&&(u=i.filter,o=u);const m=[];if(typeof n!="object"||n===null)return"";const y=Fb[i.arrayFormat],E=y==="comma"&&i.commaRoundTrip;o||(o=Object.keys(n)),i.sort&&o.sort(i.sort);const T=new WeakMap;for(let N=0;N<o.length;++N){const V=o[N];i.skipNulls&&n[V]===null||$b(m,Gb(n[V],V,y,E,i.allowEmptyArrays,i.strictNullHandling,i.skipNulls,i.encodeDotInKeys,i.encode?i.encoder:null,i.filter,i.sort,i.allowDots,i.serializeDate,i.format,i.formatter,i.encodeValuesOnly,i.charset,T))}const S=m.join(i.delimiter);let x=i.addQueryPrefix===!0?"?":"";return i.charsetSentinel&&(i.charset==="iso-8859-1"?x+="utf8=%26%2310003%3B&":x+="utf8=%E2%9C%93&"),S.length>0?x+S:""}function uD(s){let t=0;for(const o of s)t+=o.length;const n=new Uint8Array(t);let i=0;for(const o of s)n.set(o,i),i+=o.length;return n}let QE;function Iy(s){let t;return(QE??(t=new globalThis.TextEncoder,QE=t.encode.bind(t)))(s)}let YE;function KE(s){let t;return(YE??(t=new globalThis.TextDecoder,YE=t.decode.bind(t)))(s)}var ui,ci;class im{constructor(){ui.set(this,void 0),ci.set(this,void 0),Ft(this,ui,new Uint8Array),Ft(this,ci,null)}decode(t){if(t==null)return[];const n=t instanceof ArrayBuffer?new Uint8Array(t):typeof t=="string"?Iy(t):t;Ft(this,ui,uD([J(this,ui,"f"),n]));const i=[];let o;for(;(o=cD(J(this,ui,"f"),J(this,ci,"f")))!=null;){if(o.carriage&&J(this,ci,"f")==null){Ft(this,ci,o.index);continue}if(J(this,ci,"f")!=null&&(o.index!==J(this,ci,"f")+1||o.carriage)){i.push(KE(J(this,ui,"f").subarray(0,J(this,ci,"f")-1))),Ft(this,ui,J(this,ui,"f").subarray(J(this,ci,"f"))),Ft(this,ci,null);continue}const u=J(this,ci,"f")!==null?o.preceding-1:o.preceding,m=KE(J(this,ui,"f").subarray(0,u));i.push(m),Ft(this,ui,J(this,ui,"f").subarray(o.index)),Ft(this,ci,null)}return i}flush(){return J(this,ui,"f").length?this.decode(`
`):[]}}ui=new WeakMap,ci=new WeakMap;im.NEWLINE_CHARS=new Set([`
`,"\r"]);im.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function cD(s,t){for(let o=t??0;o<s.length;o++){if(s[o]===10)return{preceding:o,index:o+1,carriage:!1};if(s[o]===13)return{preceding:o,index:o+1,carriage:!0}}return null}function fD(s){for(let i=0;i<s.length-1;i++){if(s[i]===10&&s[i+1]===10||s[i]===13&&s[i+1]===13)return i+2;if(s[i]===13&&s[i+1]===10&&i+3<s.length&&s[i+2]===13&&s[i+3]===10)return i+4}return-1}const Md={off:0,error:200,warn:300,info:400,debug:500},XE=(s,t,n)=>{if(s){if(Gx(Md,s))return s;Xn(n).warn(`${t} was set to ${JSON.stringify(s)}, expected one of ${JSON.stringify(Object.keys(Md))}`)}};function cf(){}function Xh(s,t,n){return!t||Md[s]>Md[n]?cf:t[s].bind(t)}const hD={error:cf,warn:cf,info:cf,debug:cf};let ZE=new WeakMap;function Xn(s){const t=s.logger,n=s.logLevel??"off";if(!t)return hD;const i=ZE.get(t);if(i&&i[0]===n)return i[1];const o={error:Xh("error",t,n),warn:Xh("warn",t,n),info:Xh("info",t,n),debug:Xh("debug",t,n)};return ZE.set(t,[n,o]),o}const Ol=s=>(s.options&&(s.options={...s.options},delete s.options.headers),s.headers&&(s.headers=Object.fromEntries((s.headers instanceof Headers?[...s.headers]:Object.entries(s.headers)).map(([t,n])=>[t,t.toLowerCase()==="authorization"||t.toLowerCase()==="cookie"||t.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in s&&(s.retryOfRequestLogID&&(s.retryOf=s.retryOfRequestLogID),delete s.retryOfRequestLogID),s);var nf;class Bs{constructor(t,n,i){this.iterator=t,nf.set(this,void 0),this.controller=n,Ft(this,nf,i)}static fromSSEResponse(t,n,i){let o=!1;const u=i?Xn(i):console;async function*m(){if(o)throw new jt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let y=!1;try{for await(const E of dD(t,n))if(!y){if(E.data.startsWith("[DONE]")){y=!0;continue}if(E.event===null||!E.event.startsWith("thread.")){let T;try{T=JSON.parse(E.data)}catch(S){throw u.error("Could not parse message into JSON:",E.data),u.error("From chunk:",E.raw),S}if(T&&T.error)throw new er(void 0,T.error,void 0,t.headers);yield T}else{let T;try{T=JSON.parse(E.data)}catch(S){throw console.error("Could not parse message into JSON:",E.data),console.error("From chunk:",E.raw),S}if(E.event=="error")throw new er(void 0,T.error,T.message,void 0);yield{event:E.event,data:T}}}y=!0}catch(E){if(Ag(E))return;throw E}finally{y||n.abort()}}return new Bs(m,n,i)}static fromReadableStream(t,n,i){let o=!1;async function*u(){const y=new im,E=zb(t);for await(const T of E)for(const S of y.decode(T))yield S;for(const T of y.flush())yield T}async function*m(){if(o)throw new jt("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");o=!0;let y=!1;try{for await(const E of u())y||E&&(yield JSON.parse(E));y=!0}catch(E){if(Ag(E))return;throw E}finally{y||n.abort()}}return new Bs(m,n,i)}[(nf=new WeakMap,Symbol.asyncIterator)](){return this.iterator()}tee(){const t=[],n=[],i=this.iterator(),o=u=>({next:()=>{if(u.length===0){const m=i.next();t.push(m),n.push(m)}return u.shift()}});return[new Bs(()=>o(t),this.controller,J(this,nf,"f")),new Bs(()=>o(n),this.controller,J(this,nf,"f"))]}toReadableStream(){const t=this;let n;return Bb({async start(){n=t[Symbol.asyncIterator]()},async pull(i){try{const{value:o,done:u}=await n.next();if(u)return i.close();const m=Iy(JSON.stringify(o)+`
`);i.enqueue(m)}catch(o){i.error(o)}},async cancel(){await n.return?.()}})}}async function*dD(s,t){if(!s.body)throw t.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new jt("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new jt("Attempted to iterate over a response with no body");const n=new pD,i=new im,o=zb(s.body);for await(const u of mD(o))for(const m of i.decode(u)){const y=n.decode(m);y&&(yield y)}for(const u of i.flush()){const m=n.decode(u);m&&(yield m)}}async function*mD(s){let t=new Uint8Array;for await(const n of s){if(n==null)continue;const i=n instanceof ArrayBuffer?new Uint8Array(n):typeof n=="string"?Iy(n):n;let o=new Uint8Array(t.length+i.length);o.set(t),o.set(i,t.length),t=o;let u;for(;(u=fD(t))!==-1;)yield t.slice(0,u),t=t.slice(u)}t.length>0&&(yield t)}class pD{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(t){if(t.endsWith("\r")&&(t=t.substring(0,t.length-1)),!t){if(!this.event&&!this.data.length)return null;const u={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],u}if(this.chunks.push(t),t.startsWith(":"))return null;let[n,i,o]=gD(t,":");return o.startsWith(" ")&&(o=o.substring(1)),n==="event"?this.event=o:n==="data"&&this.data.push(o),null}}function gD(s,t){const n=s.indexOf(t);return n!==-1?[s.substring(0,n),t,s.substring(n+t.length)]:[s,"",""]}async function Qb(s,t){const{response:n,requestLogID:i,retryOfRequestLogID:o,startTime:u}=t,m=await(async()=>{if(t.options.stream)return Xn(s).debug("response",n.status,n.url,n.headers,n.body),t.options.__streamClass?t.options.__streamClass.fromSSEResponse(n,t.controller,s):Bs.fromSSEResponse(n,t.controller,s);if(n.status===204)return null;if(t.options.__binaryResponse)return n;const E=n.headers.get("content-type")?.split(";")[0]?.trim();if(E?.includes("application/json")||E?.endsWith("+json")){const x=await n.json();return Yb(x,n)}return await n.text()})();return Xn(s).debug(`[${i}] response parsed`,Ol({retryOfRequestLogID:o,url:n.url,status:n.status,body:m,durationMs:Date.now()-u})),m}function Yb(s,t){return!s||typeof s!="object"||Array.isArray(s)?s:Object.defineProperty(s,"_request_id",{value:t.headers.get("x-request-id"),enumerable:!1})}var ff;class sm extends Promise{constructor(t,n,i=Qb){super(o=>{o(null)}),this.responsePromise=n,this.parseResponse=i,ff.set(this,void 0),Ft(this,ff,t)}_thenUnwrap(t){return new sm(J(this,ff,"f"),this.responsePromise,async(n,i)=>Yb(t(await this.parseResponse(n,i),i),i.response))}asResponse(){return this.responsePromise.then(t=>t.response)}async withResponse(){const[t,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:t,response:n,request_id:n.headers.get("x-request-id")}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(t=>this.parseResponse(J(this,ff,"f"),t))),this.parsedPromise}then(t,n){return this.parse().then(t,n)}catch(t){return this.parse().catch(t)}finally(t){return this.parse().finally(t)}}ff=new WeakMap;var Zh;class Cy{constructor(t,n,i,o){Zh.set(this,void 0),Ft(this,Zh,t),this.options=o,this.response=n,this.body=i}hasNextPage(){return this.getPaginatedItems().length?this.nextPageRequestOptions()!=null:!1}async getNextPage(){const t=this.nextPageRequestOptions();if(!t)throw new jt("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");return await J(this,Zh,"f").requestAPIList(this.constructor,t)}async*iterPages(){let t=this;for(yield t;t.hasNextPage();)t=await t.getNextPage(),yield t}async*[(Zh=new WeakMap,Symbol.asyncIterator)](){for await(const t of this.iterPages())for(const n of t.getPaginatedItems())yield n}}class yD extends sm{constructor(t,n,i){super(t,n,async(o,u)=>new i(o,u.response,await Qb(o,u),u.options))}async*[Symbol.asyncIterator](){const t=await this;for await(const n of t)yield n}}class am extends Cy{constructor(t,n,i,o){super(t,n,i,o),this.data=i.data||[],this.object=i.object}getPaginatedItems(){return this.data??[]}nextPageRequestOptions(){return null}}class wn extends Cy{constructor(t,n,i,o){super(t,n,i,o),this.data=i.data||[],this.has_more=i.has_more||!1}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.getPaginatedItems(),n=t[t.length-1]?.id;return n?{...this.options,query:{...Lb(this.options.query),after:n}}:null}}class _D extends Cy{constructor(t,n,i,o){super(t,n,i,o),this.data=i.data||[],this.has_more=i.has_more||!1,this.last_id=i.last_id||""}getPaginatedItems(){return this.data??[]}hasNextPage(){return this.has_more===!1?!1:super.hasNextPage()}nextPageRequestOptions(){const t=this.last_id;return t?{...this.options,query:{...Lb(this.options.query),after:t}}:null}}const Kb=()=>{if(typeof File>"u"){const{process:s}=globalThis,t=typeof s?.versions?.node=="string"&&parseInt(s.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(t?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function Rf(s,t,n){return Kb(),new File(s,t??"unknown_file",n)}function ud(s){return(typeof s=="object"&&s!==null&&("name"in s&&s.name&&String(s.name)||"url"in s&&s.url&&String(s.url)||"filename"in s&&s.filename&&String(s.filename)||"path"in s&&s.path&&String(s.path))||"").split(/[\\/]/).pop()||void 0}const Xb=s=>s!=null&&typeof s=="object"&&typeof s[Symbol.asyncIterator]=="function",zl=async(s,t)=>({...s,body:await ED(s.body,t)}),JE=new WeakMap;function vD(s){const t=typeof s=="function"?s:s.fetch,n=JE.get(t);if(n)return n;const i=(async()=>{try{const o="Response"in t?t.Response:(await t("data:,")).constructor,u=new FormData;return u.toString()!==await new o(u).text()}catch{return!0}})();return JE.set(t,i),i}const ED=async(s,t)=>{if(!await vD(t))throw new TypeError("The provided fetch function does not support file uploads with the current global FormData class.");const n=new FormData;return await Promise.all(Object.entries(s||{}).map(([i,o])=>Ig(n,i,o))),n},TD=s=>s instanceof Blob&&"name"in s,Ig=async(s,t,n)=>{if(n!==void 0){if(n==null)throw new TypeError(`Received null for "${t}"; to pass null in FormData, you must use the string 'null'`);if(typeof n=="string"||typeof n=="number"||typeof n=="boolean")s.append(t,String(n));else if(n instanceof Response)s.append(t,Rf([await n.blob()],ud(n)));else if(Xb(n))s.append(t,Rf([await new Response(jb(n)).blob()],ud(n)));else if(TD(n))s.append(t,n,ud(n));else if(Array.isArray(n))await Promise.all(n.map(i=>Ig(s,t+"[]",i)));else if(typeof n=="object")await Promise.all(Object.entries(n).map(([i,o])=>Ig(s,`${t}[${i}]`,o)));else throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`)}},Zb=s=>s!=null&&typeof s=="object"&&typeof s.size=="number"&&typeof s.type=="string"&&typeof s.text=="function"&&typeof s.slice=="function"&&typeof s.arrayBuffer=="function",wD=s=>s!=null&&typeof s=="object"&&typeof s.name=="string"&&typeof s.lastModified=="number"&&Zb(s),bD=s=>s!=null&&typeof s=="object"&&typeof s.url=="string"&&typeof s.blob=="function";async function AD(s,t,n){if(Kb(),s=await s,wD(s))return s instanceof File?s:Rf([await s.arrayBuffer()],s.name);if(bD(s)){const o=await s.blob();return t||(t=new URL(s.url).pathname.split(/[\\/]/).pop()),Rf(await Cg(o),t,n)}const i=await Cg(s);if(t||(t=ud(s)),!n?.type){const o=i.find(u=>typeof u=="object"&&"type"in u&&u.type);typeof o=="string"&&(n={...n,type:o})}return Rf(i,t,n)}async function Cg(s){let t=[];if(typeof s=="string"||ArrayBuffer.isView(s)||s instanceof ArrayBuffer)t.push(s);else if(Zb(s))t.push(s instanceof Blob?s:await s.arrayBuffer());else if(Xb(s))for await(const n of s)t.push(...await Cg(n));else{const n=s?.constructor?.name;throw new Error(`Unexpected data type: ${typeof s}${n?`; constructor: ${n}`:""}${SD(s)}`)}return t}function SD(s){return typeof s!="object"||s===null?"":`; props: [${Object.getOwnPropertyNames(s).map(n=>`"${n}"`).join(", ")}]`}class qt{constructor(t){this._client=t}}function Jb(s){return s.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const WE=Object.freeze(Object.create(null)),RD=(s=Jb)=>function(n,...i){if(n.length===1)return n[0];let o=!1;const u=[],m=n.reduce((S,x,N)=>{/[?#]/.test(x)&&(o=!0);const V=i[N];let tt=(o?encodeURIComponent:s)(""+V);return N!==i.length&&(V==null||typeof V=="object"&&V.toString===Object.getPrototypeOf(Object.getPrototypeOf(V.hasOwnProperty??WE)??WE)?.toString)&&(tt=V+"",u.push({start:S.length+x.length,length:tt.length,error:`Value of type ${Object.prototype.toString.call(V).slice(8,-1)} is not a valid path parameter`})),S+x+(N===i.length?"":tt)},""),y=m.split(/[?#]/,1)[0],E=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let T;for(;(T=E.exec(y))!==null;)u.push({start:T.index,length:T[0].length,error:`Value "${T[0]}" can't be safely passed as a path parameter`});if(u.sort((S,x)=>S.start-x.start),u.length>0){let S=0;const x=u.reduce((N,V)=>{const tt=" ".repeat(V.start-S),Z="^".repeat(V.length);return S=V.start+V.length,N+tt+Z},"");throw new jt(`Path parameters result in path with invalid segments:
${u.map(N=>N.error).join(`
`)}
${m}
${x}`)}return m},vt=RD(Jb);let Wb=class extends qt{list(t,n={},i){return this._client.getAPIList(vt`/chat/completions/${t}/messages`,wn,{query:n,...i})}};function Vd(s){return s!==void 0&&"function"in s&&s.function!==void 0}function xy(s){return s?.$brand==="auto-parseable-response-format"}function $f(s){return s?.$brand==="auto-parseable-tool"}function ID(s,t){return!t||!tA(t)?{...s,choices:s.choices.map(n=>(eA(n.message.tool_calls),{...n,message:{...n.message,parsed:null,...n.message.tool_calls?{tool_calls:n.message.tool_calls}:void 0}}))}:Dy(s,t)}function Dy(s,t){const n=s.choices.map(i=>{if(i.finish_reason==="length")throw new Ub;if(i.finish_reason==="content_filter")throw new kb;return eA(i.message.tool_calls),{...i,message:{...i.message,...i.message.tool_calls?{tool_calls:i.message.tool_calls?.map(o=>xD(t,o))??void 0}:void 0,parsed:i.message.content&&!i.message.refusal?CD(t,i.message.content):null}}});return{...s,choices:n}}function CD(s,t){return s.response_format?.type!=="json_schema"?null:s.response_format?.type==="json_schema"?"$parseRaw"in s.response_format?s.response_format.$parseRaw(t):JSON.parse(t):null}function xD(s,t){const n=s.tools?.find(i=>Vd(i)&&i.function?.name===t.function.name);return{...t,function:{...t.function,parsed_arguments:$f(n)?n.$parseRaw(t.function.arguments):n?.function.strict?JSON.parse(t.function.arguments):null}}}function DD(s,t){if(!s||!("tools"in s)||!s.tools)return!1;const n=s.tools?.find(i=>Vd(i)&&i.function?.name===t.function.name);return Vd(n)&&($f(n)||n?.function.strict||!1)}function tA(s){return xy(s.response_format)?!0:s.tools?.some(t=>$f(t)||t.type==="function"&&t.function.strict===!0)??!1}function eA(s){for(const t of s||[])if(t.type!=="function")throw new jt(`Currently only \`function\` tool calls are supported; Received \`${t.type}\``)}function OD(s){for(const t of s??[]){if(t.type!=="function")throw new jt(`Currently only \`function\` tool types support auto-parsing; Received \`${t.type}\``);if(t.function.strict!==!0)throw new jt(`The \`${t.function.name}\` tool is not marked with \`strict: true\`. Only strict function tools can be auto-parsed`)}}const Pd=s=>s?.role==="assistant",nA=s=>s?.role==="tool";var xg,cd,fd,hf,df,hd,mf,ja,pf,Ud,kd,$u,rA;class Oy{constructor(){xg.add(this),this.controller=new AbortController,cd.set(this,void 0),fd.set(this,()=>{}),hf.set(this,()=>{}),df.set(this,void 0),hd.set(this,()=>{}),mf.set(this,()=>{}),ja.set(this,{}),pf.set(this,!1),Ud.set(this,!1),kd.set(this,!1),$u.set(this,!1),Ft(this,cd,new Promise((t,n)=>{Ft(this,fd,t,"f"),Ft(this,hf,n,"f")})),Ft(this,df,new Promise((t,n)=>{Ft(this,hd,t,"f"),Ft(this,mf,n,"f")})),J(this,cd,"f").catch(()=>{}),J(this,df,"f").catch(()=>{})}_run(t){setTimeout(()=>{t().then(()=>{this._emitFinal(),this._emit("end")},J(this,xg,"m",rA).bind(this))},0)}_connected(){this.ended||(J(this,fd,"f").call(this),this._emit("connect"))}get ended(){return J(this,pf,"f")}get errored(){return J(this,Ud,"f")}get aborted(){return J(this,kd,"f")}abort(){this.controller.abort()}on(t,n){return(J(this,ja,"f")[t]||(J(this,ja,"f")[t]=[])).push({listener:n}),this}off(t,n){const i=J(this,ja,"f")[t];if(!i)return this;const o=i.findIndex(u=>u.listener===n);return o>=0&&i.splice(o,1),this}once(t,n){return(J(this,ja,"f")[t]||(J(this,ja,"f")[t]=[])).push({listener:n,once:!0}),this}emitted(t){return new Promise((n,i)=>{Ft(this,$u,!0),t!=="error"&&this.once("error",i),this.once(t,n)})}async done(){Ft(this,$u,!0),await J(this,df,"f")}_emit(t,...n){if(J(this,pf,"f"))return;t==="end"&&(Ft(this,pf,!0),J(this,hd,"f").call(this));const i=J(this,ja,"f")[t];if(i&&(J(this,ja,"f")[t]=i.filter(o=>!o.once),i.forEach(({listener:o})=>o(...n))),t==="abort"){const o=n[0];!J(this,$u,"f")&&!i?.length&&Promise.reject(o),J(this,hf,"f").call(this,o),J(this,mf,"f").call(this,o),this._emit("end");return}if(t==="error"){const o=n[0];!J(this,$u,"f")&&!i?.length&&Promise.reject(o),J(this,hf,"f").call(this,o),J(this,mf,"f").call(this,o),this._emit("end")}}_emitFinal(){}}cd=new WeakMap,fd=new WeakMap,hf=new WeakMap,df=new WeakMap,hd=new WeakMap,mf=new WeakMap,ja=new WeakMap,pf=new WeakMap,Ud=new WeakMap,kd=new WeakMap,$u=new WeakMap,xg=new WeakSet,rA=function(t){if(Ft(this,Ud,!0),t instanceof Error&&t.name==="AbortError"&&(t=new Vi),t instanceof Vi)return Ft(this,kd,!0),this._emit("abort",t);if(t instanceof jt)return this._emit("error",t);if(t instanceof Error){const n=new jt(t.message);return n.cause=t,this._emit("error",n)}return this._emit("error",new jt(String(t)))};function ND(s){return typeof s.parse=="function"}var Ar,Dg,Ld,Og,Ng,Mg,iA,sA;const MD=10;class aA extends Oy{constructor(){super(...arguments),Ar.add(this),this._chatCompletions=[],this.messages=[]}_addChatCompletion(t){this._chatCompletions.push(t),this._emit("chatCompletion",t);const n=t.choices[0]?.message;return n&&this._addMessage(n),t}_addMessage(t,n=!0){if("content"in t||(t.content=null),this.messages.push(t),n){if(this._emit("message",t),nA(t)&&t.content)this._emit("functionToolCallResult",t.content);else if(Pd(t)&&t.tool_calls)for(const i of t.tool_calls)i.type==="function"&&this._emit("functionToolCall",i.function)}}async finalChatCompletion(){await this.done();const t=this._chatCompletions[this._chatCompletions.length-1];if(!t)throw new jt("stream ended without producing a ChatCompletion");return t}async finalContent(){return await this.done(),J(this,Ar,"m",Dg).call(this)}async finalMessage(){return await this.done(),J(this,Ar,"m",Ld).call(this)}async finalFunctionToolCall(){return await this.done(),J(this,Ar,"m",Og).call(this)}async finalFunctionToolCallResult(){return await this.done(),J(this,Ar,"m",Ng).call(this)}async totalUsage(){return await this.done(),J(this,Ar,"m",Mg).call(this)}allChatCompletions(){return[...this._chatCompletions]}_emitFinal(){const t=this._chatCompletions[this._chatCompletions.length-1];t&&this._emit("finalChatCompletion",t);const n=J(this,Ar,"m",Ld).call(this);n&&this._emit("finalMessage",n);const i=J(this,Ar,"m",Dg).call(this);i&&this._emit("finalContent",i);const o=J(this,Ar,"m",Og).call(this);o&&this._emit("finalFunctionToolCall",o);const u=J(this,Ar,"m",Ng).call(this);u!=null&&this._emit("finalFunctionToolCallResult",u),this._chatCompletions.some(m=>m.usage)&&this._emit("totalUsage",J(this,Ar,"m",Mg).call(this))}async _createChatCompletion(t,n,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),J(this,Ar,"m",iA).call(this,n);const u=await t.chat.completions.create({...n,stream:!1},{...i,signal:this.controller.signal});return this._connected(),this._addChatCompletion(Dy(u,n))}async _runChatCompletion(t,n,i){for(const o of n.messages)this._addMessage(o,!1);return await this._createChatCompletion(t,n,i)}async _runTools(t,n,i){const o="tool",{tool_choice:u="auto",stream:m,...y}=n,E=typeof u!="string"&&u.type==="function"&&u?.function?.name,{maxChatCompletions:T=MD}=i||{},S=n.tools.map(V=>{if($f(V)){if(!V.$callback)throw new jt("Tool given to `.runTools()` that does not have an associated function");return{type:"function",function:{function:V.$callback,name:V.function.name,description:V.function.description||"",parameters:V.function.parameters,parse:V.$parseRaw,strict:!0}}}return V}),x={};for(const V of S)V.type==="function"&&(x[V.function.name||V.function.function.name]=V.function);const N="tools"in n?S.map(V=>V.type==="function"?{type:"function",function:{name:V.function.name||V.function.function.name,parameters:V.function.parameters,description:V.function.description,strict:V.function.strict}}:V):void 0;for(const V of n.messages)this._addMessage(V,!1);for(let V=0;V<T;++V){const Z=(await this._createChatCompletion(t,{...y,tool_choice:u,tools:N,messages:[...this.messages]},i)).choices[0]?.message;if(!Z)throw new jt("missing message in ChatCompletion response");if(!Z.tool_calls?.length)return;for(const ot of Z.tool_calls){if(ot.type!=="function")continue;const bt=ot.id,{name:pt,arguments:wt}=ot.function,Et=x[pt];if(Et){if(E&&E!==pt){const O=`Invalid tool_call: ${JSON.stringify(pt)}. ${JSON.stringify(E)} requested. Please try again`;this._addMessage({role:o,tool_call_id:bt,content:O});continue}}else{const O=`Invalid tool_call: ${JSON.stringify(pt)}. Available options are: ${Object.keys(x).map(M=>JSON.stringify(M)).join(", ")}. Please try again`;this._addMessage({role:o,tool_call_id:bt,content:O});continue}let Dt;try{Dt=ND(Et)?await Et.parse(wt):wt}catch(O){const M=O instanceof Error?O.message:String(O);this._addMessage({role:o,tool_call_id:bt,content:M});continue}const Mt=await Et.function(Dt,this),z=J(this,Ar,"m",sA).call(this,Mt);if(this._addMessage({role:o,tool_call_id:bt,content:z}),E)return}}}}Ar=new WeakSet,Dg=function(){return J(this,Ar,"m",Ld).call(this).content??null},Ld=function(){let t=this.messages.length;for(;t-- >0;){const n=this.messages[t];if(Pd(n))return{...n,content:n.content??null,refusal:n.refusal??null}}throw new jt("stream ended without producing a ChatCompletionMessage with role=assistant")},Og=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(Pd(n)&&n?.tool_calls?.length)return n.tool_calls.filter(i=>i.type==="function").at(-1)?.function}},Ng=function(){for(let t=this.messages.length-1;t>=0;t--){const n=this.messages[t];if(nA(n)&&n.content!=null&&typeof n.content=="string"&&this.messages.some(i=>i.role==="assistant"&&i.tool_calls?.some(o=>o.type==="function"&&o.id===n.tool_call_id)))return n.content}},Mg=function(){const t={completion_tokens:0,prompt_tokens:0,total_tokens:0};for(const{usage:n}of this._chatCompletions)n&&(t.completion_tokens+=n.completion_tokens,t.prompt_tokens+=n.prompt_tokens,t.total_tokens+=n.total_tokens);return t},iA=function(t){if(t.n!=null&&t.n>1)throw new jt("ChatCompletion convenience helpers only support n=1 at this time. To use n>1, please use chat.completions.create() directly.")},sA=function(t){return typeof t=="string"?t:t===void 0?"undefined":JSON.stringify(t)};class Ny extends aA{static runTools(t,n,i){const o=new Ny,u={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(t,n,u)),o}_addMessage(t,n=!0){super._addMessage(t,n),Pd(t)&&t.content&&this._emit("content",t.content)}}const oA=1,lA=2,uA=4,cA=8,fA=16,hA=32,dA=64,mA=128,pA=256,gA=mA|pA,yA=fA|hA|gA|dA,_A=oA|lA|yA,vA=uA|cA,VD=_A|vA,qn={STR:oA,NUM:lA,ARR:uA,OBJ:cA,NULL:fA,BOOL:hA,NAN:dA,INFINITY:mA,MINUS_INFINITY:pA,INF:gA,SPECIAL:yA,ATOM:_A,COLLECTION:vA,ALL:VD};class PD extends Error{}class UD extends Error{}function kD(s,t=qn.ALL){if(typeof s!="string")throw new TypeError(`expecting str, got ${typeof s}`);if(!s.trim())throw new Error(`${s} is empty`);return LD(s.trim(),t)}const LD=(s,t)=>{const n=s.length;let i=0;const o=N=>{throw new PD(`${N} at position ${i}`)},u=N=>{throw new UD(`${N} at position ${i}`)},m=()=>(x(),i>=n&&o("Unexpected end of input"),s[i]==='"'?y():s[i]==="{"?E():s[i]==="["?T():s.substring(i,i+4)==="null"||qn.NULL&t&&n-i<4&&"null".startsWith(s.substring(i))?(i+=4,null):s.substring(i,i+4)==="true"||qn.BOOL&t&&n-i<4&&"true".startsWith(s.substring(i))?(i+=4,!0):s.substring(i,i+5)==="false"||qn.BOOL&t&&n-i<5&&"false".startsWith(s.substring(i))?(i+=5,!1):s.substring(i,i+8)==="Infinity"||qn.INFINITY&t&&n-i<8&&"Infinity".startsWith(s.substring(i))?(i+=8,1/0):s.substring(i,i+9)==="-Infinity"||qn.MINUS_INFINITY&t&&1<n-i&&n-i<9&&"-Infinity".startsWith(s.substring(i))?(i+=9,-1/0):s.substring(i,i+3)==="NaN"||qn.NAN&t&&n-i<3&&"NaN".startsWith(s.substring(i))?(i+=3,NaN):S()),y=()=>{const N=i;let V=!1;for(i++;i<n&&(s[i]!=='"'||V&&s[i-1]==="\\");)V=s[i]==="\\"?!V:!1,i++;if(s.charAt(i)=='"')try{return JSON.parse(s.substring(N,++i-Number(V)))}catch(tt){u(String(tt))}else if(qn.STR&t)try{return JSON.parse(s.substring(N,i-Number(V))+'"')}catch{return JSON.parse(s.substring(N,s.lastIndexOf("\\"))+'"')}o("Unterminated string literal")},E=()=>{i++,x();const N={};try{for(;s[i]!=="}";){if(x(),i>=n&&qn.OBJ&t)return N;const V=y();x(),i++;try{const tt=m();Object.defineProperty(N,V,{value:tt,writable:!0,enumerable:!0,configurable:!0})}catch(tt){if(qn.OBJ&t)return N;throw tt}x(),s[i]===","&&i++}}catch{if(qn.OBJ&t)return N;o("Expected '}' at end of object")}return i++,N},T=()=>{i++;const N=[];try{for(;s[i]!=="]";)N.push(m()),x(),s[i]===","&&i++}catch{if(qn.ARR&t)return N;o("Expected ']' at end of array")}return i++,N},S=()=>{if(i===0){s==="-"&&qn.NUM&t&&o("Not sure what '-' is");try{return JSON.parse(s)}catch(V){if(qn.NUM&t)try{return s[s.length-1]==="."?JSON.parse(s.substring(0,s.lastIndexOf("."))):JSON.parse(s.substring(0,s.lastIndexOf("e")))}catch{}u(String(V))}}const N=i;for(s[i]==="-"&&i++;s[i]&&!",]}".includes(s[i]);)i++;i==n&&!(qn.NUM&t)&&o("Unterminated number literal");try{return JSON.parse(s.substring(N,i))}catch{s.substring(N,i)==="-"&&qn.NUM&t&&o("Not sure what '-' is");try{return JSON.parse(s.substring(N,s.lastIndexOf("e")))}catch(tt){u(String(tt))}}},x=()=>{for(;i<n&&` 
\r	`.includes(s[i]);)i++};return m()},tT=s=>kD(s,qn.ALL^qn.NUM);var In,Ba,ku,Co,Bp,Jh,jp,zp,qp,Wh,Hp,eT;class kf extends aA{constructor(t){super(),In.add(this),Ba.set(this,void 0),ku.set(this,void 0),Co.set(this,void 0),Ft(this,Ba,t),Ft(this,ku,[])}get currentChatCompletionSnapshot(){return J(this,Co,"f")}static fromReadableStream(t){const n=new kf(null);return n._run(()=>n._fromReadableStream(t)),n}static createChatCompletion(t,n,i){const o=new kf(n);return o._run(()=>o._runChatCompletion(t,{...n,stream:!0},{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createChatCompletion(t,n,i){super._createChatCompletion;const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),J(this,In,"m",Bp).call(this);const u=await t.chat.completions.create({...n,stream:!0},{...i,signal:this.controller.signal});this._connected();for await(const m of u)J(this,In,"m",jp).call(this,m);if(u.controller.signal?.aborted)throw new Vi;return this._addChatCompletion(J(this,In,"m",Wh).call(this))}async _fromReadableStream(t,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),J(this,In,"m",Bp).call(this),this._connected();const o=Bs.fromReadableStream(t,this.controller);let u;for await(const m of o)u&&u!==m.id&&this._addChatCompletion(J(this,In,"m",Wh).call(this)),J(this,In,"m",jp).call(this,m),u=m.id;if(o.controller.signal?.aborted)throw new Vi;return this._addChatCompletion(J(this,In,"m",Wh).call(this))}[(Ba=new WeakMap,ku=new WeakMap,Co=new WeakMap,In=new WeakSet,Bp=function(){this.ended||Ft(this,Co,void 0)},Jh=function(n){let i=J(this,ku,"f")[n.index];return i||(i={content_done:!1,refusal_done:!1,logprobs_content_done:!1,logprobs_refusal_done:!1,done_tool_calls:new Set,current_tool_call_index:null},J(this,ku,"f")[n.index]=i,i)},jp=function(n){if(this.ended)return;const i=J(this,In,"m",eT).call(this,n);this._emit("chunk",n,i);for(const o of n.choices){const u=i.choices[o.index];o.delta.content!=null&&u.message?.role==="assistant"&&u.message?.content&&(this._emit("content",o.delta.content,u.message.content),this._emit("content.delta",{delta:o.delta.content,snapshot:u.message.content,parsed:u.message.parsed})),o.delta.refusal!=null&&u.message?.role==="assistant"&&u.message?.refusal&&this._emit("refusal.delta",{delta:o.delta.refusal,snapshot:u.message.refusal}),o.logprobs?.content!=null&&u.message?.role==="assistant"&&this._emit("logprobs.content.delta",{content:o.logprobs?.content,snapshot:u.logprobs?.content??[]}),o.logprobs?.refusal!=null&&u.message?.role==="assistant"&&this._emit("logprobs.refusal.delta",{refusal:o.logprobs?.refusal,snapshot:u.logprobs?.refusal??[]});const m=J(this,In,"m",Jh).call(this,u);u.finish_reason&&(J(this,In,"m",qp).call(this,u),m.current_tool_call_index!=null&&J(this,In,"m",zp).call(this,u,m.current_tool_call_index));for(const y of o.delta.tool_calls??[])m.current_tool_call_index!==y.index&&(J(this,In,"m",qp).call(this,u),m.current_tool_call_index!=null&&J(this,In,"m",zp).call(this,u,m.current_tool_call_index)),m.current_tool_call_index=y.index;for(const y of o.delta.tool_calls??[]){const E=u.message.tool_calls?.[y.index];E?.type&&(E?.type==="function"?this._emit("tool_calls.function.arguments.delta",{name:E.function?.name,index:y.index,arguments:E.function.arguments,parsed_arguments:E.function.parsed_arguments,arguments_delta:y.function?.arguments??""}):(E?.type,void 0))}}},zp=function(n,i){if(J(this,In,"m",Jh).call(this,n).done_tool_calls.has(i))return;const u=n.message.tool_calls?.[i];if(!u)throw new Error("no tool call snapshot");if(!u.type)throw new Error("tool call snapshot missing `type`");if(u.type==="function"){const m=J(this,Ba,"f")?.tools?.find(y=>Vd(y)&&y.function.name===u.function.name);this._emit("tool_calls.function.arguments.done",{name:u.function.name,index:i,arguments:u.function.arguments,parsed_arguments:$f(m)?m.$parseRaw(u.function.arguments):m?.function.strict?JSON.parse(u.function.arguments):null})}else u.type},qp=function(n){const i=J(this,In,"m",Jh).call(this,n);if(n.message.content&&!i.content_done){i.content_done=!0;const o=J(this,In,"m",Hp).call(this);this._emit("content.done",{content:n.message.content,parsed:o?o.$parseRaw(n.message.content):null})}n.message.refusal&&!i.refusal_done&&(i.refusal_done=!0,this._emit("refusal.done",{refusal:n.message.refusal})),n.logprobs?.content&&!i.logprobs_content_done&&(i.logprobs_content_done=!0,this._emit("logprobs.content.done",{content:n.logprobs.content})),n.logprobs?.refusal&&!i.logprobs_refusal_done&&(i.logprobs_refusal_done=!0,this._emit("logprobs.refusal.done",{refusal:n.logprobs.refusal}))},Wh=function(){if(this.ended)throw new jt("stream has ended, this shouldn't happen");const n=J(this,Co,"f");if(!n)throw new jt("request ended without sending any chunks");return Ft(this,Co,void 0),Ft(this,ku,[]),BD(n,J(this,Ba,"f"))},Hp=function(){const n=J(this,Ba,"f")?.response_format;return xy(n)?n:null},eT=function(n){var i,o,u,m;let y=J(this,Co,"f");const{choices:E,...T}=n;y?Object.assign(y,T):y=Ft(this,Co,{...T,choices:[]});for(const{delta:S,finish_reason:x,index:N,logprobs:V=null,...tt}of n.choices){let Z=y.choices[N];if(Z||(Z=y.choices[N]={finish_reason:x,index:N,message:{},logprobs:V,...tt}),V)if(!Z.logprobs)Z.logprobs=Object.assign({},V);else{const{content:Mt,refusal:z,...O}=V;Object.assign(Z.logprobs,O),Mt&&((i=Z.logprobs).content??(i.content=[]),Z.logprobs.content.push(...Mt)),z&&((o=Z.logprobs).refusal??(o.refusal=[]),Z.logprobs.refusal.push(...z))}if(x&&(Z.finish_reason=x,J(this,Ba,"f")&&tA(J(this,Ba,"f")))){if(x==="length")throw new Ub;if(x==="content_filter")throw new kb}if(Object.assign(Z,tt),!S)continue;const{content:ot,refusal:bt,function_call:pt,role:wt,tool_calls:Et,...Dt}=S;if(Object.assign(Z.message,Dt),bt&&(Z.message.refusal=(Z.message.refusal||"")+bt),wt&&(Z.message.role=wt),pt&&(Z.message.function_call?(pt.name&&(Z.message.function_call.name=pt.name),pt.arguments&&((u=Z.message.function_call).arguments??(u.arguments=""),Z.message.function_call.arguments+=pt.arguments)):Z.message.function_call=pt),ot&&(Z.message.content=(Z.message.content||"")+ot,!Z.message.refusal&&J(this,In,"m",Hp).call(this)&&(Z.message.parsed=tT(Z.message.content))),Et){Z.message.tool_calls||(Z.message.tool_calls=[]);for(const{index:Mt,id:z,type:O,function:M,...B}of Et){const L=(m=Z.message.tool_calls)[Mt]??(m[Mt]={});Object.assign(L,B),z&&(L.id=z),O&&(L.type=O),M&&(L.function??(L.function={name:M.name??"",arguments:""})),M?.name&&(L.function.name=M.name),M?.arguments&&(L.function.arguments+=M.arguments,DD(J(this,Ba,"f"),L)&&(L.function.parsed_arguments=tT(L.function.arguments)))}}}return y},Symbol.asyncIterator)](){const t=[],n=[];let i=!1;return this.on("chunk",o=>{const u=n.shift();u?u.resolve(o):t.push(o)}),this.on("end",()=>{i=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{i=!0;for(const u of n)u.reject(o);n.length=0}),this.on("error",o=>{i=!0;for(const u of n)u.reject(o);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((u,m)=>n.push({resolve:u,reject:m})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}toReadableStream(){return new Bs(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}}function BD(s,t){const{id:n,choices:i,created:o,model:u,system_fingerprint:m,...y}=s,E={...y,id:n,choices:i.map(({message:T,finish_reason:S,index:x,logprobs:N,...V})=>{if(!S)throw new jt(`missing finish_reason for choice ${x}`);const{content:tt=null,function_call:Z,tool_calls:ot,...bt}=T,pt=T.role;if(!pt)throw new jt(`missing role for choice ${x}`);if(Z){const{arguments:wt,name:Et}=Z;if(wt==null)throw new jt(`missing function_call.arguments for choice ${x}`);if(!Et)throw new jt(`missing function_call.name for choice ${x}`);return{...V,message:{content:tt,function_call:{arguments:wt,name:Et},role:pt,refusal:T.refusal??null},finish_reason:S,index:x,logprobs:N}}return ot?{...V,index:x,finish_reason:S,logprobs:N,message:{...bt,role:pt,content:tt,refusal:T.refusal??null,tool_calls:ot.map((wt,Et)=>{const{function:Dt,type:Mt,id:z,...O}=wt,{arguments:M,name:B,...L}=Dt||{};if(z==null)throw new jt(`missing choices[${x}].tool_calls[${Et}].id
${td(s)}`);if(Mt==null)throw new jt(`missing choices[${x}].tool_calls[${Et}].type
${td(s)}`);if(B==null)throw new jt(`missing choices[${x}].tool_calls[${Et}].function.name
${td(s)}`);if(M==null)throw new jt(`missing choices[${x}].tool_calls[${Et}].function.arguments
${td(s)}`);return{...O,id:z,type:Mt,function:{...L,name:B,arguments:M}}})}}:{...V,message:{...bt,content:tt,role:pt,refusal:T.refusal??null},finish_reason:S,index:x,logprobs:N}}),created:o,model:u,object:"chat.completion",...m?{system_fingerprint:m}:{}};return ID(E,t)}function td(s){return JSON.stringify(s)}class Bd extends kf{static fromReadableStream(t){const n=new Bd(null);return n._run(()=>n._fromReadableStream(t)),n}static runTools(t,n,i){const o=new Bd(n),u={...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"runTools"}};return o._run(()=>o._runTools(t,n,u)),o}}let My=class extends qt{constructor(){super(...arguments),this.messages=new Wb(this._client)}create(t,n){return this._client.post("/chat/completions",{body:t,...n,stream:t.stream??!1})}retrieve(t,n){return this._client.get(vt`/chat/completions/${t}`,n)}update(t,n,i){return this._client.post(vt`/chat/completions/${t}`,{body:n,...i})}list(t={},n){return this._client.getAPIList("/chat/completions",wn,{query:t,...n})}delete(t,n){return this._client.delete(vt`/chat/completions/${t}`,n)}parse(t,n){return OD(t.tools),this._client.chat.completions.create(t,{...n,headers:{...n?.headers,"X-Stainless-Helper-Method":"chat.completions.parse"}})._thenUnwrap(i=>Dy(i,t))}runTools(t,n){return t.stream?Bd.runTools(this._client,t,n):Ny.runTools(this._client,t,n)}stream(t,n){return kf.createChatCompletion(this._client,t,n)}};My.Messages=Wb;class Vy extends qt{constructor(){super(...arguments),this.completions=new My(this._client)}}Vy.Completions=My;const EA=Symbol("brand.privateNullableHeaders");function*jD(s){if(!s)return;if(EA in s){const{values:i,nulls:o}=s;yield*i.entries();for(const u of o)yield[u,null];return}let t=!1,n;s instanceof Headers?n=s.entries():jE(s)?n=s:(t=!0,n=Object.entries(s??{}));for(let i of n){const o=i[0];if(typeof o!="string")throw new TypeError("expected header name to be a string");const u=jE(i[1])?i[1]:[i[1]];let m=!1;for(const y of u)y!==void 0&&(t&&!m&&(m=!0,yield[o,null]),yield[o,y])}}const Pt=s=>{const t=new Headers,n=new Set;for(const i of s){const o=new Set;for(const[u,m]of jD(i)){const y=u.toLowerCase();o.has(y)||(t.delete(u),o.add(y)),m===null?(t.delete(u),n.add(y)):(t.append(u,m),n.delete(y))}}return{[EA]:!0,values:t,nulls:n}};class TA extends qt{create(t,n){return this._client.post("/audio/speech",{body:t,...n,headers:Pt([{Accept:"application/octet-stream"},n?.headers]),__binaryResponse:!0})}}class wA extends qt{create(t,n){return this._client.post("/audio/transcriptions",zl({body:t,...n,stream:t.stream??!1,__metadata:{model:t.model}},this._client))}}class bA extends qt{create(t,n){return this._client.post("/audio/translations",zl({body:t,...n,__metadata:{model:t.model}},this._client))}}class Gf extends qt{constructor(){super(...arguments),this.transcriptions=new wA(this._client),this.translations=new bA(this._client),this.speech=new TA(this._client)}}Gf.Transcriptions=wA;Gf.Translations=bA;Gf.Speech=TA;class AA extends qt{create(t,n){return this._client.post("/batches",{body:t,...n})}retrieve(t,n){return this._client.get(vt`/batches/${t}`,n)}list(t={},n){return this._client.getAPIList("/batches",wn,{query:t,...n})}cancel(t,n){return this._client.post(vt`/batches/${t}/cancel`,n)}}class SA extends qt{create(t,n){return this._client.post("/assistants",{body:t,...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(vt`/assistants/${t}`,{...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,i){return this._client.post(vt`/assistants/${t}`,{body:n,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(t={},n){return this._client.getAPIList("/assistants",wn,{query:t,...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,n){return this._client.delete(vt`/assistants/${t}`,{...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class RA extends qt{create(t,n){return this._client.post("/realtime/sessions",{body:t,...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class IA extends qt{create(t,n){return this._client.post("/realtime/transcription_sessions",{body:t,...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}}class om extends qt{constructor(){super(...arguments),this.sessions=new RA(this._client),this.transcriptionSessions=new IA(this._client)}}om.Sessions=RA;om.TranscriptionSessions=IA;class CA extends qt{create(t,n,i){return this._client.post(vt`/threads/${t}/messages`,{body:n,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(t,n,i){const{thread_id:o}=n;return this._client.get(vt`/threads/${o}/messages/${t}`,{...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(t,n,i){const{thread_id:o,...u}=n;return this._client.post(vt`/threads/${o}/messages/${t}`,{body:u,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(t,n={},i){return this._client.getAPIList(vt`/threads/${t}/messages`,wn,{query:n,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(t,n,i){const{thread_id:o}=n;return this._client.delete(vt`/threads/${o}/messages/${t}`,{...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class xA extends qt{retrieve(t,n,i){const{thread_id:o,run_id:u,...m}=n;return this._client.get(vt`/threads/${o}/runs/${u}/steps/${t}`,{query:m,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(t,n,i){const{thread_id:o,...u}=n;return this._client.getAPIList(vt`/threads/${o}/runs/${t}/steps`,wn,{query:u,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}const zD=s=>{if(typeof Buffer<"u"){const t=Buffer.from(s,"base64");return Array.from(new Float32Array(t.buffer,t.byteOffset,t.length/Float32Array.BYTES_PER_ELEMENT))}else{const t=atob(s),n=t.length,i=new Uint8Array(n);for(let o=0;o<n;o++)i[o]=t.charCodeAt(o);return Array.from(new Float32Array(i.buffer))}};var qD={};const Lu=s=>{if(typeof globalThis.process<"u")return qD?.[s]?.trim()??void 0;if(typeof globalThis.Deno<"u")return globalThis.Deno.env?.get?.(s)?.trim()};var Zn,Vl,Vg,Ls,dd,us,Pl,Yu,Nl,jd,fi,md,pd,If,gf,yf,nT,rT,iT,sT,aT,oT,lT;class Cf extends Oy{constructor(){super(...arguments),Zn.add(this),Vg.set(this,[]),Ls.set(this,{}),dd.set(this,{}),us.set(this,void 0),Pl.set(this,void 0),Yu.set(this,void 0),Nl.set(this,void 0),jd.set(this,void 0),fi.set(this,void 0),md.set(this,void 0),pd.set(this,void 0),If.set(this,void 0)}[(Vg=new WeakMap,Ls=new WeakMap,dd=new WeakMap,us=new WeakMap,Pl=new WeakMap,Yu=new WeakMap,Nl=new WeakMap,jd=new WeakMap,fi=new WeakMap,md=new WeakMap,pd=new WeakMap,If=new WeakMap,Zn=new WeakSet,Symbol.asyncIterator)](){const t=[],n=[];let i=!1;return this.on("event",o=>{const u=n.shift();u?u.resolve(o):t.push(o)}),this.on("end",()=>{i=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{i=!0;for(const u of n)u.reject(o);n.length=0}),this.on("error",o=>{i=!0;for(const u of n)u.reject(o);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((u,m)=>n.push({resolve:u,reject:m})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}static fromReadableStream(t){const n=new Vl;return n._run(()=>n._fromReadableStream(t)),n}async _fromReadableStream(t,n){const i=n?.signal;i&&(i.aborted&&this.controller.abort(),i.addEventListener("abort",()=>this.controller.abort())),this._connected();const o=Bs.fromReadableStream(t,this.controller);for await(const u of o)J(this,Zn,"m",gf).call(this,u);if(o.controller.signal?.aborted)throw new Vi;return this._addRun(J(this,Zn,"m",yf).call(this))}toReadableStream(){return new Bs(this[Symbol.asyncIterator].bind(this),this.controller).toReadableStream()}static createToolAssistantStream(t,n,i,o){const u=new Vl;return u._run(()=>u._runToolAssistantStream(t,n,i,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),u}async _createToolAssistantStream(t,n,i,o){const u=o?.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const m={...i,stream:!0},y=await t.submitToolOutputs(n,m,{...o,signal:this.controller.signal});this._connected();for await(const E of y)J(this,Zn,"m",gf).call(this,E);if(y.controller.signal?.aborted)throw new Vi;return this._addRun(J(this,Zn,"m",yf).call(this))}static createThreadAssistantStream(t,n,i){const o=new Vl;return o._run(()=>o._threadAssistantStream(t,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}static createAssistantStream(t,n,i,o){const u=new Vl;return u._run(()=>u._runAssistantStream(t,n,i,{...o,headers:{...o?.headers,"X-Stainless-Helper-Method":"stream"}})),u}currentEvent(){return J(this,md,"f")}currentRun(){return J(this,pd,"f")}currentMessageSnapshot(){return J(this,us,"f")}currentRunStepSnapshot(){return J(this,If,"f")}async finalRunSteps(){return await this.done(),Object.values(J(this,Ls,"f"))}async finalMessages(){return await this.done(),Object.values(J(this,dd,"f"))}async finalRun(){if(await this.done(),!J(this,Pl,"f"))throw Error("Final run was not received.");return J(this,Pl,"f")}async _createThreadAssistantStream(t,n,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort()));const u={...n,stream:!0},m=await t.createAndRun(u,{...i,signal:this.controller.signal});this._connected();for await(const y of m)J(this,Zn,"m",gf).call(this,y);if(m.controller.signal?.aborted)throw new Vi;return this._addRun(J(this,Zn,"m",yf).call(this))}async _createAssistantStream(t,n,i,o){const u=o?.signal;u&&(u.aborted&&this.controller.abort(),u.addEventListener("abort",()=>this.controller.abort()));const m={...i,stream:!0},y=await t.create(n,m,{...o,signal:this.controller.signal});this._connected();for await(const E of y)J(this,Zn,"m",gf).call(this,E);if(y.controller.signal?.aborted)throw new Vi;return this._addRun(J(this,Zn,"m",yf).call(this))}static accumulateDelta(t,n){for(const[i,o]of Object.entries(n)){if(!t.hasOwnProperty(i)){t[i]=o;continue}let u=t[i];if(u==null){t[i]=o;continue}if(i==="index"||i==="type"){t[i]=o;continue}if(typeof u=="string"&&typeof o=="string")u+=o;else if(typeof u=="number"&&typeof o=="number")u+=o;else if(Up(u)&&Up(o))u=this.accumulateDelta(u,o);else if(Array.isArray(u)&&Array.isArray(o)){if(u.every(m=>typeof m=="string"||typeof m=="number")){u.push(...o);continue}for(const m of o){if(!Up(m))throw new Error(`Expected array delta entry to be an object but got: ${m}`);const y=m.index;if(y==null)throw console.error(m),new Error("Expected array delta entry to have an `index` property");if(typeof y!="number")throw new Error(`Expected array delta entry \`index\` property to be a number but got ${y}`);const E=u[y];E==null?u.push(m):u[y]=this.accumulateDelta(E,m)}continue}else throw Error(`Unhandled record type: ${i}, deltaValue: ${o}, accValue: ${u}`);t[i]=u}return t}_addRun(t){return t}async _threadAssistantStream(t,n,i){return await this._createThreadAssistantStream(n,t,i)}async _runAssistantStream(t,n,i,o){return await this._createAssistantStream(n,t,i,o)}async _runToolAssistantStream(t,n,i,o){return await this._createToolAssistantStream(n,t,i,o)}}Vl=Cf,gf=function(t){if(!this.ended)switch(Ft(this,md,t),J(this,Zn,"m",iT).call(this,t),t.event){case"thread.created":break;case"thread.run.created":case"thread.run.queued":case"thread.run.in_progress":case"thread.run.requires_action":case"thread.run.completed":case"thread.run.incomplete":case"thread.run.failed":case"thread.run.cancelling":case"thread.run.cancelled":case"thread.run.expired":J(this,Zn,"m",lT).call(this,t);break;case"thread.run.step.created":case"thread.run.step.in_progress":case"thread.run.step.delta":case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":J(this,Zn,"m",rT).call(this,t);break;case"thread.message.created":case"thread.message.in_progress":case"thread.message.delta":case"thread.message.completed":case"thread.message.incomplete":J(this,Zn,"m",nT).call(this,t);break;case"error":throw new Error("Encountered an error event in event processing - errors should be processed earlier")}},yf=function(){if(this.ended)throw new jt("stream has ended, this shouldn't happen");if(!J(this,Pl,"f"))throw Error("Final run has not been received");return J(this,Pl,"f")},nT=function(t){const[n,i]=J(this,Zn,"m",aT).call(this,t,J(this,us,"f"));Ft(this,us,n),J(this,dd,"f")[n.id]=n;for(const o of i){const u=n.content[o.index];u?.type=="text"&&this._emit("textCreated",u.text)}switch(t.event){case"thread.message.created":this._emit("messageCreated",t.data);break;case"thread.message.in_progress":break;case"thread.message.delta":if(this._emit("messageDelta",t.data.delta,n),t.data.delta.content)for(const o of t.data.delta.content){if(o.type=="text"&&o.text){let u=o.text,m=n.content[o.index];if(m&&m.type=="text")this._emit("textDelta",u,m.text);else throw Error("The snapshot associated with this text delta is not text or missing")}if(o.index!=J(this,Yu,"f")){if(J(this,Nl,"f"))switch(J(this,Nl,"f").type){case"text":this._emit("textDone",J(this,Nl,"f").text,J(this,us,"f"));break;case"image_file":this._emit("imageFileDone",J(this,Nl,"f").image_file,J(this,us,"f"));break}Ft(this,Yu,o.index)}Ft(this,Nl,n.content[o.index])}break;case"thread.message.completed":case"thread.message.incomplete":if(J(this,Yu,"f")!==void 0){const o=t.data.content[J(this,Yu,"f")];if(o)switch(o.type){case"image_file":this._emit("imageFileDone",o.image_file,J(this,us,"f"));break;case"text":this._emit("textDone",o.text,J(this,us,"f"));break}}J(this,us,"f")&&this._emit("messageDone",t.data),Ft(this,us,void 0)}},rT=function(t){const n=J(this,Zn,"m",sT).call(this,t);switch(Ft(this,If,n),t.event){case"thread.run.step.created":this._emit("runStepCreated",t.data);break;case"thread.run.step.delta":const i=t.data.delta;if(i.step_details&&i.step_details.type=="tool_calls"&&i.step_details.tool_calls&&n.step_details.type=="tool_calls")for(const u of i.step_details.tool_calls)u.index==J(this,jd,"f")?this._emit("toolCallDelta",u,n.step_details.tool_calls[u.index]):(J(this,fi,"f")&&this._emit("toolCallDone",J(this,fi,"f")),Ft(this,jd,u.index),Ft(this,fi,n.step_details.tool_calls[u.index]),J(this,fi,"f")&&this._emit("toolCallCreated",J(this,fi,"f")));this._emit("runStepDelta",t.data.delta,n);break;case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":Ft(this,If,void 0),t.data.step_details.type=="tool_calls"&&J(this,fi,"f")&&(this._emit("toolCallDone",J(this,fi,"f")),Ft(this,fi,void 0)),this._emit("runStepDone",t.data,n);break}},iT=function(t){J(this,Vg,"f").push(t),this._emit("event",t)},sT=function(t){switch(t.event){case"thread.run.step.created":return J(this,Ls,"f")[t.data.id]=t.data,t.data;case"thread.run.step.delta":let n=J(this,Ls,"f")[t.data.id];if(!n)throw Error("Received a RunStepDelta before creation of a snapshot");let i=t.data;if(i.delta){const o=Vl.accumulateDelta(n,i.delta);J(this,Ls,"f")[t.data.id]=o}return J(this,Ls,"f")[t.data.id];case"thread.run.step.completed":case"thread.run.step.failed":case"thread.run.step.cancelled":case"thread.run.step.expired":case"thread.run.step.in_progress":J(this,Ls,"f")[t.data.id]=t.data;break}if(J(this,Ls,"f")[t.data.id])return J(this,Ls,"f")[t.data.id];throw new Error("No snapshot available")},aT=function(t,n){let i=[];switch(t.event){case"thread.message.created":return[t.data,i];case"thread.message.delta":if(!n)throw Error("Received a delta with no existing snapshot (there should be one from message creation)");let o=t.data;if(o.delta.content)for(const u of o.delta.content)if(u.index in n.content){let m=n.content[u.index];n.content[u.index]=J(this,Zn,"m",oT).call(this,u,m)}else n.content[u.index]=u,i.push(u);return[n,i];case"thread.message.in_progress":case"thread.message.completed":case"thread.message.incomplete":if(n)return[n,i];throw Error("Received thread message event with no existing snapshot")}throw Error("Tried to accumulate a non-message event")},oT=function(t,n){return Vl.accumulateDelta(n,t)},lT=function(t){switch(Ft(this,pd,t.data),t.event){case"thread.run.created":break;case"thread.run.queued":break;case"thread.run.in_progress":break;case"thread.run.requires_action":case"thread.run.cancelled":case"thread.run.failed":case"thread.run.completed":case"thread.run.expired":case"thread.run.incomplete":Ft(this,Pl,t.data),J(this,fi,"f")&&(this._emit("toolCallDone",J(this,fi,"f")),Ft(this,fi,void 0));break}};let Py=class extends qt{constructor(){super(...arguments),this.steps=new xA(this._client)}create(t,n,i){const{include:o,...u}=n;return this._client.post(vt`/threads/${t}/runs`,{query:{include:o},body:u,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1})}retrieve(t,n,i){const{thread_id:o}=n;return this._client.get(vt`/threads/${o}/runs/${t}`,{...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(t,n,i){const{thread_id:o,...u}=n;return this._client.post(vt`/threads/${o}/runs/${t}`,{body:u,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(t,n={},i){return this._client.getAPIList(vt`/threads/${t}/runs`,wn,{query:n,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(t,n,i){const{thread_id:o}=n;return this._client.post(vt`/threads/${o}/runs/${t}/cancel`,{...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(t,n,i){const o=await this.create(t,n,i);return await this.poll(o.id,{thread_id:t},i)}createAndStream(t,n,i){return Cf.createAssistantStream(t,this._client.beta.threads.runs,n,i)}async poll(t,n,i){const o=Pt([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:u,response:m}=await this.retrieve(t,n,{...i,headers:{...i?.headers,...o}}).withResponse();switch(u.status){case"queued":case"in_progress":case"cancelling":let y=5e3;if(i?.pollIntervalMs)y=i.pollIntervalMs;else{const E=m.headers.get("openai-poll-after-ms");if(E){const T=parseInt(E);isNaN(T)||(y=T)}}await Ff(y);break;case"requires_action":case"incomplete":case"cancelled":case"completed":case"failed":case"expired":return u}}}stream(t,n,i){return Cf.createAssistantStream(t,this._client.beta.threads.runs,n,i)}submitToolOutputs(t,n,i){const{thread_id:o,...u}=n;return this._client.post(vt`/threads/${o}/runs/${t}/submit_tool_outputs`,{body:u,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers]),stream:n.stream??!1})}async submitToolOutputsAndPoll(t,n,i){const o=await this.submitToolOutputs(t,n,i);return await this.poll(o.id,n,i)}submitToolOutputsStream(t,n,i){return Cf.createToolAssistantStream(t,this._client.beta.threads.runs,n,i)}};Py.Steps=xA;class lm extends qt{constructor(){super(...arguments),this.runs=new Py(this._client),this.messages=new CA(this._client)}create(t={},n){return this._client.post("/threads",{body:t,...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(vt`/threads/${t}`,{...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,i){return this._client.post(vt`/threads/${t}`,{body:n,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(t,n){return this._client.delete(vt`/threads/${t}`,{...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}createAndRun(t,n){return this._client.post("/threads/runs",{body:t,...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers]),stream:t.stream??!1})}async createAndRunPoll(t,n){const i=await this.createAndRun(t,n);return await this.runs.poll(i.id,{thread_id:i.thread_id},n)}createAndRunStream(t,n){return Cf.createThreadAssistantStream(t,this._client.beta.threads,n)}}lm.Runs=Py;lm.Messages=CA;class Qf extends qt{constructor(){super(...arguments),this.realtime=new om(this._client),this.assistants=new SA(this._client),this.threads=new lm(this._client)}}Qf.Realtime=om;Qf.Assistants=SA;Qf.Threads=lm;class DA extends qt{create(t,n){return this._client.post("/completions",{body:t,...n,stream:t.stream??!1})}}class OA extends qt{retrieve(t,n,i){const{container_id:o}=n;return this._client.get(vt`/containers/${o}/files/${t}/content`,{...i,headers:Pt([{Accept:"application/binary"},i?.headers]),__binaryResponse:!0})}}let Uy=class extends qt{constructor(){super(...arguments),this.content=new OA(this._client)}create(t,n,i){return this._client.post(vt`/containers/${t}/files`,zl({body:n,...i},this._client))}retrieve(t,n,i){const{container_id:o}=n;return this._client.get(vt`/containers/${o}/files/${t}`,i)}list(t,n={},i){return this._client.getAPIList(vt`/containers/${t}/files`,wn,{query:n,...i})}delete(t,n,i){const{container_id:o}=n;return this._client.delete(vt`/containers/${o}/files/${t}`,{...i,headers:Pt([{Accept:"*/*"},i?.headers])})}};Uy.Content=OA;class ky extends qt{constructor(){super(...arguments),this.files=new Uy(this._client)}create(t,n){return this._client.post("/containers",{body:t,...n})}retrieve(t,n){return this._client.get(vt`/containers/${t}`,n)}list(t={},n){return this._client.getAPIList("/containers",wn,{query:t,...n})}delete(t,n){return this._client.delete(vt`/containers/${t}`,{...n,headers:Pt([{Accept:"*/*"},n?.headers])})}}ky.Files=Uy;class NA extends qt{create(t,n,i){const{include:o,...u}=n;return this._client.post(vt`/conversations/${t}/items`,{query:{include:o},body:u,...i})}retrieve(t,n,i){const{conversation_id:o,...u}=n;return this._client.get(vt`/conversations/${o}/items/${t}`,{query:u,...i})}list(t,n={},i){return this._client.getAPIList(vt`/conversations/${t}/items`,_D,{query:n,...i})}delete(t,n,i){const{conversation_id:o}=n;return this._client.delete(vt`/conversations/${o}/items/${t}`,i)}}class Ly extends qt{constructor(){super(...arguments),this.items=new NA(this._client)}create(t,n){return this._client.post("/conversations",{body:t,...n})}retrieve(t,n){return this._client.get(vt`/conversations/${t}`,n)}update(t,n,i){return this._client.post(vt`/conversations/${t}`,{body:n,...i})}delete(t,n){return this._client.delete(vt`/conversations/${t}`,n)}}Ly.Items=NA;class MA extends qt{create(t,n){const i=!!t.encoding_format;let o=i?t.encoding_format:"base64";i&&Xn(this._client).debug("embeddings/user defined encoding_format:",t.encoding_format);const u=this._client.post("/embeddings",{body:{...t,encoding_format:o},...n});return i?u:(Xn(this._client).debug("embeddings/decoding base64 embeddings from base64"),u._thenUnwrap(m=>(m&&m.data&&m.data.forEach(y=>{const E=y.embedding;y.embedding=zD(E)}),m)))}}class VA extends qt{retrieve(t,n,i){const{eval_id:o,run_id:u}=n;return this._client.get(vt`/evals/${o}/runs/${u}/output_items/${t}`,i)}list(t,n,i){const{eval_id:o,...u}=n;return this._client.getAPIList(vt`/evals/${o}/runs/${t}/output_items`,wn,{query:u,...i})}}class By extends qt{constructor(){super(...arguments),this.outputItems=new VA(this._client)}create(t,n,i){return this._client.post(vt`/evals/${t}/runs`,{body:n,...i})}retrieve(t,n,i){const{eval_id:o}=n;return this._client.get(vt`/evals/${o}/runs/${t}`,i)}list(t,n={},i){return this._client.getAPIList(vt`/evals/${t}/runs`,wn,{query:n,...i})}delete(t,n,i){const{eval_id:o}=n;return this._client.delete(vt`/evals/${o}/runs/${t}`,i)}cancel(t,n,i){const{eval_id:o}=n;return this._client.post(vt`/evals/${o}/runs/${t}`,i)}}By.OutputItems=VA;class jy extends qt{constructor(){super(...arguments),this.runs=new By(this._client)}create(t,n){return this._client.post("/evals",{body:t,...n})}retrieve(t,n){return this._client.get(vt`/evals/${t}`,n)}update(t,n,i){return this._client.post(vt`/evals/${t}`,{body:n,...i})}list(t={},n){return this._client.getAPIList("/evals",wn,{query:t,...n})}delete(t,n){return this._client.delete(vt`/evals/${t}`,n)}}jy.Runs=By;let PA=class extends qt{create(t,n){return this._client.post("/files",zl({body:t,...n},this._client))}retrieve(t,n){return this._client.get(vt`/files/${t}`,n)}list(t={},n){return this._client.getAPIList("/files",wn,{query:t,...n})}delete(t,n){return this._client.delete(vt`/files/${t}`,n)}content(t,n){return this._client.get(vt`/files/${t}/content`,{...n,headers:Pt([{Accept:"application/binary"},n?.headers]),__binaryResponse:!0})}async waitForProcessing(t,{pollInterval:n=5e3,maxWait:i=1800*1e3}={}){const o=new Set(["processed","error","deleted"]),u=Date.now();let m=await this.retrieve(t);for(;!m.status||!o.has(m.status);)if(await Ff(n),m=await this.retrieve(t),Date.now()-u>i)throw new Ry({message:`Giving up on waiting for file ${t} to finish processing after ${i} milliseconds.`});return m}};class UA extends qt{}let kA=class extends qt{run(t,n){return this._client.post("/fine_tuning/alpha/graders/run",{body:t,...n})}validate(t,n){return this._client.post("/fine_tuning/alpha/graders/validate",{body:t,...n})}};class zy extends qt{constructor(){super(...arguments),this.graders=new kA(this._client)}}zy.Graders=kA;class LA extends qt{create(t,n,i){return this._client.getAPIList(vt`/fine_tuning/checkpoints/${t}/permissions`,am,{body:n,method:"post",...i})}retrieve(t,n={},i){return this._client.get(vt`/fine_tuning/checkpoints/${t}/permissions`,{query:n,...i})}delete(t,n,i){const{fine_tuned_model_checkpoint:o}=n;return this._client.delete(vt`/fine_tuning/checkpoints/${o}/permissions/${t}`,i)}}let qy=class extends qt{constructor(){super(...arguments),this.permissions=new LA(this._client)}};qy.Permissions=LA;class BA extends qt{list(t,n={},i){return this._client.getAPIList(vt`/fine_tuning/jobs/${t}/checkpoints`,wn,{query:n,...i})}}class Hy extends qt{constructor(){super(...arguments),this.checkpoints=new BA(this._client)}create(t,n){return this._client.post("/fine_tuning/jobs",{body:t,...n})}retrieve(t,n){return this._client.get(vt`/fine_tuning/jobs/${t}`,n)}list(t={},n){return this._client.getAPIList("/fine_tuning/jobs",wn,{query:t,...n})}cancel(t,n){return this._client.post(vt`/fine_tuning/jobs/${t}/cancel`,n)}listEvents(t,n={},i){return this._client.getAPIList(vt`/fine_tuning/jobs/${t}/events`,wn,{query:n,...i})}pause(t,n){return this._client.post(vt`/fine_tuning/jobs/${t}/pause`,n)}resume(t,n){return this._client.post(vt`/fine_tuning/jobs/${t}/resume`,n)}}Hy.Checkpoints=BA;class oc extends qt{constructor(){super(...arguments),this.methods=new UA(this._client),this.jobs=new Hy(this._client),this.checkpoints=new qy(this._client),this.alpha=new zy(this._client)}}oc.Methods=UA;oc.Jobs=Hy;oc.Checkpoints=qy;oc.Alpha=zy;class jA extends qt{}class Fy extends qt{constructor(){super(...arguments),this.graderModels=new jA(this._client)}}Fy.GraderModels=jA;class zA extends qt{createVariation(t,n){return this._client.post("/images/variations",zl({body:t,...n},this._client))}edit(t,n){return this._client.post("/images/edits",zl({body:t,...n,stream:t.stream??!1},this._client))}generate(t,n){return this._client.post("/images/generations",{body:t,...n,stream:t.stream??!1})}}class qA extends qt{retrieve(t,n){return this._client.get(vt`/models/${t}`,n)}list(t){return this._client.getAPIList("/models",am,t)}delete(t,n){return this._client.delete(vt`/models/${t}`,n)}}class HA extends qt{create(t,n){return this._client.post("/moderations",{body:t,...n})}}function HD(s,t){return!t||!$D(t)?{...s,output_parsed:null,output:s.output.map(n=>n.type==="function_call"?{...n,parsed_arguments:null}:n.type==="message"?{...n,content:n.content.map(i=>({...i,parsed:null}))}:n)}:FA(s,t)}function FA(s,t){const n=s.output.map(o=>{if(o.type==="function_call")return{...o,parsed_arguments:YD(t,o)};if(o.type==="message"){const u=o.content.map(m=>m.type==="output_text"?{...m,parsed:FD(t,m.text)}:m);return{...o,content:u}}return o}),i=Object.assign({},s,{output:n});return Object.getOwnPropertyDescriptor(s,"output_text")||Pg(i),Object.defineProperty(i,"output_parsed",{enumerable:!0,get(){for(const o of i.output)if(o.type==="message"){for(const u of o.content)if(u.type==="output_text"&&u.parsed!==null)return u.parsed}return null}}),i}function FD(s,t){return s.text?.format?.type!=="json_schema"?null:"$parseRaw"in s.text?.format?(s.text?.format).$parseRaw(t):JSON.parse(t)}function $D(s){return!!xy(s.text?.format)}function GD(s){return s?.$brand==="auto-parseable-tool"}function QD(s,t){return s.find(n=>n.type==="function"&&n.name===t)}function YD(s,t){const n=QD(s.tools??[],t.name);return{...t,...t,parsed_arguments:GD(n)?n.$parseRaw(t.arguments):n?.strict?JSON.parse(t.arguments):null}}function Pg(s){const t=[];for(const n of s.output)if(n.type==="message")for(const i of n.content)i.type==="output_text"&&t.push(i.text);s.output_text=t.join("")}var Bu,ed,xo,nd,uT,cT,fT,hT;class $y extends Oy{constructor(t){super(),Bu.add(this),ed.set(this,void 0),xo.set(this,void 0),nd.set(this,void 0),Ft(this,ed,t)}static createResponse(t,n,i){const o=new $y(n);return o._run(()=>o._createOrRetrieveResponse(t,n,{...i,headers:{...i?.headers,"X-Stainless-Helper-Method":"stream"}})),o}async _createOrRetrieveResponse(t,n,i){const o=i?.signal;o&&(o.aborted&&this.controller.abort(),o.addEventListener("abort",()=>this.controller.abort())),J(this,Bu,"m",uT).call(this);let u,m=null;"response_id"in n?(u=await t.responses.retrieve(n.response_id,{stream:!0},{...i,signal:this.controller.signal,stream:!0}),m=n.starting_after??null):u=await t.responses.create({...n,stream:!0},{...i,signal:this.controller.signal}),this._connected();for await(const y of u)J(this,Bu,"m",cT).call(this,y,m);if(u.controller.signal?.aborted)throw new Vi;return J(this,Bu,"m",fT).call(this)}[(ed=new WeakMap,xo=new WeakMap,nd=new WeakMap,Bu=new WeakSet,uT=function(){this.ended||Ft(this,xo,void 0)},cT=function(n,i){if(this.ended)return;const o=(m,y)=>{(i==null||y.sequence_number>i)&&this._emit(m,y)},u=J(this,Bu,"m",hT).call(this,n);switch(o("event",n),n.type){case"response.output_text.delta":{const m=u.output[n.output_index];if(!m)throw new jt(`missing output at index ${n.output_index}`);if(m.type==="message"){const y=m.content[n.content_index];if(!y)throw new jt(`missing content at index ${n.content_index}`);if(y.type!=="output_text")throw new jt(`expected content to be 'output_text', got ${y.type}`);o("response.output_text.delta",{...n,snapshot:y.text})}break}case"response.function_call_arguments.delta":{const m=u.output[n.output_index];if(!m)throw new jt(`missing output at index ${n.output_index}`);m.type==="function_call"&&o("response.function_call_arguments.delta",{...n,snapshot:m.arguments});break}default:o(n.type,n);break}},fT=function(){if(this.ended)throw new jt("stream has ended, this shouldn't happen");const n=J(this,xo,"f");if(!n)throw new jt("request ended without sending any events");Ft(this,xo,void 0);const i=KD(n,J(this,ed,"f"));return Ft(this,nd,i),i},hT=function(n){let i=J(this,xo,"f");if(!i){if(n.type!=="response.created")throw new jt(`When snapshot hasn't been set yet, expected 'response.created' event, got ${n.type}`);return i=Ft(this,xo,n.response),i}switch(n.type){case"response.output_item.added":{i.output.push(n.item);break}case"response.content_part.added":{const o=i.output[n.output_index];if(!o)throw new jt(`missing output at index ${n.output_index}`);o.type==="message"&&o.content.push(n.part);break}case"response.output_text.delta":{const o=i.output[n.output_index];if(!o)throw new jt(`missing output at index ${n.output_index}`);if(o.type==="message"){const u=o.content[n.content_index];if(!u)throw new jt(`missing content at index ${n.content_index}`);if(u.type!=="output_text")throw new jt(`expected content to be 'output_text', got ${u.type}`);u.text+=n.delta}break}case"response.function_call_arguments.delta":{const o=i.output[n.output_index];if(!o)throw new jt(`missing output at index ${n.output_index}`);o.type==="function_call"&&(o.arguments+=n.delta);break}case"response.completed":{Ft(this,xo,n.response);break}}return i},Symbol.asyncIterator)](){const t=[],n=[];let i=!1;return this.on("event",o=>{const u=n.shift();u?u.resolve(o):t.push(o)}),this.on("end",()=>{i=!0;for(const o of n)o.resolve(void 0);n.length=0}),this.on("abort",o=>{i=!0;for(const u of n)u.reject(o);n.length=0}),this.on("error",o=>{i=!0;for(const u of n)u.reject(o);n.length=0}),{next:async()=>t.length?{value:t.shift(),done:!1}:i?{value:void 0,done:!0}:new Promise((u,m)=>n.push({resolve:u,reject:m})).then(u=>u?{value:u,done:!1}:{value:void 0,done:!0}),return:async()=>(this.abort(),{value:void 0,done:!0})}}async finalResponse(){await this.done();const t=J(this,nd,"f");if(!t)throw new jt("stream ended without producing a ChatCompletion");return t}}function KD(s,t){return HD(s,t)}class $A extends qt{list(t,n={},i){return this._client.getAPIList(vt`/responses/${t}/input_items`,wn,{query:n,...i})}}class Gy extends qt{constructor(){super(...arguments),this.inputItems=new $A(this._client)}create(t,n){return this._client.post("/responses",{body:t,...n,stream:t.stream??!1})._thenUnwrap(i=>("object"in i&&i.object==="response"&&Pg(i),i))}retrieve(t,n={},i){return this._client.get(vt`/responses/${t}`,{query:n,...i,stream:n?.stream??!1})._thenUnwrap(o=>("object"in o&&o.object==="response"&&Pg(o),o))}delete(t,n){return this._client.delete(vt`/responses/${t}`,{...n,headers:Pt([{Accept:"*/*"},n?.headers])})}parse(t,n){return this._client.responses.create(t,n)._thenUnwrap(i=>FA(i,t))}stream(t,n){return $y.createResponse(this._client,t,n)}cancel(t,n){return this._client.post(vt`/responses/${t}/cancel`,n)}}Gy.InputItems=$A;class GA extends qt{create(t,n,i){return this._client.post(vt`/uploads/${t}/parts`,zl({body:n,...i},this._client))}}class Qy extends qt{constructor(){super(...arguments),this.parts=new GA(this._client)}create(t,n){return this._client.post("/uploads",{body:t,...n})}cancel(t,n){return this._client.post(vt`/uploads/${t}/cancel`,n)}complete(t,n,i){return this._client.post(vt`/uploads/${t}/complete`,{body:n,...i})}}Qy.Parts=GA;const XD=async s=>{const t=await Promise.allSettled(s),n=t.filter(o=>o.status==="rejected");if(n.length){for(const o of n)console.error(o.reason);throw new Error(`${n.length} promise(s) failed - see the above errors`)}const i=[];for(const o of t)o.status==="fulfilled"&&i.push(o.value);return i};class QA extends qt{create(t,n,i){return this._client.post(vt`/vector_stores/${t}/file_batches`,{body:n,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(t,n,i){const{vector_store_id:o}=n;return this._client.get(vt`/vector_stores/${o}/file_batches/${t}`,{...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}cancel(t,n,i){const{vector_store_id:o}=n;return this._client.post(vt`/vector_stores/${o}/file_batches/${t}/cancel`,{...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(t,n,i){const o=await this.create(t,n);return await this.poll(t,o.id,i)}listFiles(t,n,i){const{vector_store_id:o,...u}=n;return this._client.getAPIList(vt`/vector_stores/${o}/file_batches/${t}/files`,wn,{query:u,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async poll(t,n,i){const o=Pt([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const{data:u,response:m}=await this.retrieve(n,{vector_store_id:t},{...i,headers:o}).withResponse();switch(u.status){case"in_progress":let y=5e3;if(i?.pollIntervalMs)y=i.pollIntervalMs;else{const E=m.headers.get("openai-poll-after-ms");if(E){const T=parseInt(E);isNaN(T)||(y=T)}}await Ff(y);break;case"failed":case"cancelled":case"completed":return u}}}async uploadAndPoll(t,{files:n,fileIds:i=[]},o){if(n==null||n.length==0)throw new Error("No `files` provided to process. If you've already uploaded files you should use `.createAndPoll()` instead");const u=o?.maxConcurrency??5,m=Math.min(u,n.length),y=this._client,E=n.values(),T=[...i];async function S(N){for(let V of N){const tt=await y.files.create({file:V,purpose:"assistants"},o);T.push(tt.id)}}const x=Array(m).fill(E).map(S);return await XD(x),await this.createAndPoll(t,{file_ids:T})}}class YA extends qt{create(t,n,i){return this._client.post(vt`/vector_stores/${t}/files`,{body:n,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}retrieve(t,n,i){const{vector_store_id:o}=n;return this._client.get(vt`/vector_stores/${o}/files/${t}`,{...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}update(t,n,i){const{vector_store_id:o,...u}=n;return this._client.post(vt`/vector_stores/${o}/files/${t}`,{body:u,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(t,n={},i){return this._client.getAPIList(vt`/vector_stores/${t}/files`,wn,{query:n,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}delete(t,n,i){const{vector_store_id:o}=n;return this._client.delete(vt`/vector_stores/${o}/files/${t}`,{...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}async createAndPoll(t,n,i){const o=await this.create(t,n,i);return await this.poll(t,o.id,i)}async poll(t,n,i){const o=Pt([i?.headers,{"X-Stainless-Poll-Helper":"true","X-Stainless-Custom-Poll-Interval":i?.pollIntervalMs?.toString()??void 0}]);for(;;){const u=await this.retrieve(n,{vector_store_id:t},{...i,headers:o}).withResponse(),m=u.data;switch(m.status){case"in_progress":let y=5e3;if(i?.pollIntervalMs)y=i.pollIntervalMs;else{const E=u.response.headers.get("openai-poll-after-ms");if(E){const T=parseInt(E);isNaN(T)||(y=T)}}await Ff(y);break;case"failed":case"completed":return m}}}async upload(t,n,i){const o=await this._client.files.create({file:n,purpose:"assistants"},i);return this.create(t,{file_id:o.id},i)}async uploadAndPoll(t,n,i){const o=await this.upload(t,n,i);return await this.poll(t,o.id,i)}content(t,n,i){const{vector_store_id:o}=n;return this._client.getAPIList(vt`/vector_stores/${o}/files/${t}/content`,am,{...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}class um extends qt{constructor(){super(...arguments),this.files=new YA(this._client),this.fileBatches=new QA(this._client)}create(t,n){return this._client.post("/vector_stores",{body:t,...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}retrieve(t,n){return this._client.get(vt`/vector_stores/${t}`,{...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}update(t,n,i){return this._client.post(vt`/vector_stores/${t}`,{body:n,...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}list(t={},n){return this._client.getAPIList("/vector_stores",wn,{query:t,...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}delete(t,n){return this._client.delete(vt`/vector_stores/${t}`,{...n,headers:Pt([{"OpenAI-Beta":"assistants=v2"},n?.headers])})}search(t,n,i){return this._client.getAPIList(vt`/vector_stores/${t}/search`,am,{body:n,method:"post",...i,headers:Pt([{"OpenAI-Beta":"assistants=v2"},i?.headers])})}}um.Files=YA;um.FileBatches=QA;var Gu,KA,gd;class XA extends qt{constructor(){super(...arguments),Gu.add(this)}async unwrap(t,n,i=this._client.webhookSecret,o=300){return await this.verifySignature(t,n,i,o),JSON.parse(t)}async verifySignature(t,n,i=this._client.webhookSecret,o=300){if(typeof crypto>"u"||typeof crypto.subtle.importKey!="function"||typeof crypto.subtle.verify!="function")throw new Error("Webhook signature verification is only supported when the `crypto` global is defined");J(this,Gu,"m",KA).call(this,i);const u=Pt([n]).values,m=J(this,Gu,"m",gd).call(this,u,"webhook-signature"),y=J(this,Gu,"m",gd).call(this,u,"webhook-timestamp"),E=J(this,Gu,"m",gd).call(this,u,"webhook-id"),T=parseInt(y,10);if(isNaN(T))throw new uf("Invalid webhook timestamp format");const S=Math.floor(Date.now()/1e3);if(S-T>o)throw new uf("Webhook timestamp is too old");if(T>S+o)throw new uf("Webhook timestamp is too new");const x=m.split(" ").map(Z=>Z.startsWith("v1,")?Z.substring(3):Z),N=i.startsWith("whsec_")?Buffer.from(i.replace("whsec_",""),"base64"):Buffer.from(i,"utf-8"),V=E?`${E}.${y}.${t}`:`${y}.${t}`,tt=await crypto.subtle.importKey("raw",N,{name:"HMAC",hash:"SHA-256"},!1,["verify"]);for(const Z of x)try{const ot=Buffer.from(Z,"base64");if(await crypto.subtle.verify("HMAC",tt,ot,new TextEncoder().encode(V)))return}catch{continue}throw new uf("The given webhook signature does not match the expected signature")}}Gu=new WeakSet,KA=function(t){if(typeof t!="string"||t.length===0)throw new Error("The webhook secret must either be set using the env var, OPENAI_WEBHOOK_SECRET, on the client class, OpenAI({ webhookSecret: '123' }), or passed to this function")},gd=function(t,n){if(!t)throw new Error("Headers are required");const i=t.get(n);if(i==null)throw new Error(`Missing required header: ${n}`);return i};var Ug,Yy,yd,ZA;class ne{constructor({baseURL:t=Lu("OPENAI_BASE_URL"),apiKey:n=Lu("OPENAI_API_KEY"),organization:i=Lu("OPENAI_ORG_ID")??null,project:o=Lu("OPENAI_PROJECT_ID")??null,webhookSecret:u=Lu("OPENAI_WEBHOOK_SECRET")??null,...m}={}){if(Ug.add(this),yd.set(this,void 0),this.completions=new DA(this),this.chat=new Vy(this),this.embeddings=new MA(this),this.files=new PA(this),this.images=new zA(this),this.audio=new Gf(this),this.moderations=new HA(this),this.models=new qA(this),this.fineTuning=new oc(this),this.graders=new Fy(this),this.vectorStores=new um(this),this.webhooks=new XA(this),this.beta=new Qf(this),this.batches=new AA(this),this.uploads=new Qy(this),this.responses=new Gy(this),this.conversations=new Ly(this),this.evals=new jy(this),this.containers=new ky(this),n===void 0)throw new jt("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'My API Key' }).");const y={apiKey:n,organization:i,project:o,webhookSecret:u,...m,baseURL:t||"https://api.openai.com/v1"};if(!y.dangerouslyAllowBrowser&&Kx())throw new jt(`It looks like you're running in a browser-like environment.

This is disabled by default, as it risks exposing your secret API credentials to attackers.
If you understand the risks and have appropriate mitigations in place,
you can set the \`dangerouslyAllowBrowser\` option to \`true\`, e.g.,

new OpenAI({ apiKey, dangerouslyAllowBrowser: true });

https://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety
`);this.baseURL=y.baseURL,this.timeout=y.timeout??Yy.DEFAULT_TIMEOUT,this.logger=y.logger??console;const E="warn";this.logLevel=E,this.logLevel=XE(y.logLevel,"ClientOptions.logLevel",this)??XE(Lu("OPENAI_LOG"),"process.env['OPENAI_LOG']",this)??E,this.fetchOptions=y.fetchOptions,this.maxRetries=y.maxRetries??2,this.fetch=y.fetch??tD(),Ft(this,yd,nD),this._options=y,this.apiKey=n,this.organization=i,this.project=o,this.webhookSecret=u}withOptions(t){return new this.constructor({...this._options,baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,organization:this.organization,project:this.project,webhookSecret:this.webhookSecret,...t})}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:t,nulls:n}){}async authHeaders(t){return Pt([{Authorization:`Bearer ${this.apiKey}`}])}stringifyQuery(t){return lD(t,{arrayFormat:"brackets"})}getUserAgent(){return`${this.constructor.name}/JS ${Fu}`}defaultIdempotencyKey(){return`stainless-node-retry-${Ib()}`}makeStatusError(t,n,i,o){return er.generate(t,n,i,o)}buildURL(t,n,i){const o=!J(this,Ug,"m",ZA).call(this)&&i||this.baseURL,u=Fx(t)?new URL(t):new URL(o+(o.endsWith("/")&&t.startsWith("/")?t.slice(1):t)),m=this.defaultQuery();return $x(m)||(n={...m,...n}),typeof n=="object"&&n&&!Array.isArray(n)&&(u.search=this.stringifyQuery(n)),u.toString()}async prepareOptions(t){}async prepareRequest(t,{url:n,options:i}){}get(t,n){return this.methodRequest("get",t,n)}post(t,n){return this.methodRequest("post",t,n)}patch(t,n){return this.methodRequest("patch",t,n)}put(t,n){return this.methodRequest("put",t,n)}delete(t,n){return this.methodRequest("delete",t,n)}methodRequest(t,n,i){return this.request(Promise.resolve(i).then(o=>({method:t,path:n,...o})))}request(t,n=null){return new sm(this,this.makeRequest(t,n,void 0))}async makeRequest(t,n,i){const o=await t,u=o.maxRetries??this.maxRetries;n==null&&(n=u),await this.prepareOptions(o);const{req:m,url:y,timeout:E}=await this.buildRequest(o,{retryCount:u-n});await this.prepareRequest(m,{url:y,options:o});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),S=i===void 0?"":`, retryOf: ${i}`,x=Date.now();if(Xn(this).debug(`[${T}] sending request`,Ol({retryOfRequestLogID:i,method:o.method,url:y,options:o,headers:m.headers})),o.signal?.aborted)throw new Vi;const N=new AbortController,V=await this.fetchWithTimeout(y,m,E,N).catch(Sg),tt=Date.now();if(V instanceof Error){const bt=`retrying, ${n} attempts remaining`;if(o.signal?.aborted)throw new Vi;const pt=Ag(V)||/timed? ?out/i.test(String(V)+("cause"in V?String(V.cause):""));if(n)return Xn(this).info(`[${T}] connection ${pt?"timed out":"failed"} - ${bt}`),Xn(this).debug(`[${T}] connection ${pt?"timed out":"failed"} (${bt})`,Ol({retryOfRequestLogID:i,url:y,durationMs:tt-x,message:V.message})),this.retryRequest(o,n,i??T);throw Xn(this).info(`[${T}] connection ${pt?"timed out":"failed"} - error; no more retries left`),Xn(this).debug(`[${T}] connection ${pt?"timed out":"failed"} (error; no more retries left)`,Ol({retryOfRequestLogID:i,url:y,durationMs:tt-x,message:V.message})),pt?new Ry:new rm({cause:V})}const Z=[...V.headers.entries()].filter(([bt])=>bt==="x-request-id").map(([bt,pt])=>", "+bt+": "+JSON.stringify(pt)).join(""),ot=`[${T}${S}${Z}] ${m.method} ${y} ${V.ok?"succeeded":"failed"} with status ${V.status} in ${tt-x}ms`;if(!V.ok){const bt=await this.shouldRetry(V);if(n&&bt){const z=`retrying, ${n} attempts remaining`;return await eD(V.body),Xn(this).info(`${ot} - ${z}`),Xn(this).debug(`[${T}] response error (${z})`,Ol({retryOfRequestLogID:i,url:V.url,status:V.status,headers:V.headers,durationMs:tt-x})),this.retryRequest(o,n,i??T,V.headers)}const pt=bt?"error; no more retries left":"error; not retryable";Xn(this).info(`${ot} - ${pt}`);const wt=await V.text().catch(z=>Sg(z).message),Et=Yx(wt),Dt=Et?void 0:wt;throw Xn(this).debug(`[${T}] response error (${pt})`,Ol({retryOfRequestLogID:i,url:V.url,status:V.status,headers:V.headers,message:Dt,durationMs:Date.now()-x})),this.makeStatusError(V.status,Et,Dt,V.headers)}return Xn(this).info(ot),Xn(this).debug(`[${T}] response start`,Ol({retryOfRequestLogID:i,url:V.url,status:V.status,headers:V.headers,durationMs:tt-x})),{response:V,options:o,controller:N,requestLogID:T,retryOfRequestLogID:i,startTime:x}}getAPIList(t,n,i){return this.requestAPIList(n,{method:"get",path:t,...i})}requestAPIList(t,n){const i=this.makeRequest(n,null,void 0);return new yD(this,i,t)}async fetchWithTimeout(t,n,i,o){const{signal:u,method:m,...y}=n||{};u&&u.addEventListener("abort",()=>o.abort());const E=setTimeout(()=>o.abort(),i),T=globalThis.ReadableStream&&y.body instanceof globalThis.ReadableStream||typeof y.body=="object"&&y.body!==null&&Symbol.asyncIterator in y.body,S={signal:o.signal,...T?{duplex:"half"}:{},method:"GET",...y};m&&(S.method=m.toUpperCase());try{return await this.fetch.call(void 0,t,S)}finally{clearTimeout(E)}}async shouldRetry(t){const n=t.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:t.status===408||t.status===409||t.status===429||t.status>=500}async retryRequest(t,n,i,o){let u;const m=o?.get("retry-after-ms");if(m){const E=parseFloat(m);Number.isNaN(E)||(u=E)}const y=o?.get("retry-after");if(y&&!u){const E=parseFloat(y);Number.isNaN(E)?u=Date.parse(y)-Date.now():u=E*1e3}if(!(u&&0<=u&&u<60*1e3)){const E=t.maxRetries??this.maxRetries;u=this.calculateDefaultRetryTimeoutMillis(n,E)}return await Ff(u),this.makeRequest(t,n-1,i)}calculateDefaultRetryTimeoutMillis(t,n){const u=n-t,m=Math.min(.5*Math.pow(2,u),8),y=1-Math.random()*.25;return m*y*1e3}async buildRequest(t,{retryCount:n=0}={}){const i={...t},{method:o,path:u,query:m,defaultBaseURL:y}=i,E=this.buildURL(u,m,y);"timeout"in i&&Qx("timeout",i.timeout),i.timeout=i.timeout??this.timeout;const{bodyHeaders:T,body:S}=this.buildBody({options:i}),x=await this.buildHeaders({options:t,method:o,bodyHeaders:T,retryCount:n});return{req:{method:o,headers:x,...i.signal&&{signal:i.signal},...globalThis.ReadableStream&&S instanceof globalThis.ReadableStream&&{duplex:"half"},...S&&{body:S},...this.fetchOptions??{},...i.fetchOptions??{}},url:E,timeout:i.timeout}}async buildHeaders({options:t,method:n,bodyHeaders:i,retryCount:o}){let u={};this.idempotencyHeader&&n!=="get"&&(t.idempotencyKey||(t.idempotencyKey=this.defaultIdempotencyKey()),u[this.idempotencyHeader]=t.idempotencyKey);const m=Pt([u,{Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(o),...t.timeout?{"X-Stainless-Timeout":String(Math.trunc(t.timeout/1e3))}:{},...Wx(),"OpenAI-Organization":this.organization,"OpenAI-Project":this.project},await this.authHeaders(t),this._options.defaultHeaders,i,t.headers]);return this.validateHeaders(m),m.values}buildBody({options:{body:t,headers:n}}){if(!t)return{bodyHeaders:void 0,body:void 0};const i=Pt([n]);return ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof DataView||typeof t=="string"&&i.values.has("content-type")||globalThis.Blob&&t instanceof globalThis.Blob||t instanceof FormData||t instanceof URLSearchParams||globalThis.ReadableStream&&t instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:t}:typeof t=="object"&&(Symbol.asyncIterator in t||Symbol.iterator in t&&"next"in t&&typeof t.next=="function")?{bodyHeaders:void 0,body:jb(t)}:J(this,yd,"f").call(this,{body:t,headers:i})}}Yy=ne,yd=new WeakMap,Ug=new WeakSet,ZA=function(){return this.baseURL!=="https://api.openai.com/v1"};ne.OpenAI=Yy;ne.DEFAULT_TIMEOUT=6e5;ne.OpenAIError=jt;ne.APIError=er;ne.APIConnectionError=rm;ne.APIConnectionTimeoutError=Ry;ne.APIUserAbortError=Vi;ne.NotFoundError=Ob;ne.ConflictError=Nb;ne.RateLimitError=Vb;ne.BadRequestError=Cb;ne.AuthenticationError=xb;ne.InternalServerError=Pb;ne.PermissionDeniedError=Db;ne.UnprocessableEntityError=Mb;ne.InvalidWebhookSignatureError=uf;ne.toFile=AD;ne.Completions=DA;ne.Chat=Vy;ne.Embeddings=MA;ne.Files=PA;ne.Images=zA;ne.Audio=Gf;ne.Moderations=HA;ne.Models=qA;ne.FineTuning=oc;ne.Graders=Fy;ne.VectorStores=um;ne.Webhooks=XA;ne.Beta=Qf;ne.Batches=AA;ne.Uploads=Qy;ne.Responses=Gy;ne.Conversations=Ly;ne.Evals=jy;ne.Containers=ky;const ZD="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";new ne({apiKey:ZD,dangerouslyAllowBrowser:!0});const JD=1e3,WD=s=>{const{savePhantomMessage:t}=Sb(),[n,i]=dn.useState({time:new Date,state:"idle"}),o=dn.useRef(n);dn.useEffect(()=>{y(n.state)},[n]);let u=null;const m=dn.useRef(null);function y(Z){o.current={state:Z,time:new Date}}function E(Z){const ot={time:new Date,state:Z};var bt=o.current?.state;y(Z),Z!==bt&&(i(ot),t(ot.state,Qu.loadUser()))}function T(Z){return Z.which===8||Z.which===46}function S(){const Z=o.current;if(Z.state==="typing"||Z.state==="fixing"){var ot=new Date,bt=ot.getTime()-o.current?.time.getTime();bt>JD&&(i({time:new Date,state:"idle"}),t("idle",Qu.loadUser()))}}function x(Z){Z.preventDefault(),Z.which===13?(Z.target.value.indexOf("tirc")===0||V(Z.target.value),Z.target.blur(),m.current.focus(),tt(Z.target)):T(Z)?E("fixing"):E("typing")}function N(Z){E("idle")}function V(Z){Ab(Qu.loadUser(),"comment",Z),E("idle")}function tt(Z){Z.value=""}return dn.useEffect(()=>(u=setInterval(S,3e3),m?.current.focus(),()=>{clearInterval(u),t("idle",Qu.loadUser())}),[]),It.jsx("input",{type:"text",name:"text",ref:m,defaultValue:"",onBlur:N,id:"textline",className:"input-lg form-control message_box",placeholder:"say something...",onKeyUp:x})},dT=s=>{var t="center-block spinner fadein";return(void 0).props.fadeout&&(void 0).props.fadeout===!0&&(t="center-block spinner fadeout"),It.jsxs("div",{className:t,children:[It.jsx("h2",{children:"Loading tIrc..."}),(void 0).props.phrases.length>0?It.jsx("small",{className:"text-center",children:(void 0).props.phrases[(void 0).props.index]}):""]})},JA="@firebase/installations",Ky="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=1e4,t1=`w:${Ky}`,e1="FIS_v2",tO="https://firebaseinstallations.googleapis.com/v1",eO=3600*1e3,nO="installations",rO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ql=new qd(nO,rO,iO);function n1(s){return s instanceof Fo&&s.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r1({projectId:s}){return`${tO}/projects/${s}/installations`}function i1(s){return{token:s.token,requestStatus:2,expiresIn:aO(s.expiresIn),creationTime:Date.now()}}async function s1(s,t){const i=(await t.json()).error;return ql.create("request-failed",{requestName:s,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function a1({apiKey:s}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":s})}function sO(s,{refreshToken:t}){const n=a1(s);return n.append("Authorization",oO(t)),n}async function o1(s){const t=await s();return t.status>=500&&t.status<600?s():t}function aO(s){return Number(s.replace("s","000"))}function oO(s){return`${e1} ${s}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lO({appConfig:s,heartbeatServiceProvider:t},{fid:n}){const i=r1(s),o=a1(s),u=t.getImmediate({optional:!0});if(u){const T=await u.getHeartbeatsHeader();T&&o.append("x-firebase-client",T)}const m={fid:n,authVersion:e1,appId:s.appId,sdkVersion:t1},y={method:"POST",headers:o,body:JSON.stringify(m)},E=await o1(()=>fetch(i,y));if(E.ok){const T=await E.json();return{fid:T.fid||n,registrationStatus:2,refreshToken:T.refreshToken,authToken:i1(T.authToken)}}else throw await s1("Create Installation",E)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(s){return new Promise(t=>{setTimeout(t,s)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uO(s){return btoa(String.fromCharCode(...s)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=/^[cdef][\w-]{21}$/,kg="";function fO(){try{const s=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(s),s[0]=112+s[0]%16;const n=hO(s);return cO.test(n)?n:kg}catch{return kg}}function hO(s){return uO(s).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(s){return`${s.appName}!${s.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u1=new Map;function c1(s,t){const n=cm(s);f1(n,t),dO(n,t)}function f1(s,t){const n=u1.get(s);if(n)for(const i of n)i(t)}function dO(s,t){const n=mO();n&&n.postMessage({key:s,fid:t}),pO()}let Ul=null;function mO(){return!Ul&&"BroadcastChannel"in self&&(Ul=new BroadcastChannel("[Firebase] FID Change"),Ul.onmessage=s=>{f1(s.data.key,s.data.fid)}),Ul}function pO(){u1.size===0&&Ul&&(Ul.close(),Ul=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gO="firebase-installations-database",yO=1,Hl="firebase-installations-store";let Fp=null;function Xy(){return Fp||(Fp=LT(gO,yO,{upgrade:(s,t)=>{switch(t){case 0:s.createObjectStore(Hl)}}})),Fp}async function zd(s,t){const n=cm(s),o=(await Xy()).transaction(Hl,"readwrite"),u=o.objectStore(Hl),m=await u.get(n);return await u.put(t,n),await o.done,(!m||m.fid!==t.fid)&&c1(s,t.fid),t}async function h1(s){const t=cm(s),i=(await Xy()).transaction(Hl,"readwrite");await i.objectStore(Hl).delete(t),await i.done}async function fm(s,t){const n=cm(s),o=(await Xy()).transaction(Hl,"readwrite"),u=o.objectStore(Hl),m=await u.get(n),y=t(m);return y===void 0?await u.delete(n):await u.put(y,n),await o.done,y&&(!m||m.fid!==y.fid)&&c1(s,y.fid),y}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zy(s){let t;const n=await fm(s.appConfig,i=>{const o=_O(i),u=vO(s,o);return t=u.registrationPromise,u.installationEntry});return n.fid===kg?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function _O(s){const t=s||{fid:fO(),registrationStatus:0};return d1(t)}function vO(s,t){if(t.registrationStatus===0){if(!navigator.onLine){const o=Promise.reject(ql.create("app-offline"));return{installationEntry:t,registrationPromise:o}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=EO(s,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:TO(s)}:{installationEntry:t}}async function EO(s,t){try{const n=await lO(s,t);return zd(s.appConfig,n)}catch(n){throw n1(n)&&n.customData.serverCode===409?await h1(s.appConfig):await zd(s.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function TO(s){let t=await mT(s.appConfig);for(;t.registrationStatus===1;)await l1(100),t=await mT(s.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Zy(s);return i||n}return t}function mT(s){return fm(s,t=>{if(!t)throw ql.create("installation-not-found");return d1(t)})}function d1(s){return wO(s)?{fid:s.fid,registrationStatus:0}:s}function wO(s){return s.registrationStatus===1&&s.registrationTime+WA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bO({appConfig:s,heartbeatServiceProvider:t},n){const i=AO(s,n),o=sO(s,n),u=t.getImmediate({optional:!0});if(u){const T=await u.getHeartbeatsHeader();T&&o.append("x-firebase-client",T)}const m={installation:{sdkVersion:t1,appId:s.appId}},y={method:"POST",headers:o,body:JSON.stringify(m)},E=await o1(()=>fetch(i,y));if(E.ok){const T=await E.json();return i1(T)}else throw await s1("Generate Auth Token",E)}function AO(s,{fid:t}){return`${r1(s)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jy(s,t=!1){let n;const i=await fm(s.appConfig,u=>{if(!m1(u))throw ql.create("not-registered");const m=u.authToken;if(!t&&IO(m))return u;if(m.requestStatus===1)return n=SO(s,t),u;{if(!navigator.onLine)throw ql.create("app-offline");const y=xO(u);return n=RO(s,y),y}});return n?await n:i.authToken}async function SO(s,t){let n=await pT(s.appConfig);for(;n.authToken.requestStatus===1;)await l1(100),n=await pT(s.appConfig);const i=n.authToken;return i.requestStatus===0?Jy(s,t):i}function pT(s){return fm(s,t=>{if(!m1(t))throw ql.create("not-registered");const n=t.authToken;return DO(n)?{...t,authToken:{requestStatus:0}}:t})}async function RO(s,t){try{const n=await bO(s,t),i={...t,authToken:n};return await zd(s.appConfig,i),n}catch(n){if(n1(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await h1(s.appConfig);else{const i={...t,authToken:{requestStatus:0}};await zd(s.appConfig,i)}throw n}}function m1(s){return s!==void 0&&s.registrationStatus===2}function IO(s){return s.requestStatus===2&&!CO(s)}function CO(s){const t=Date.now();return t<s.creationTime||s.creationTime+s.expiresIn<t+eO}function xO(s){const t={requestStatus:1,requestTime:Date.now()};return{...s,authToken:t}}function DO(s){return s.requestStatus===1&&s.requestTime+WA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OO(s){const t=s,{installationEntry:n,registrationPromise:i}=await Zy(t);return i?i.catch(console.error):Jy(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NO(s,t=!1){const n=s;return await MO(n),(await Jy(n,t)).token}async function MO(s){const{registrationPromise:t}=await Zy(s);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(s){if(!s||!s.options)throw $p("App Configuration");if(!s.name)throw $p("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!s.options[n])throw $p(n);return{appName:s.name,projectId:s.options.projectId,apiKey:s.options.apiKey,appId:s.options.appId}}function $p(s){return ql.create("missing-app-config-values",{valueName:s})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p1="installations",PO="installations-internal",UO=s=>{const t=s.getProvider("app").getImmediate(),n=VO(t),i=$g(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},kO=s=>{const t=s.getProvider("app").getImmediate(),n=$g(t,p1).getImmediate();return{getId:()=>OO(n),getToken:o=>NO(n,o)}};function LO(){ko(new qa(p1,UO,"PUBLIC")),ko(new qa(PO,kO,"PRIVATE"))}LO();js(JA,Ky);js(JA,Ky,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT="analytics",BO="firebase_id",jO="origin",zO=60*1e3,qO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Wy="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr=new Hg("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Pi=new qd("analytics","Analytics",HO);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(s){if(!s.startsWith(Wy)){const t=Pi.create("invalid-gtag-resource",{gtagURL:s});return qr.warn(t.message),""}return s}function g1(s){return Promise.all(s.map(t=>t.catch(n=>n)))}function $O(s,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(s,t)),n}function GO(s,t){const n=$O("firebase-js-sdk-policy",{createScriptURL:FO}),i=document.createElement("script"),o=`${Wy}?l=${s}&id=${t}`;i.src=n?n?.createScriptURL(o):o,i.async=!0,document.head.appendChild(i)}function QO(s){let t=[];return Array.isArray(window[s])?t=window[s]:window[s]=t,t}async function YO(s,t,n,i,o,u){const m=i[o];try{if(m)await t[m];else{const E=(await g1(n)).find(T=>T.measurementId===o);E&&await t[E.appId]}}catch(y){qr.error(y)}s("config",o,u)}async function KO(s,t,n,i,o){try{let u=[];if(o&&o.send_to){let m=o.send_to;Array.isArray(m)||(m=[m]);const y=await g1(n);for(const E of m){const T=y.find(x=>x.measurementId===E),S=T&&t[T.appId];if(S)u.push(S);else{u=[];break}}}u.length===0&&(u=Object.values(t)),await Promise.all(u),s("event",i,o||{})}catch(u){qr.error(u)}}function XO(s,t,n,i){async function o(u,...m){try{if(u==="event"){const[y,E]=m;await KO(s,t,n,y,E)}else if(u==="config"){const[y,E]=m;await YO(s,t,n,i,y,E)}else if(u==="consent"){const[y,E]=m;s("consent",y,E)}else if(u==="get"){const[y,E,T]=m;s("get",y,E,T)}else if(u==="set"){const[y]=m;s("set",y)}else s(u,...m)}catch(y){qr.error(y)}}return o}function ZO(s,t,n,i,o){let u=function(...m){window[i].push(arguments)};return window[o]&&typeof window[o]=="function"&&(u=window[o]),window[o]=XO(u,s,t,n),{gtagCore:u,wrappedGtag:window[o]}}function JO(s){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Wy)&&n.src.includes(s))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WO=30,tN=1e3;class eN{constructor(t={},n=tN){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const y1=new eN;function nN(s){return new Headers({Accept:"application/json","x-goog-api-key":s})}async function rN(s){const{appId:t,apiKey:n}=s,i={method:"GET",headers:nN(n)},o=qO.replace("{app-id}",t),u=await fetch(o,i);if(u.status!==200&&u.status!==304){let m="";try{const y=await u.json();y.error?.message&&(m=y.error.message)}catch{}throw Pi.create("config-fetch-failed",{httpStatus:u.status,responseMessage:m})}return u.json()}async function iN(s,t=y1,n){const{appId:i,apiKey:o,measurementId:u}=s.options;if(!i)throw Pi.create("no-app-id");if(!o){if(u)return{measurementId:u,appId:i};throw Pi.create("no-api-key")}const m=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},y=new oN;return setTimeout(async()=>{y.abort()},zO),_1({appId:i,apiKey:o,measurementId:u},m,y,t)}async function _1(s,{throttleEndTimeMillis:t,backoffCount:n},i,o=y1){const{appId:u,measurementId:m}=s;try{await sN(i,t)}catch(y){if(m)return qr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:u,measurementId:m};throw y}try{const y=await rN(s);return o.deleteThrottleMetadata(u),y}catch(y){const E=y;if(!aN(E)){if(o.deleteThrottleMetadata(u),m)return qr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${m} provided in the "measurementId" field in the local Firebase config. [${E?.message}]`),{appId:u,measurementId:m};throw y}const T=Number(E?.customData?.httpStatus)===503?C0(n,o.intervalMillis,WO):C0(n,o.intervalMillis),S={throttleEndTimeMillis:Date.now()+T,backoffCount:n+1};return o.setThrottleMetadata(u,S),qr.debug(`Calling attemptFetch again in ${T} millis`),_1(s,S,i,o)}}function sN(s,t){return new Promise((n,i)=>{const o=Math.max(t-Date.now(),0),u=setTimeout(n,o);s.addEventListener(()=>{clearTimeout(u),i(Pi.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function aN(s){if(!(s instanceof Fo)||!s.customData)return!1;const t=Number(s.customData.httpStatus);return t===429||t===500||t===503||t===504}class oN{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function lN(s,t,n,i,o){if(o&&o.global){s("event",n,i);return}else{const u=await t,m={...i,send_to:u};s("event",n,m)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uN(){if(VT())try{await PT()}catch(s){return qr.warn(Pi.create("indexeddb-unavailable",{errorInfo:s?.toString()}).message),!1}else return qr.warn(Pi.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function cN(s,t,n,i,o,u,m){const y=iN(s);y.then(N=>{n[N.measurementId]=N.appId,s.options.measurementId&&N.measurementId!==s.options.measurementId&&qr.warn(`The measurement ID in the local Firebase config (${s.options.measurementId}) does not match the measurement ID fetched from the server (${N.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(N=>qr.error(N)),t.push(y);const E=uN().then(N=>{if(N)return i.getId()}),[T,S]=await Promise.all([y,E]);JO(u)||GO(u,T.measurementId),o("js",new Date);const x=m?.config??{};return x[jO]="firebase",x.update=!0,S!=null&&(x[BO]=S),o("config",T.measurementId,x),T.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fN{constructor(t){this.app=t}_delete(){return delete xf[this.app.options.appId],Promise.resolve()}}let xf={},yT=[];const _T={};let Gp="dataLayer",hN="gtag",vT,v1,ET=!1;function dN(){const s=[];if(eR()&&s.push("This is a browser extension environment."),rR()||s.push("Cookies are not available."),s.length>0){const t=s.map((i,o)=>`(${o+1}) ${i}`).join(" "),n=Pi.create("invalid-analytics-context",{errorInfo:t});qr.warn(n.message)}}function mN(s,t,n){dN();const i=s.options.appId;if(!i)throw Pi.create("no-app-id");if(!s.options.apiKey)if(s.options.measurementId)qr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${s.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Pi.create("no-api-key");if(xf[i]!=null)throw Pi.create("already-exists",{id:i});if(!ET){QO(Gp);const{wrappedGtag:u,gtagCore:m}=ZO(xf,yT,_T,Gp,hN);v1=u,vT=m,ET=!0}return xf[i]=cN(s,yT,_T,t,vT,Gp,n),new fN(s)}function pN(s,t,n,i){s=Uo(s),lN(v1,xf[s.app.options.appId],t,n,i).catch(o=>qr.error(o))}const TT="@firebase/analytics",wT="0.10.18";function gN(){ko(new qa(gT,(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),o=t.getProvider("installations-internal").getImmediate();return mN(i,o,n)},"PUBLIC")),ko(new qa("analytics-internal",s,"PRIVATE")),js(TT,wT),js(TT,wT,"esm2020");function s(t){try{const n=t.getProvider(gT).getImmediate();return{logEvent:(i,o,u)=>pN(n,i,o,u)}}catch(n){throw Pi.create("interop-component-reg-failed",{reason:n})}}}gN();const yN=({users:s})=>{const[t,n]=dn.useState(Qu.loadUser()),i=u=>{var m=u.target.value;xT(m),n(m)},o=[{name:"Aino"},{name:"Toni"},{name:"Andon"},{name:"Hilma"},{name:"Taho Ohjelmistopalvelut Oy"},{name:"Hanna"}];return It.jsx("div",{id:"userselect",className:"text-right",children:It.jsx("select",{className:"form-control input-sm",name:"userlist",onChange:i,value:t,children:o.map(u=>It.jsx("option",{children:u.name},u.name))})})};class _N extends jg.Component{constructor(){super(),this.statemap={typing:"kirjoittaa...",fixing:"korjaa...",connected:"yhdistänyt",idle:"idlaa"}}componentDidMount(){console.log("Nickpanel: mount")}render(){var t=this.fillIdletime(this.props.users),n=this.props.tircusers;t=t.map(function(i,o){return It.jsxs("li",{children:[It.jsx("h4",{className:"nick",children:i.nick}),It.jsx("div",{className:"idle small list-group-item-text",children:i.idle})]},o)}),this.statemap;var n=n.map(function(i,o){var u=DT();return u!==i.nick?It.jsx("li",{className:"tircuser guest",children:It.jsx("h4",{className:"nick",children:i.nick})}):It.jsx("li",{className:"tircuser  active",children:It.jsx("h4",{className:"nick",children:i.nick})})});return It.jsx("ul",{id:"tirc_nicks",className:"tirc_info_panel list-inline",children:n.concat(t)})}formatToMinutes(t){var n=~~(t/3600),i=~~(t%3600/60),o=t%60,u="";return n>0&&(u+=""+n+"h "+(i<10?"0":"")),u+=""+i+" min "+(o<10?"0":""),u+=""+o+" s",u}fillIdletime(t){var n=this,i=t.map(o=>{var u=n.formatToMinutes(o.idleTime);return o.idle=u,o});return i}componentWillUnmount(){console.log("unmount")}}const vN=({topic:s,users:t,receiveUsers:n,tircusers:i,userselect:o,changeUser:u})=>It.jsx("div",{className:"row panel-title",children:It.jsx("div",{className:"col-md-12 full-width",children:It.jsxs("div",{className:"row topic-panel",children:[It.jsx("div",{className:"col-md-4 col-sm-10 col-xs-9 topic",children:It.jsx("h3",{children:s})}),It.jsx("div",{className:"col-md-6 hidden-xs hidden-sm overflow-scroll",children:It.jsx(_N,{users:t,receiveUsers:n,tircusers:i})}),It.jsx("div",{className:"col-md-2 col-sm-2 col-xs-3",children:It.jsx(yN,{...o,changeUser:u})})]})})});class EN{constructor(){this.URL="http://"+location.hostname+":80/backend/"}connect(t,n){var i={nick:t};return n!=null&&(i.location=n),new Promise(o=>{$.ajax({url:this.URL+"connect",type:"POST",contentType:"application/json;charset=UTF-8",data:JSON.stringify(i)}).done(function(u){o(u)}).error(function(u){console.log("bad data, but still ok",u.statusText),o("ok")})})}say(t,n,i,o){var u={nick:t,text:n,htmltext:i,target:o};return $.ajax({type:"POST",url:this.URL+"say",contentType:"application/json;charset=UTF-8",data:JSON.stringify(u)})}toggleEmotion(t,n,i){var o={user:t,like:i,id:n};return $.ajax({type:"POST",url:this.URL+"toggleemotion",contentType:"application/json;charset=UTF-8",data:JSON.stringify(o)})}changeState(t,n,i){var o={nick:t,state:n,text:i};return $.ajax({type:"POST",url:this.URL+"changestate",contentType:"application/json;charset=UTF-8",data:JSON.stringify(o)})}submitLocation(t,n){let i={nick:t,location:n};return console.log("message",i),$.ajax({type:"POST",url:this.URL+"submitlocation",contentType:"application/json;charset=UTF-8",data:JSON.stringify(i)})}updateLocation(t,n){var i={nick:t};n!=null&&(i.location=n),$.ajax({type:"POST",url:URL+"updatelocation",contentType:"application/json;charset=UTF-8",data:JSON.stringify(i)})}sayGoodbye(t){var n={nick:t};return $.ajax({type:"POST",url:this.URL+"saygoodbye",contentType:"application/json;charset=UTF-8",data:JSON.stringify(n)})}changeNick(t,n){var i={nickold:t,nick:n};$.ajax({type:"POST",url:this.URL+"changenick",contentType:"application/json;charset=UTF-8",data:JSON.stringify(i)})}listen(t,n){return $.ajax({url:this.URL+"listen/"+t+"/"+n,crossDomain:!0,type:"GET"})}}let TN=new EN;function wN(s){return{type:"RECEIVE_USERS",users:s}}function bN(s,t){return(n,i)=>{var o=i().topicpanel.userselect.chosen;return TN.toggleEmotion(o,s,t)}}function AN(s){return{type:"CHANGE_USER",user:s}}const SN=s=>{Rb(),dn.useEffect(()=>{const T=()=>{};window.addEventListener("blur",T)},[]);const t={topic:"Testi",users:[],tircusers:[],userselect:{users:[],chosen:""}};let{tabs:n,userselect:i,loading:o,active:u,dispatch:m}=s;if(o&&o===!0)return It.jsx("div",{className:"col-md-12 col-xs-12 col-sm-12",children:It.jsx(dT,{index:s.phraseindex,phrases:s.phrases})});let y=!0;var E="action_panel_0";return It.jsxs("div",{className:"tirc_content",children:[o&&o===!0?It.jsx(dT,{fadeout:!0,index:s.phraseindex,phrases:s.phrases}):"",It.jsx(vN,{...t,changeUser:T=>m(AN(T)),receiveUsers:T=>m(wN(T))}),It.jsx(qx,{...n,users:[],tircusers:[],userselect:i,connectdata:[],currentdata:[],activedata:[],index:0,visible:y,toggleEmotion:(T,S)=>m(bN(T,S))}),It.jsx("div",{className:"tirc_action_panel row",id:E,children:It.jsx("div",{className:"col-md-12 col-sm-12 col-xs-12 full-width",children:It.jsx(WD,{})})})]})};var Qp={exports:{}},rf={},Yp={exports:{}},Kp={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bT;function RN(){return bT||(bT=1,(function(s){function t(rt,Tt){var Ot=rt.length;rt.push(Tt);t:for(;0<Ot;){var ce=Ot-1>>>1,q=rt[ce];if(0<o(q,Tt))rt[ce]=Tt,rt[Ot]=q,Ot=ce;else break t}}function n(rt){return rt.length===0?null:rt[0]}function i(rt){if(rt.length===0)return null;var Tt=rt[0],Ot=rt.pop();if(Ot!==Tt){rt[0]=Ot;t:for(var ce=0,q=rt.length,dt=q>>>1;ce<dt;){var yt=2*(ce+1)-1,gt=rt[yt],xt=yt+1,Kt=rt[xt];if(0>o(gt,Ot))xt<q&&0>o(Kt,gt)?(rt[ce]=Kt,rt[xt]=Ot,ce=xt):(rt[ce]=gt,rt[yt]=Ot,ce=yt);else if(xt<q&&0>o(Kt,Ot))rt[ce]=Kt,rt[xt]=Ot,ce=xt;else break t}}return Tt}function o(rt,Tt){var Ot=rt.sortIndex-Tt.sortIndex;return Ot!==0?Ot:rt.id-Tt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var m=Date,y=m.now();s.unstable_now=function(){return m.now()-y}}var E=[],T=[],S=1,x=null,N=3,V=!1,tt=!1,Z=!1,ot=!1,bt=typeof setTimeout=="function"?setTimeout:null,pt=typeof clearTimeout=="function"?clearTimeout:null,wt=typeof setImmediate<"u"?setImmediate:null;function Et(rt){for(var Tt=n(T);Tt!==null;){if(Tt.callback===null)i(T);else if(Tt.startTime<=rt)i(T),Tt.sortIndex=Tt.expirationTime,t(E,Tt);else break;Tt=n(T)}}function Dt(rt){if(Z=!1,Et(rt),!tt)if(n(E)!==null)tt=!0,Mt||(Mt=!0,F());else{var Tt=n(T);Tt!==null&&Oe(Dt,Tt.startTime-rt)}}var Mt=!1,z=-1,O=5,M=-1;function B(){return ot?!0:!(s.unstable_now()-M<O)}function L(){if(ot=!1,Mt){var rt=s.unstable_now();M=rt;var Tt=!0;try{t:{tt=!1,Z&&(Z=!1,pt(z),z=-1),V=!0;var Ot=N;try{e:{for(Et(rt),x=n(E);x!==null&&!(x.expirationTime>rt&&B());){var ce=x.callback;if(typeof ce=="function"){x.callback=null,N=x.priorityLevel;var q=ce(x.expirationTime<=rt);if(rt=s.unstable_now(),typeof q=="function"){x.callback=q,Et(rt),Tt=!0;break e}x===n(E)&&i(E),Et(rt)}else i(E);x=n(E)}if(x!==null)Tt=!0;else{var dt=n(T);dt!==null&&Oe(Dt,dt.startTime-rt),Tt=!1}}break t}finally{x=null,N=Ot,V=!1}Tt=void 0}}finally{Tt?F():Mt=!1}}}var F;if(typeof wt=="function")F=function(){wt(L)};else if(typeof MessageChannel<"u"){var P=new MessageChannel,He=P.port2;P.port1.onmessage=L,F=function(){He.postMessage(null)}}else F=function(){bt(L,0)};function Oe(rt,Tt){z=bt(function(){rt(s.unstable_now())},Tt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(rt){rt.callback=null},s.unstable_forceFrameRate=function(rt){0>rt||125<rt?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<rt?Math.floor(1e3/rt):5},s.unstable_getCurrentPriorityLevel=function(){return N},s.unstable_next=function(rt){switch(N){case 1:case 2:case 3:var Tt=3;break;default:Tt=N}var Ot=N;N=Tt;try{return rt()}finally{N=Ot}},s.unstable_requestPaint=function(){ot=!0},s.unstable_runWithPriority=function(rt,Tt){switch(rt){case 1:case 2:case 3:case 4:case 5:break;default:rt=3}var Ot=N;N=rt;try{return Tt()}finally{N=Ot}},s.unstable_scheduleCallback=function(rt,Tt,Ot){var ce=s.unstable_now();switch(typeof Ot=="object"&&Ot!==null?(Ot=Ot.delay,Ot=typeof Ot=="number"&&0<Ot?ce+Ot:ce):Ot=ce,rt){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=Ot+q,rt={id:S++,callback:Tt,priorityLevel:rt,startTime:Ot,expirationTime:q,sortIndex:-1},Ot>ce?(rt.sortIndex=Ot,t(T,rt),n(E)===null&&rt===n(T)&&(Z?(pt(z),z=-1):Z=!0,Oe(Dt,Ot-ce))):(rt.sortIndex=q,t(E,rt),tt||V||(tt=!0,Mt||(Mt=!0,F()))),rt},s.unstable_shouldYield=B,s.unstable_wrapCallback=function(rt){var Tt=N;return function(){var Ot=N;N=Tt;try{return rt.apply(this,arguments)}finally{N=Ot}}}})(Kp)),Kp}var AT;function IN(){return AT||(AT=1,Yp.exports=RN()),Yp.exports}var Xp={exports:{}},dr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ST;function CN(){if(ST)return dr;ST=1;var s=Bg();function t(E){var T="https://react.dev/errors/"+E;if(1<arguments.length){T+="?args[]="+encodeURIComponent(arguments[1]);for(var S=2;S<arguments.length;S++)T+="&args[]="+encodeURIComponent(arguments[S])}return"Minified React error #"+E+"; visit "+T+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(E,T,S){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:x==null?null:""+x,children:E,containerInfo:T,implementation:S}}var m=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function y(E,T){if(E==="font")return"";if(typeof T=="string")return T==="use-credentials"?T:""}return dr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,dr.createPortal=function(E,T){var S=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T||T.nodeType!==1&&T.nodeType!==9&&T.nodeType!==11)throw Error(t(299));return u(E,T,null,S)},dr.flushSync=function(E){var T=m.T,S=i.p;try{if(m.T=null,i.p=2,E)return E()}finally{m.T=T,i.p=S,i.d.f()}},dr.preconnect=function(E,T){typeof E=="string"&&(T?(T=T.crossOrigin,T=typeof T=="string"?T==="use-credentials"?T:"":void 0):T=null,i.d.C(E,T))},dr.prefetchDNS=function(E){typeof E=="string"&&i.d.D(E)},dr.preinit=function(E,T){if(typeof E=="string"&&T&&typeof T.as=="string"){var S=T.as,x=y(S,T.crossOrigin),N=typeof T.integrity=="string"?T.integrity:void 0,V=typeof T.fetchPriority=="string"?T.fetchPriority:void 0;S==="style"?i.d.S(E,typeof T.precedence=="string"?T.precedence:void 0,{crossOrigin:x,integrity:N,fetchPriority:V}):S==="script"&&i.d.X(E,{crossOrigin:x,integrity:N,fetchPriority:V,nonce:typeof T.nonce=="string"?T.nonce:void 0})}},dr.preinitModule=function(E,T){if(typeof E=="string")if(typeof T=="object"&&T!==null){if(T.as==null||T.as==="script"){var S=y(T.as,T.crossOrigin);i.d.M(E,{crossOrigin:S,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0})}}else T==null&&i.d.M(E)},dr.preload=function(E,T){if(typeof E=="string"&&typeof T=="object"&&T!==null&&typeof T.as=="string"){var S=T.as,x=y(S,T.crossOrigin);i.d.L(E,S,{crossOrigin:x,integrity:typeof T.integrity=="string"?T.integrity:void 0,nonce:typeof T.nonce=="string"?T.nonce:void 0,type:typeof T.type=="string"?T.type:void 0,fetchPriority:typeof T.fetchPriority=="string"?T.fetchPriority:void 0,referrerPolicy:typeof T.referrerPolicy=="string"?T.referrerPolicy:void 0,imageSrcSet:typeof T.imageSrcSet=="string"?T.imageSrcSet:void 0,imageSizes:typeof T.imageSizes=="string"?T.imageSizes:void 0,media:typeof T.media=="string"?T.media:void 0})}},dr.preloadModule=function(E,T){if(typeof E=="string")if(T){var S=y(T.as,T.crossOrigin);i.d.m(E,{as:typeof T.as=="string"&&T.as!=="script"?T.as:void 0,crossOrigin:S,integrity:typeof T.integrity=="string"?T.integrity:void 0})}else i.d.m(E)},dr.requestFormReset=function(E){i.d.r(E)},dr.unstable_batchedUpdates=function(E,T){return E(T)},dr.useFormState=function(E,T,S){return m.H.useFormState(E,T,S)},dr.useFormStatus=function(){return m.H.useHostTransitionStatus()},dr.version="19.1.0",dr}var RT;function xN(){if(RT)return Xp.exports;RT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Xp.exports=CN(),Xp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var IT;function DN(){if(IT)return rf;IT=1;var s=IN(),t=Bg(),n=xN();function i(e){var r="https://react.dev/errors/"+e;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var r=e,a=e;if(e.alternate)for(;r.return;)r=r.return;else{e=r;do r=e,(r.flags&4098)!==0&&(a=r.return),e=r.return;while(e)}return r.tag===3?a:null}function m(e){if(e.tag===13){var r=e.memoizedState;if(r===null&&(e=e.alternate,e!==null&&(r=e.memoizedState)),r!==null)return r.dehydrated}return null}function y(e){if(u(e)!==e)throw Error(i(188))}function E(e){var r=e.alternate;if(!r){if(r=u(e),r===null)throw Error(i(188));return r!==e?null:e}for(var a=e,l=r;;){var d=a.return;if(d===null)break;var g=d.alternate;if(g===null){if(l=d.return,l!==null){a=l;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===a)return y(d),e;if(g===l)return y(d),r;g=g.sibling}throw Error(i(188))}if(a.return!==l.return)a=d,l=g;else{for(var b=!1,R=d.child;R;){if(R===a){b=!0,a=d,l=g;break}if(R===l){b=!0,l=d,a=g;break}R=R.sibling}if(!b){for(R=g.child;R;){if(R===a){b=!0,a=g,l=d;break}if(R===l){b=!0,l=g,a=d;break}R=R.sibling}if(!b)throw Error(i(189))}}if(a.alternate!==l)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?e:r}function T(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e;for(e=e.child;e!==null;){if(r=T(e),r!==null)return r;e=e.sibling}return null}var S=Object.assign,x=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),V=Symbol.for("react.portal"),tt=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),ot=Symbol.for("react.profiler"),bt=Symbol.for("react.provider"),pt=Symbol.for("react.consumer"),wt=Symbol.for("react.context"),Et=Symbol.for("react.forward_ref"),Dt=Symbol.for("react.suspense"),Mt=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),M=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),L=Symbol.iterator;function F(e){return e===null||typeof e!="object"?null:(e=L&&e[L]||e["@@iterator"],typeof e=="function"?e:null)}var P=Symbol.for("react.client.reference");function He(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===P?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case tt:return"Fragment";case ot:return"Profiler";case Z:return"StrictMode";case Dt:return"Suspense";case Mt:return"SuspenseList";case M:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case V:return"Portal";case wt:return(e.displayName||"Context")+".Provider";case pt:return(e._context.displayName||"Context")+".Consumer";case Et:var r=e.render;return e=e.displayName,e||(e=r.displayName||r.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case z:return r=e.displayName||null,r!==null?r:He(e.type)||"Memo";case O:r=e._payload,e=e._init;try{return He(e(r))}catch{}}return null}var Oe=Array.isArray,rt=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Tt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ot={pending:!1,data:null,method:null,action:null},ce=[],q=-1;function dt(e){return{current:e}}function yt(e){0>q||(e.current=ce[q],ce[q]=null,q--)}function gt(e,r){q++,ce[q]=e.current,e.current=r}var xt=dt(null),Kt=dt(null),Ut=dt(null),je=dt(null);function Ee(e,r){switch(gt(Ut,r),gt(Kt,e),gt(xt,null),r.nodeType){case 9:case 11:e=(e=r.documentElement)&&(e=e.namespaceURI)?Kv(e):0;break;default:if(e=r.tagName,r=r.namespaceURI)r=Kv(r),e=Xv(r,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}yt(xt),gt(xt,e)}function Dn(){yt(xt),yt(Kt),yt(Ut)}function Sr(e){e.memoizedState!==null&&gt(je,e);var r=xt.current,a=Xv(r,e.type);r!==a&&(gt(Kt,e),gt(xt,a))}function en(e){Kt.current===e&&(yt(xt),yt(Kt)),je.current===e&&(yt(je),Kc._currentValue=Ot)}var Hr=Object.prototype.hasOwnProperty,Fr=s.unstable_scheduleCallback,Ui=s.unstable_cancelCallback,Qs=s.unstable_shouldYield,Ga=s.unstable_requestPaint,nr=s.unstable_now,$o=s.unstable_getCurrentPriorityLevel,Ys=s.unstable_ImmediatePriority,hs=s.unstable_UserBlockingPriority,ki=s.unstable_NormalPriority,Go=s.unstable_LowPriority,ds=s.unstable_IdlePriority,Qo=s.log,Kl=s.unstable_setDisableYieldValue,ze=null,_e=null;function rr(e){if(typeof Qo=="function"&&Kl(e),_e&&typeof _e.setStrictMode=="function")try{_e.setStrictMode(ze,e)}catch{}}var On=Math.clz32?Math.clz32:Ks,Xl=Math.log,lc=Math.LN2;function Ks(e){return e>>>=0,e===0?32:31-(Xl(e)/lc|0)|0}var ms=256,Xs=4194304;function $r(e){var r=e&42;if(r!==0)return r;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Zs(e,r,a){var l=e.pendingLanes;if(l===0)return 0;var d=0,g=e.suspendedLanes,b=e.pingedLanes;e=e.warmLanes;var R=l&134217727;return R!==0?(l=R&~g,l!==0?d=$r(l):(b&=R,b!==0?d=$r(b):a||(a=R&~e,a!==0&&(d=$r(a))))):(R=l&~g,R!==0?d=$r(R):b!==0?d=$r(b):a||(a=l&~e,a!==0&&(d=$r(a)))),d===0?0:r!==0&&r!==d&&(r&g)===0&&(g=d&-d,a=r&-r,g>=a||g===32&&(a&4194048)!==0)?r:d}function Js(e,r){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&r)===0}function Yo(e,r){switch(e){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ko(){var e=ms;return ms<<=1,(ms&4194048)===0&&(ms=256),e}function ps(){var e=Xs;return Xs<<=1,(Xs&62914560)===0&&(Xs=4194304),e}function hi(e){for(var r=[],a=0;31>a;a++)r.push(e);return r}function Li(e,r){e.pendingLanes|=r,r!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Xo(e,r,a,l,d,g){var b=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var R=e.entanglements,U=e.expirationTimes,X=e.hiddenUpdates;for(a=b&~a;0<a;){var st=31-On(a),lt=1<<st;R[st]=0,U[st]=-1;var W=X[st];if(W!==null)for(X[st]=null,st=0;st<W.length;st++){var et=W[st];et!==null&&(et.lane&=-536870913)}a&=~lt}l!==0&&di(e,l,0),g!==0&&d===0&&e.tag!==0&&(e.suspendedLanes|=g&~(b&~r))}function di(e,r,a){e.pendingLanes|=r,e.suspendedLanes&=~r;var l=31-On(r);e.entangledLanes|=r,e.entanglements[l]=e.entanglements[l]|1073741824|a&4194090}function Zo(e,r){var a=e.entangledLanes|=r;for(e=e.entanglements;a;){var l=31-On(a),d=1<<l;d&r|e[l]&r&&(e[l]|=r),a&=~d}}function gs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Te(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function pe(){var e=Tt.p;return e!==0?e:(e=window.event,e===void 0?32:p0(e.type))}function Ws(e,r){var a=Tt.p;try{return Tt.p=e,r()}finally{Tt.p=a}}var Me=Math.random().toString(36).slice(2),nn="__reactFiber$"+Me,Ye="__reactProps$"+Me,Rr="__reactContainer$"+Me,Bi="__reactEvents$"+Me,ta="__reactListeners$"+Me,ys="__reactHandles$"+Me,mi="__reactResources$"+Me,ea="__reactMarker$"+Me;function Fn(e){delete e[nn],delete e[Ye],delete e[Bi],delete e[ta],delete e[ys]}function Nn(e){var r=e[nn];if(r)return r;for(var a=e.parentNode;a;){if(r=a[Rr]||a[nn]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(e=t0(e);e!==null;){if(a=e[nn])return a;e=t0(e)}return r}e=a,a=e.parentNode}return null}function ht(e){if(e=e[nn]||e[Rr]){var r=e.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return e}return null}function D(e){var r=e.tag;if(r===5||r===26||r===27||r===6)return e.stateNode;throw Error(i(33))}function Lt(e){var r=e[mi];return r||(r=e[mi]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Gt(e){e[ea]=!0}var $t=new Set,gr={};function Ir(e,r){Cr(e,r),Cr(e+"Capture",r)}function Cr(e,r){for(gr[e]=r,e=0;e<r.length;e++)$t.add(r[e])}var mn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ir={},na={};function Jo(e){return Hr.call(na,e)?!0:Hr.call(ir,e)?!1:mn.test(e)?na[e]=!0:(ir[e]=!0,!1)}function Gr(e,r,a){if(Jo(r))if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(r);return}}e.setAttribute(r,""+a)}}function Qr(e,r,a){if(a===null)e.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttribute(r,""+a)}}function bn(e,r,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(r,a,""+l)}}var ra,Wo;function yr(e){if(ra===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);ra=r&&r[1]||"",Wo=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ra+e+Wo}var ia=!1;function ji(e,r){if(!e||ia)return"";ia=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var lt=function(){throw Error()};if(Object.defineProperty(lt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(lt,[])}catch(et){var W=et}Reflect.construct(e,[],lt)}else{try{lt.call()}catch(et){W=et}e.call(lt.prototype)}}else{try{throw Error()}catch(et){W=et}(lt=e())&&typeof lt.catch=="function"&&lt.catch(function(){})}}catch(et){if(et&&W&&typeof et.stack=="string")return[et.stack,W.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var d=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");d&&d.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=l.DetermineComponentFrameRoot(),b=g[0],R=g[1];if(b&&R){var U=b.split(`
`),X=R.split(`
`);for(d=l=0;l<U.length&&!U[l].includes("DetermineComponentFrameRoot");)l++;for(;d<X.length&&!X[d].includes("DetermineComponentFrameRoot");)d++;if(l===U.length||d===X.length)for(l=U.length-1,d=X.length-1;1<=l&&0<=d&&U[l]!==X[d];)d--;for(;1<=l&&0<=d;l--,d--)if(U[l]!==X[d]){if(l!==1||d!==1)do if(l--,d--,0>d||U[l]!==X[d]){var st=`
`+U[l].replace(" at new "," at ");return e.displayName&&st.includes("<anonymous>")&&(st=st.replace("<anonymous>",e.displayName)),st}while(1<=l&&0<=d);break}}}finally{ia=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?yr(a):""}function pi(e){switch(e.tag){case 26:case 27:case 5:return yr(e.type);case 16:return yr("Lazy");case 13:return yr("Suspense");case 19:return yr("SuspenseList");case 0:case 15:return ji(e.type,!1);case 11:return ji(e.type.render,!1);case 1:return ji(e.type,!0);case 31:return yr("Activity");default:return""}}function gi(e){try{var r="";do r+=pi(e),e=e.return;while(e);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function Mn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zi(e){var r=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function uc(e){var r=zi(e)?"checked":"value",a=Object.getOwnPropertyDescriptor(e.constructor.prototype,r),l=""+e[r];if(!e.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var d=a.get,g=a.set;return Object.defineProperty(e,r,{configurable:!0,get:function(){return d.call(this)},set:function(b){l=""+b,g.call(this,b)}}),Object.defineProperty(e,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(b){l=""+b},stopTracking:function(){e._valueTracker=null,delete e[r]}}}}function sa(e){e._valueTracker||(e._valueTracker=uc(e))}function Qa(e){if(!e)return!1;var r=e._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return e&&(l=zi(e)?e.checked?"true":"false":e.value),e=l,e!==a?(r.setValue(e),!0):!1}function pn(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var Zl=/[\n"\\]/g;function we(e){return e.replace(Zl,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function $n(e,r,a,l,d,g,b,R){e.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?e.type=b:e.removeAttribute("type"),r!=null?b==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+Mn(r)):e.value!==""+Mn(r)&&(e.value=""+Mn(r)):b!=="submit"&&b!=="reset"||e.removeAttribute("value"),r!=null?Yr(e,b,Mn(r)):a!=null?Yr(e,b,Mn(a)):l!=null&&e.removeAttribute("value"),d==null&&g!=null&&(e.defaultChecked=!!g),d!=null&&(e.checked=d&&typeof d!="function"&&typeof d!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?e.name=""+Mn(R):e.removeAttribute("name")}function qi(e,r,a,l,d,g,b,R){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),r!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||r!=null))return;a=a!=null?""+Mn(a):"",r=r!=null?""+Mn(r):a,R||r===e.value||(e.value=r),e.defaultValue=r}l=l??d,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=R?e.checked:!!l,e.defaultChecked=!!l,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(e.name=b)}function Yr(e,r,a){r==="number"&&pn(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Hi(e,r,a,l){if(e=e.options,r){r={};for(var d=0;d<a.length;d++)r["$"+a[d]]=!0;for(a=0;a<e.length;a++)d=r.hasOwnProperty("$"+e[a].value),e[a].selected!==d&&(e[a].selected=d),d&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Mn(a),r=null,d=0;d<e.length;d++){if(e[d].value===a){e[d].selected=!0,l&&(e[d].defaultSelected=!0);return}r!==null||e[d].disabled||(r=e[d])}r!==null&&(r.selected=!0)}}function be(e,r,a){if(r!=null&&(r=""+Mn(r),r!==e.value&&(e.value=r),a==null)){e.defaultValue!==r&&(e.defaultValue=r);return}e.defaultValue=a!=null?""+Mn(a):""}function aa(e,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(i(92));if(Oe(l)){if(1<l.length)throw Error(i(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=Mn(r),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l)}function Vn(e,r){if(r){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=r;return}}e.textContent=r}var _s=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tl(e,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(r,""):r==="float"?e.cssFloat="":e[r]="":l?e.setProperty(r,a):typeof a!="number"||a===0||_s.has(r)?r==="float"?e.cssFloat=a:e[r]=(""+a).trim():e[r]=a+"px"}function Kr(e,r,a){if(r!=null&&typeof r!="object")throw Error(i(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var d in r)l=r[d],r.hasOwnProperty(d)&&a[d]!==l&&tl(e,d,l)}else for(var g in r)r.hasOwnProperty(g)&&tl(e,g,r[g])}function oa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),yi=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ya(e){return yi.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var _i=null;function _r(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Fi=null,Xr=null;function la(e){var r=ht(e);if(r&&(e=r.stateNode)){var a=e[Ye]||null;t:switch(e=r.stateNode,r.type){case"input":if($n(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+we(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==e&&l.form===e.form){var d=l[Ye]||null;if(!d)throw Error(i(90));$n(l,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===e.form&&Qa(l)}break t;case"textarea":be(e,a.value,a.defaultValue);break t;case"select":r=a.value,r!=null&&Hi(e,!!a.multiple,r,!1)}}}var vr=!1;function el(e,r,a){if(vr)return e(r,a);vr=!0;try{var l=e(r);return l}finally{if(vr=!1,(Fi!==null||Xr!==null)&&(Ah(),Fi&&(r=Fi,e=Xr,Xr=Fi=null,la(r),e)))for(r=0;r<e.length;r++)la(e[r])}}function $i(e,r){var a=e.stateNode;if(a===null)return null;var l=a[Ye]||null;if(l===null)return null;a=l[r];t:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(i(231,r,typeof a));return a}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ke=!1;if(xr)try{var Gi={};Object.defineProperty(Gi,"passive",{get:function(){ke=!0}}),window.addEventListener("test",Gi,Gi),window.removeEventListener("test",Gi,Gi)}catch{ke=!1}var Zr=null,Qi=null,Dr=null;function Ka(){if(Dr)return Dr;var e,r=Qi,a=r.length,l,d="value"in Zr?Zr.value:Zr.textContent,g=d.length;for(e=0;e<a&&r[e]===d[e];e++);var b=a-e;for(l=1;l<=b&&r[a-l]===d[g-l];l++);return Dr=d.slice(e,1<l?1-l:void 0)}function Jr(e){var r=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&r===13&&(e=13)):e=r,e===10&&(e=13),32<=e||e===13?e:0}function Wr(){return!0}function nl(){return!1}function Fe(e){function r(a,l,d,g,b){this._reactName=a,this._targetInst=d,this.type=l,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var R in e)e.hasOwnProperty(R)&&(a=e[R],this[R]=a?a(g):g[R]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Wr:nl,this.isPropagationStopped=nl,this}return S(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Wr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Wr)},persist:function(){},isPersistent:Wr}),r}var ue={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ua=Fe(ue),vs=S({},ue,{view:0,detail:0}),rl=Fe(vs),ca,fa,ti,Es=S({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Or,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ti&&(ti&&e.type==="mousemove"?(ca=e.screenX-ti.screenX,fa=e.screenY-ti.screenY):fa=ca=0,ti=e),ca)},movementY:function(e){return"movementY"in e?e.movementY:fa}}),Er=Fe(Es),il=S({},Es,{dataTransfer:0}),Jl=Fe(il),Ts=S({},vs,{relatedTarget:0}),ha=Fe(Ts),da=S({},ue,{animationName:0,elapsedTime:0,pseudoElement:0}),ma=Fe(da),Wl=S({},ue,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),pa=Fe(Wl),vi=S({},ue,{data:0}),sl=Fe(vi),ga={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ae(e){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(e):(e=eu[e])?!!r[e]:!1}function Or(){return Ae}var nu=S({},vs,{key:function(e){if(e.key){var r=ga[e.key]||e.key;if(r!=="Unidentified")return r}return e.type==="keypress"?(e=Jr(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Or,charCode:function(e){return e.type==="keypress"?Jr(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Jr(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Xa=Fe(nu),ru=S({},Es,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ei=Fe(ru),Qt=S({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Or}),Za=Fe(Qt),Ve=S({},ue,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ti=Fe(Ve),al=S({},Es,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),ya=Fe(al),Pn=S({},ue,{newState:0,oldState:0}),ol=Fe(Pn),ws=[9,13,27,32],An=xr&&"CompositionEvent"in window,f=null;xr&&"documentMode"in document&&(f=document.documentMode);var _=xr&&"TextEvent"in window&&!f,w=xr&&(!An||f&&8<f&&11>=f),I=" ",Q=!1;function nt(e,r){switch(e){case"keyup":return ws.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _t(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var re=!1;function Ke(e,r){switch(e){case"compositionend":return _t(r);case"keypress":return r.which!==32?null:(Q=!0,I);case"textInput":return e=r.data,e===I&&Q?null:e;default:return null}}function ie(e,r){if(re)return e==="compositionend"||!An&&nt(e,r)?(e=Ka(),Dr=Qi=Zr=null,re=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return w&&r.locale!=="ko"?null:r.data;default:return null}}var rn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xe(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r==="input"?!!rn[e.type]:r==="textarea"}function wi(e,r,a,l){Fi?Xr?Xr.push(l):Xr=[l]:Fi=l,r=Dh(r,"onChange"),0<r.length&&(a=new ua("onChange","change",null,a,l),e.push({event:a,listeners:r}))}var sn=null,Nr=null;function _a(e){Fv(e,0)}function Ja(e){var r=D(e);if(Qa(r))return e}function fc(e,r){if(e==="change")return r}var hc=!1;if(xr){var iu;if(xr){var su="oninput"in document;if(!su){var au=document.createElement("div");au.setAttribute("oninput","return;"),su=typeof au.oninput=="function"}iu=su}else iu=!1;hc=iu&&(!document.documentMode||9<document.documentMode)}function Ze(){sn&&(sn.detachEvent("onpropertychange",Mr),Nr=sn=null)}function Mr(e){if(e.propertyName==="value"&&Ja(Nr)){var r=[];wi(r,Nr,e,_r(e)),el(_a,r)}}function Yf(e,r,a){e==="focusin"?(Ze(),sn=r,Nr=a,sn.attachEvent("onpropertychange",Mr)):e==="focusout"&&Ze()}function dc(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ja(Nr)}function an(e,r){if(e==="click")return Ja(r)}function sr(e,r){if(e==="input"||e==="change")return Ja(r)}function Kf(e,r){return e===r&&(e!==0||1/e===1/r)||e!==e&&r!==r}var ar=typeof Object.is=="function"?Object.is:Kf;function bs(e,r){if(ar(e,r))return!0;if(typeof e!="object"||e===null||typeof r!="object"||r===null)return!1;var a=Object.keys(e),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var d=a[l];if(!Hr.call(r,d)||!ar(e[d],r[d]))return!1}return!0}function va(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function mc(e,r){var a=va(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=r&&l>=r)return{node:a,offset:r-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=va(a)}}function ou(e,r){return e&&r?e===r?!0:e&&e.nodeType===3?!1:r&&r.nodeType===3?ou(e,r.parentNode):"contains"in e?e.contains(r):e.compareDocumentPosition?!!(e.compareDocumentPosition(r)&16):!1:!1}function Yi(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var r=pn(e.document);r instanceof e.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)e=r.contentWindow;else break;r=pn(e.document)}return r}function Wa(e){var r=e&&e.nodeName&&e.nodeName.toLowerCase();return r&&(r==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||r==="textarea"||e.contentEditable==="true")}var Xf=xr&&"documentMode"in document&&11>=document.documentMode,Ea=null,lu=null,to=null,uu=!1;function pc(e,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;uu||Ea==null||Ea!==pn(l)||(l=Ea,"selectionStart"in l&&Wa(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),to&&bs(to,l)||(to=l,l=Dh(lu,"onSelect"),0<l.length&&(r=new ua("onSelect","select",null,r,a),e.push({event:r,listeners:l}),r.target=Ea)))}function bi(e,r){var a={};return a[e.toLowerCase()]=r.toLowerCase(),a["Webkit"+e]="webkit"+r,a["Moz"+e]="moz"+r,a}var ei={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionrun:bi("Transition","TransitionRun"),transitionstart:bi("Transition","TransitionStart"),transitioncancel:bi("Transition","TransitionCancel"),transitionend:bi("Transition","TransitionEnd")},Ki={},gc={};xr&&(gc=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function Xi(e){if(Ki[e])return Ki[e];if(!ei[e])return e;var r=ei[e],a;for(a in r)if(r.hasOwnProperty(a)&&a in gc)return Ki[e]=r[a];return e}var yc=Xi("animationend"),ge=Xi("animationiteration"),_c=Xi("animationstart"),hm=Xi("transitionrun"),vc=Xi("transitionstart"),Ta=Xi("transitioncancel"),cu=Xi("transitionend"),Zi=new Map,ll="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");ll.push("scrollEnd");function Vr(e,r){Zi.set(e,r),Ir(r,[e])}var Pr=new WeakMap;function or(e,r){if(typeof e=="object"&&e!==null){var a=Pr.get(e);return a!==void 0?a:(r={value:e,source:r,stack:gi(r)},Pr.set(e,r),r)}return{value:e,source:r,stack:gi(r)}}var lr=[],eo=0,ul=0;function fu(){for(var e=eo,r=ul=eo=0;r<e;){var a=lr[r];lr[r++]=null;var l=lr[r];lr[r++]=null;var d=lr[r];lr[r++]=null;var g=lr[r];if(lr[r++]=null,l!==null&&d!==null){var b=l.pending;b===null?d.next=d:(d.next=b.next,b.next=d),l.pending=d}g!==0&&on(a,d,g)}}function hu(e,r,a,l){lr[eo++]=e,lr[eo++]=r,lr[eo++]=a,lr[eo++]=l,ul|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function gn(e,r,a,l){return hu(e,r,a,l),du(e)}function no(e,r){return hu(e,null,null,r),du(e)}function on(e,r,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var d=!1,g=e.return;g!==null;)g.childLanes|=a,l=g.alternate,l!==null&&(l.childLanes|=a),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(d=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,d&&r!==null&&(d=31-On(a),e=g.hiddenUpdates,l=e[d],l===null?e[d]=[r]:l.push(r),r.lane=a|536870912),g):null}function du(e){if(50<zc)throw zc=0,Ym=null,Error(i(185));for(var r=e.return;r!==null;)e=r,r=e.return;return e.tag===3?e.stateNode:null}var ro={};function wa(e,r,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(e,r,a,l){return new wa(e,r,a,l)}function io(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ur(e,r){var a=e.alternate;return a===null?(a=Un(e.tag,r,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=r,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,r=e.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function ba(e,r){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=r,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,r=a.dependencies,e.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),e}function Ji(e,r,a,l,d,g){var b=0;if(l=e,typeof e=="function")io(e)&&(b=1);else if(typeof e=="string")b=mS(e,a,xt.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case M:return e=Un(31,a,r,d),e.elementType=M,e.lanes=g,e;case tt:return Wi(a.children,d,g,r);case Z:b=8,d|=24;break;case ot:return e=Un(12,a,r,d|2),e.elementType=ot,e.lanes=g,e;case Dt:return e=Un(13,a,r,d),e.elementType=Dt,e.lanes=g,e;case Mt:return e=Un(19,a,r,d),e.elementType=Mt,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case bt:case wt:b=10;break t;case pt:b=9;break t;case Et:b=11;break t;case z:b=14;break t;case O:b=16,l=null;break t}b=29,a=Error(i(130,e===null?"null":typeof e,"")),l=null}return r=Un(b,a,r,d),r.elementType=e,r.type=l,r.lanes=g,r}function Wi(e,r,a,l){return e=Un(7,e,l,r),e.lanes=a,e}function Ec(e,r,a){return e=Un(6,e,null,r),e.lanes=a,e}function so(e,r,a){return r=Un(4,e.children!==null?e.children:[],e.key,r),r.lanes=a,r.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},r}var ts=[],As=0,Ai=null,Aa=0,kn=[],cr=0,Si=null,fr=1,Ur="";function $e(e,r){ts[As++]=Aa,ts[As++]=Ai,Ai=e,Aa=r}function Tr(e,r,a){kn[cr++]=fr,kn[cr++]=Ur,kn[cr++]=Si,Si=e;var l=fr;e=Ur;var d=32-On(l)-1;l&=~(1<<d),a+=1;var g=32-On(r)+d;if(30<g){var b=d-d%5;g=(l&(1<<b)-1).toString(32),l>>=b,d-=b,fr=1<<32-On(r)+d|a<<d|l,Ur=g+e}else fr=1<<g|a<<d|l,Ur=e}function cl(e){e.return!==null&&($e(e,1),Tr(e,1,0))}function fl(e){for(;e===Ai;)Ai=ts[--As],ts[As]=null,Aa=ts[--As],ts[As]=null;for(;e===Si;)Si=kn[--cr],kn[cr]=null,Ur=kn[--cr],kn[cr]=null,fr=kn[--cr],kn[cr]=null}var Sn=null,Le=null,fe=!1,es=null,wr=!1,Tc=Error(i(519));function Sa(e){var r=Error(i(418,""));throw ns(or(r,e)),Tc}function wc(e){var r=e.stateNode,a=e.type,l=e.memoizedProps;switch(r[nn]=e,r[Ye]=l,a){case"dialog":ae("cancel",r),ae("close",r);break;case"iframe":case"object":case"embed":ae("load",r);break;case"video":case"audio":for(a=0;a<Hc.length;a++)ae(Hc[a],r);break;case"source":ae("error",r);break;case"img":case"image":case"link":ae("error",r),ae("load",r);break;case"details":ae("toggle",r);break;case"input":ae("invalid",r),qi(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),sa(r);break;case"select":ae("invalid",r);break;case"textarea":ae("invalid",r),aa(r,l.value,l.defaultValue,l.children),sa(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||Yv(r.textContent,a)?(l.popover!=null&&(ae("beforetoggle",r),ae("toggle",r)),l.onScroll!=null&&ae("scroll",r),l.onScrollEnd!=null&&ae("scrollend",r),l.onClick!=null&&(r.onclick=Oh),r=!0):r=!1,r||Sa(e)}function bc(e){for(Sn=e.return;Sn;)switch(Sn.tag){case 5:case 13:wr=!1;return;case 27:case 3:wr=!0;return;default:Sn=Sn.return}}function Ss(e){if(e!==Sn)return!1;if(!fe)return bc(e),fe=!0,!1;var r=e.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||cp(e.type,e.memoizedProps)),a=!a),a&&Le&&Sa(e),bc(e),r===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));t:{for(e=e.nextSibling,r=0;e;){if(e.nodeType===8)if(a=e.data,a==="/$"){if(r===0){Le=ls(e.nextSibling);break t}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;e=e.nextSibling}Le=null}}else r===27?(r=Le,wo(e.type)?(e=mp,mp=null,Le=e):Le=r):Le=Sn?ls(e.stateNode.nextSibling):null;return!0}function Rs(){Le=Sn=null,fe=!1}function Ri(){var e=es;return e!==null&&(Br===null?Br=e:Br.push.apply(Br,e),es=null),e}function ns(e){es===null?es=[e]:es.push(e)}var Gn=dt(null),rs=null,ni=null;function is(e,r,a){gt(Gn,r._currentValue),r._currentValue=a}function Ii(e){e._currentValue=Gn.current,yt(Gn)}function hl(e,r,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&r)!==r?(e.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),e===a)break;e=e.return}}function mu(e,r,a,l){var d=e.child;for(d!==null&&(d.return=e);d!==null;){var g=d.dependencies;if(g!==null){var b=d.child;g=g.firstContext;t:for(;g!==null;){var R=g;g=d;for(var U=0;U<r.length;U++)if(R.context===r[U]){g.lanes|=a,R=g.alternate,R!==null&&(R.lanes|=a),hl(g.return,a,e),l||(b=null);break t}g=R.next}}else if(d.tag===18){if(b=d.return,b===null)throw Error(i(341));b.lanes|=a,g=b.alternate,g!==null&&(g.lanes|=a),hl(b,a,e),b=null}else b=d.child;if(b!==null)b.return=d;else for(b=d;b!==null;){if(b===e){b=null;break}if(d=b.sibling,d!==null){d.return=b.return,b=d;break}b=b.return}d=b}}function Is(e,r,a,l){e=null;for(var d=r,g=!1;d!==null;){if(!g){if((d.flags&524288)!==0)g=!0;else if((d.flags&262144)!==0)break}if(d.tag===10){var b=d.alternate;if(b===null)throw Error(i(387));if(b=b.memoizedProps,b!==null){var R=d.type;ar(d.pendingProps.value,b.value)||(e!==null?e.push(R):e=[R])}}else if(d===je.current){if(b=d.alternate,b===null)throw Error(i(387));b.memoizedState.memoizedState!==d.memoizedState.memoizedState&&(e!==null?e.push(Kc):e=[Kc])}d=d.return}e!==null&&mu(r,e,a,l),r.flags|=262144}function dl(e){for(e=e.firstContext;e!==null;){if(!ar(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ra(e){rs=e,ni=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Ln(e){return Zf(rs,e)}function pu(e,r){return rs===null&&Ra(e),Zf(e,r)}function Zf(e,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ni===null){if(e===null)throw Error(i(308));ni=r,e.dependencies={lanes:0,firstContext:r},e.flags|=524288}else ni=ni.next=r;return a}var dm=typeof AbortController<"u"?AbortController:function(){var e=[],r=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){r.aborted=!0,e.forEach(function(a){return a()})}},mm=s.unstable_scheduleCallback,pm=s.unstable_NormalPriority,ln={$$typeof:wt,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Ac(){return{controller:new dm,data:new Map,refCount:0}}function ml(e){e.refCount--,e.refCount===0&&mm(pm,function(){e.controller.abort()})}var pl=null,gl=0,ao=0,Ia=null;function Jf(e,r){if(pl===null){var a=pl=[];gl=0,ao=ep(),Ia={status:"pending",value:void 0,then:function(l){a.push(l)}}}return gl++,r.then(Wf,Wf),r}function Wf(){if(--gl===0&&pl!==null){Ia!==null&&(Ia.status="fulfilled");var e=pl;pl=null,ao=0,Ia=null;for(var r=0;r<e.length;r++)(0,e[r])()}}function gm(e,r){var a=[],l={status:"pending",value:null,reason:null,then:function(d){a.push(d)}};return e.then(function(){l.status="fulfilled",l.value=r;for(var d=0;d<a.length;d++)(0,a[d])(r)},function(d){for(l.status="rejected",l.reason=d,d=0;d<a.length;d++)(0,a[d])(void 0)}),l}var th=rt.S;rt.S=function(e,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&Jf(e,r),th!==null&&th(e,r)};var Ca=dt(null);function yl(){var e=Ca.current;return e!==null?e:Pe.pooledCache}function _l(e,r){r===null?gt(Ca,Ca.current):gt(Ca,r.pool)}function xa(){var e=yl();return e===null?null:{parent:ln._currentValue,pool:e}}var oo=Error(i(460)),eh=Error(i(474)),vl=Error(i(542)),Sc={then:function(){}};function nh(e){return e=e.status,e==="fulfilled"||e==="rejected"}function gu(){}function rh(e,r,a){switch(a=e[a],a===void 0?e.push(r):a!==r&&(r.then(gu,gu),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,ih(e),e;default:if(typeof r.status=="string")r.then(gu,gu);else{if(e=Pe,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=r,e.status="pending",e.then(function(l){if(r.status==="pending"){var d=r;d.status="fulfilled",d.value=l}},function(l){if(r.status==="pending"){var d=r;d.status="rejected",d.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw e=r.reason,ih(e),e}throw El=r,oo}}var El=null;function yu(){if(El===null)throw Error(i(459));var e=El;return El=null,e}function ih(e){if(e===oo||e===vl)throw Error(i(483))}var Cs=!1;function Rc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Wt(e,r){e=e.updateQueue,r.updateQueue===e&&(r.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xs(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function br(e,r,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,(Ie&2)!==0){var d=l.pending;return d===null?r.next=r:(r.next=d.next,d.next=r),l.pending=r,r=du(e),on(e,null,a),r}return hu(e,l,r,a),du(e)}function Ds(e,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=e.pendingLanes,a|=l,r.lanes=a,Zo(e,a)}}function Tl(e,r){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var d=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var b={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?d=g=b:g=g.next=b,a=a.next}while(a!==null);g===null?d=g=r:g=g.next=r}else d=g=r;a={baseState:l.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=r:e.next=r,a.lastBaseUpdate=r}var Ic=!1;function wl(){if(Ic){var e=Ia;if(e!==null)throw e}}function bl(e,r,a,l){Ic=!1;var d=e.updateQueue;Cs=!1;var g=d.firstBaseUpdate,b=d.lastBaseUpdate,R=d.shared.pending;if(R!==null){d.shared.pending=null;var U=R,X=U.next;U.next=null,b===null?g=X:b.next=X,b=U;var st=e.alternate;st!==null&&(st=st.updateQueue,R=st.lastBaseUpdate,R!==b&&(R===null?st.firstBaseUpdate=X:R.next=X,st.lastBaseUpdate=U))}if(g!==null){var lt=d.baseState;b=0,st=X=U=null,R=g;do{var W=R.lane&-536870913,et=W!==R.lane;if(et?(he&W)===W:(l&W)===W){W!==0&&W===ao&&(Ic=!0),st!==null&&(st=st.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});t:{var Ht=e,kt=R;W=r;var De=a;switch(kt.tag){case 1:if(Ht=kt.payload,typeof Ht=="function"){lt=Ht.call(De,lt,W);break t}lt=Ht;break t;case 3:Ht.flags=Ht.flags&-65537|128;case 0:if(Ht=kt.payload,W=typeof Ht=="function"?Ht.call(De,lt,W):Ht,W==null)break t;lt=S({},lt,W);break t;case 2:Cs=!0}}W=R.callback,W!==null&&(e.flags|=64,et&&(e.flags|=8192),et=d.callbacks,et===null?d.callbacks=[W]:et.push(W))}else et={lane:W,tag:R.tag,payload:R.payload,callback:R.callback,next:null},st===null?(X=st=et,U=lt):st=st.next=et,b|=W;if(R=R.next,R===null){if(R=d.shared.pending,R===null)break;et=R,R=et.next,et.next=null,d.lastBaseUpdate=et,d.shared.pending=null}}while(!0);st===null&&(U=lt),d.baseState=U,d.firstBaseUpdate=X,d.lastBaseUpdate=st,g===null&&(d.shared.lanes=0),_o|=b,e.lanes=b,e.memoizedState=lt}}function sh(e,r){if(typeof e!="function")throw Error(i(191,e));e.call(r)}function ah(e,r){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)sh(a[e],r)}var lo=dt(null),_u=dt(0);function un(e,r){e=ka,gt(_u,e),gt(lo,r),ka=e|r.baseLanes}function Cc(){gt(_u,ka),gt(lo,lo.current)}function xc(){ka=_u.current,yt(lo),yt(_u)}var Os=0,Zt=null,Se=null,Je=null,vu=!1,uo=!1,Da=!1,Al=0,Sl=0,co=null,c=0;function h(){throw Error(i(321))}function p(e,r){if(r===null)return!1;for(var a=0;a<r.length&&a<e.length;a++)if(!ar(e[a],r[a]))return!1;return!0}function v(e,r,a,l,d,g){return Os=g,Zt=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,rt.H=e===null||e.memoizedState===null?C_:x_,Da=!1,g=a(l,d),Da=!1,uo&&(g=C(r,a,l,d)),A(e),g}function A(e){rt.H=fh;var r=Se!==null&&Se.next!==null;if(Os=0,Je=Se=Zt=null,vu=!1,Sl=0,co=null,r)throw Error(i(300));e===null||Bn||(e=e.dependencies,e!==null&&dl(e)&&(Bn=!0))}function C(e,r,a,l){Zt=e;var d=0;do{if(uo&&(co=null),Sl=0,uo=!1,25<=d)throw Error(i(301));if(d+=1,Je=Se=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}rt.H=S1,g=r(a,l)}while(uo);return g}function j(){var e=rt.H,r=e.useState()[0];return r=typeof r.then=="function"?te(r):r,e=e.useState()[0],(Se!==null?Se.memoizedState:null)!==e&&(Zt.flags|=1024),r}function k(){var e=Al!==0;return Al=0,e}function Y(e,r,a){r.updateQueue=e.updateQueue,r.flags&=-2053,e.lanes&=~a}function it(e){if(vu){for(e=e.memoizedState;e!==null;){var r=e.queue;r!==null&&(r.pending=null),e=e.next}vu=!1}Os=0,Je=Se=Zt=null,uo=!1,Sl=Al=0,co=null}function mt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Zt.memoizedState=Je=e:Je=Je.next=e,Je}function ct(){if(Se===null){var e=Zt.alternate;e=e!==null?e.memoizedState:null}else e=Se.next;var r=Je===null?Zt.memoizedState:Je.next;if(r!==null)Je=r,Se=e;else{if(e===null)throw Zt.alternate===null?Error(i(467)):Error(i(310));Se=e,e={memoizedState:Se.memoizedState,baseState:Se.baseState,baseQueue:Se.baseQueue,queue:Se.queue,next:null},Je===null?Zt.memoizedState=Je=e:Je=Je.next=e}return Je}function At(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function te(e){var r=Sl;return Sl+=1,co===null&&(co=[]),e=rh(co,e,r),r=Zt,(Je===null?r.memoizedState:Je.next)===null&&(r=r.alternate,rt.H=r===null||r.memoizedState===null?C_:x_),e}function ye(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return te(e);if(e.$$typeof===wt)return Ln(e)}throw Error(i(438,String(e)))}function ri(e){var r=null,a=Zt.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=Zt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(d){return d.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=At(),Zt.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(e),l=0;l<e;l++)a[l]=B;return r.index++,a}function yn(e,r){return typeof r=="function"?r(e):r}function kr(e){var r=ct();return Oa(r,Se,e)}function Oa(e,r,a){var l=e.queue;if(l===null)throw Error(i(311));l.lastRenderedReducer=a;var d=e.baseQueue,g=l.pending;if(g!==null){if(d!==null){var b=d.next;d.next=g.next,g.next=b}r.baseQueue=d=g,l.pending=null}if(g=e.baseState,d===null)e.memoizedState=g;else{r=d.next;var R=b=null,U=null,X=r,st=!1;do{var lt=X.lane&-536870913;if(lt!==X.lane?(he&lt)===lt:(Os&lt)===lt){var W=X.revertLane;if(W===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null}),lt===ao&&(st=!0);else if((Os&W)===W){X=X.next,W===ao&&(st=!0);continue}else lt={lane:0,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(R=U=lt,b=g):U=U.next=lt,Zt.lanes|=W,_o|=W;lt=X.action,Da&&a(g,lt),g=X.hasEagerState?X.eagerState:a(g,lt)}else W={lane:lt,revertLane:X.revertLane,action:X.action,hasEagerState:X.hasEagerState,eagerState:X.eagerState,next:null},U===null?(R=U=W,b=g):U=U.next=W,Zt.lanes|=lt,_o|=lt;X=X.next}while(X!==null&&X!==r);if(U===null?b=g:U.next=R,!ar(g,e.memoizedState)&&(Bn=!0,st&&(a=Ia,a!==null)))throw a;e.memoizedState=g,e.baseState=b,e.baseQueue=U,l.lastRenderedState=g}return d===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function cn(e){var r=ct(),a=r.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=e;var l=a.dispatch,d=a.pending,g=r.memoizedState;if(d!==null){a.pending=null;var b=d=d.next;do g=e(g,b.action),b=b.next;while(b!==d);ar(g,r.memoizedState)||(Bn=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),a.lastRenderedState=g}return[g,l]}function Ci(e,r,a){var l=Zt,d=ct(),g=fe;if(g){if(a===void 0)throw Error(i(407));a=a()}else a=r();var b=!ar((Se||d).memoizedState,a);b&&(d.memoizedState=a,Bn=!0),d=d.queue;var R=as.bind(null,l,d,e);if(Dc(2048,8,R,[e]),d.getSnapshot!==r||b||Je!==null&&Je.memoizedState.tag&1){if(l.flags|=2048,Tu(9,lh(),ss.bind(null,l,d,a,r),null),Pe===null)throw Error(i(349));g||(Os&124)!==0||We(l,r,a)}return a}function We(e,r,a){e.flags|=16384,e={getSnapshot:r,value:a},r=Zt.updateQueue,r===null?(r=At(),Zt.updateQueue=r,r.stores=[e]):(a=r.stores,a===null?r.stores=[e]:a.push(e))}function ss(e,r,a,l){r.value=a,r.getSnapshot=l,Eu(r)&&oh(e)}function as(e,r,a){return a(function(){Eu(r)&&oh(e)})}function Eu(e){var r=e.getSnapshot;e=e.value;try{var a=r();return!ar(e,a)}catch{return!0}}function oh(e){var r=no(e,2);r!==null&&li(r,e,2)}function ym(e){var r=mt();if(typeof e=="function"){var a=e;if(e=a(),Da){rr(!0);try{a()}finally{rr(!1)}}}return r.memoizedState=r.baseState=e,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:e},r}function t_(e,r,a,l){return e.baseState=a,Oa(e,Se,typeof l=="function"?l:yn)}function E1(e,r,a,l,d){if(ch(e))throw Error(i(485));if(e=r.action,e!==null){var g={payload:d,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};rt.T!==null?a(!0):g.isTransition=!1,l(g),a=r.pending,a===null?(g.next=r.pending=g,e_(r,g)):(g.next=a.next,r.pending=a.next=g)}}function e_(e,r){var a=r.action,l=r.payload,d=e.state;if(r.isTransition){var g=rt.T,b={};rt.T=b;try{var R=a(d,l),U=rt.S;U!==null&&U(b,R),n_(e,r,R)}catch(X){_m(e,r,X)}finally{rt.T=g}}else try{g=a(d,l),n_(e,r,g)}catch(X){_m(e,r,X)}}function n_(e,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){r_(e,r,l)},function(l){return _m(e,r,l)}):r_(e,r,a)}function r_(e,r,a){r.status="fulfilled",r.value=a,i_(r),e.state=a,r=e.pending,r!==null&&(a=r.next,a===r?e.pending=null:(a=a.next,r.next=a,e_(e,a)))}function _m(e,r,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,i_(r),r=r.next;while(r!==l)}e.action=null}function i_(e){e=e.listeners;for(var r=0;r<e.length;r++)(0,e[r])()}function s_(e,r){return r}function a_(e,r){if(fe){var a=Pe.formState;if(a!==null){t:{var l=Zt;if(fe){if(Le){e:{for(var d=Le,g=wr;d.nodeType!==8;){if(!g){d=null;break e}if(d=ls(d.nextSibling),d===null){d=null;break e}}g=d.data,d=g==="F!"||g==="F"?d:null}if(d){Le=ls(d.nextSibling),l=d.data==="F!";break t}}Sa(l)}l=!1}l&&(r=a[0])}}return a=mt(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s_,lastRenderedState:r},a.queue=l,a=S_.bind(null,Zt,l),l.dispatch=a,l=ym(!1),g=bm.bind(null,Zt,!1,l.queue),l=mt(),d={state:r,dispatch:null,action:e,pending:null},l.queue=d,a=E1.bind(null,Zt,d,g,a),d.dispatch=a,l.memoizedState=e,[r,a,!1]}function o_(e){var r=ct();return l_(r,Se,e)}function l_(e,r,a){if(r=Oa(e,r,s_)[0],e=kr(yn)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=te(r)}catch(b){throw b===oo?vl:b}else l=r;r=ct();var d=r.queue,g=d.dispatch;return a!==r.memoizedState&&(Zt.flags|=2048,Tu(9,lh(),T1.bind(null,d,a),null)),[l,g,e]}function T1(e,r){e.action=r}function u_(e){var r=ct(),a=Se;if(a!==null)return l_(r,a,e);ct(),r=r.memoizedState,a=ct();var l=a.queue.dispatch;return a.memoizedState=e,[r,l,!1]}function Tu(e,r,a,l){return e={tag:e,create:a,deps:l,inst:r,next:null},r=Zt.updateQueue,r===null&&(r=At(),Zt.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,r.lastEffect=e),e}function lh(){return{destroy:void 0,resource:void 0}}function c_(){return ct().memoizedState}function uh(e,r,a,l){var d=mt();l=l===void 0?null:l,Zt.flags|=e,d.memoizedState=Tu(1|r,lh(),a,l)}function Dc(e,r,a,l){var d=ct();l=l===void 0?null:l;var g=d.memoizedState.inst;Se!==null&&l!==null&&p(l,Se.memoizedState.deps)?d.memoizedState=Tu(r,g,a,l):(Zt.flags|=e,d.memoizedState=Tu(1|r,g,a,l))}function f_(e,r){uh(8390656,8,e,r)}function h_(e,r){Dc(2048,8,e,r)}function d_(e,r){return Dc(4,2,e,r)}function m_(e,r){return Dc(4,4,e,r)}function p_(e,r){if(typeof r=="function"){e=e();var a=r(e);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return e=e(),r.current=e,function(){r.current=null}}function g_(e,r,a){a=a!=null?a.concat([e]):null,Dc(4,4,p_.bind(null,r,e),a)}function vm(){}function y_(e,r){var a=ct();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&p(r,l[1])?l[0]:(a.memoizedState=[e,r],e)}function __(e,r){var a=ct();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&p(r,l[1]))return l[0];if(l=e(),Da){rr(!0);try{e()}finally{rr(!1)}}return a.memoizedState=[l,r],l}function Em(e,r,a){return a===void 0||(Os&1073741824)!==0?e.memoizedState=r:(e.memoizedState=a,e=Tv(),Zt.lanes|=e,_o|=e,a)}function v_(e,r,a,l){return ar(a,r)?a:lo.current!==null?(e=Em(e,a,l),ar(e,r)||(Bn=!0),e):(Os&42)===0?(Bn=!0,e.memoizedState=a):(e=Tv(),Zt.lanes|=e,_o|=e,r)}function E_(e,r,a,l,d){var g=Tt.p;Tt.p=g!==0&&8>g?g:8;var b=rt.T,R={};rt.T=R,bm(e,!1,r,a);try{var U=d(),X=rt.S;if(X!==null&&X(R,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var st=gm(U,l);Oc(e,r,st,oi(e))}else Oc(e,r,l,oi(e))}catch(lt){Oc(e,r,{then:function(){},status:"rejected",reason:lt},oi())}finally{Tt.p=g,rt.T=b}}function w1(){}function Tm(e,r,a,l){if(e.tag!==5)throw Error(i(476));var d=T_(e).queue;E_(e,d,r,Ot,a===null?w1:function(){return w_(e),a(l)})}function T_(e){var r=e.memoizedState;if(r!==null)return r;r={memoizedState:Ot,baseState:Ot,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:Ot},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:yn,lastRenderedState:a},next:null},e.memoizedState=r,e=e.alternate,e!==null&&(e.memoizedState=r),r}function w_(e){var r=T_(e).next.queue;Oc(e,r,{},oi())}function wm(){return Ln(Kc)}function b_(){return ct().memoizedState}function A_(){return ct().memoizedState}function b1(e){for(var r=e.return;r!==null;){switch(r.tag){case 24:case 3:var a=oi();e=xs(a);var l=br(r,e,a);l!==null&&(li(l,r,a),Ds(l,r,a)),r={cache:Ac()},e.payload=r;return}r=r.return}}function A1(e,r,a){var l=oi();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},ch(e)?R_(r,a):(a=gn(e,r,a,l),a!==null&&(li(a,e,l),I_(a,r,l)))}function S_(e,r,a){var l=oi();Oc(e,r,a,l)}function Oc(e,r,a,l){var d={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(ch(e))R_(r,d);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var b=r.lastRenderedState,R=g(b,a);if(d.hasEagerState=!0,d.eagerState=R,ar(R,b))return hu(e,r,d,0),Pe===null&&fu(),!1}catch{}finally{}if(a=gn(e,r,d,l),a!==null)return li(a,e,l),I_(a,r,l),!0}return!1}function bm(e,r,a,l){if(l={lane:2,revertLane:ep(),action:l,hasEagerState:!1,eagerState:null,next:null},ch(e)){if(r)throw Error(i(479))}else r=gn(e,a,l,2),r!==null&&li(r,e,2)}function ch(e){var r=e.alternate;return e===Zt||r!==null&&r===Zt}function R_(e,r){uo=vu=!0;var a=e.pending;a===null?r.next=r:(r.next=a.next,a.next=r),e.pending=r}function I_(e,r,a){if((a&4194048)!==0){var l=r.lanes;l&=e.pendingLanes,a|=l,r.lanes=a,Zo(e,a)}}var fh={readContext:Ln,use:ye,useCallback:h,useContext:h,useEffect:h,useImperativeHandle:h,useLayoutEffect:h,useInsertionEffect:h,useMemo:h,useReducer:h,useRef:h,useState:h,useDebugValue:h,useDeferredValue:h,useTransition:h,useSyncExternalStore:h,useId:h,useHostTransitionStatus:h,useFormState:h,useActionState:h,useOptimistic:h,useMemoCache:h,useCacheRefresh:h},C_={readContext:Ln,use:ye,useCallback:function(e,r){return mt().memoizedState=[e,r===void 0?null:r],e},useContext:Ln,useEffect:f_,useImperativeHandle:function(e,r,a){a=a!=null?a.concat([e]):null,uh(4194308,4,p_.bind(null,r,e),a)},useLayoutEffect:function(e,r){return uh(4194308,4,e,r)},useInsertionEffect:function(e,r){uh(4,2,e,r)},useMemo:function(e,r){var a=mt();r=r===void 0?null:r;var l=e();if(Da){rr(!0);try{e()}finally{rr(!1)}}return a.memoizedState=[l,r],l},useReducer:function(e,r,a){var l=mt();if(a!==void 0){var d=a(r);if(Da){rr(!0);try{a(r)}finally{rr(!1)}}}else d=r;return l.memoizedState=l.baseState=d,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:d},l.queue=e,e=e.dispatch=A1.bind(null,Zt,e),[l.memoizedState,e]},useRef:function(e){var r=mt();return e={current:e},r.memoizedState=e},useState:function(e){e=ym(e);var r=e.queue,a=S_.bind(null,Zt,r);return r.dispatch=a,[e.memoizedState,a]},useDebugValue:vm,useDeferredValue:function(e,r){var a=mt();return Em(a,e,r)},useTransition:function(){var e=ym(!1);return e=E_.bind(null,Zt,e.queue,!0,!1),mt().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,r,a){var l=Zt,d=mt();if(fe){if(a===void 0)throw Error(i(407));a=a()}else{if(a=r(),Pe===null)throw Error(i(349));(he&124)!==0||We(l,r,a)}d.memoizedState=a;var g={value:a,getSnapshot:r};return d.queue=g,f_(as.bind(null,l,g,e),[e]),l.flags|=2048,Tu(9,lh(),ss.bind(null,l,g,a,r),null),a},useId:function(){var e=mt(),r=Pe.identifierPrefix;if(fe){var a=Ur,l=fr;a=(l&~(1<<32-On(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=Al++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=c++,r="«"+r+"r"+a.toString(32)+"»";return e.memoizedState=r},useHostTransitionStatus:wm,useFormState:a_,useActionState:a_,useOptimistic:function(e){var r=mt();r.memoizedState=r.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=bm.bind(null,Zt,!0,a),a.dispatch=r,[e,r]},useMemoCache:ri,useCacheRefresh:function(){return mt().memoizedState=b1.bind(null,Zt)}},x_={readContext:Ln,use:ye,useCallback:y_,useContext:Ln,useEffect:h_,useImperativeHandle:g_,useInsertionEffect:d_,useLayoutEffect:m_,useMemo:__,useReducer:kr,useRef:c_,useState:function(){return kr(yn)},useDebugValue:vm,useDeferredValue:function(e,r){var a=ct();return v_(a,Se.memoizedState,e,r)},useTransition:function(){var e=kr(yn)[0],r=ct().memoizedState;return[typeof e=="boolean"?e:te(e),r]},useSyncExternalStore:Ci,useId:b_,useHostTransitionStatus:wm,useFormState:o_,useActionState:o_,useOptimistic:function(e,r){var a=ct();return t_(a,Se,e,r)},useMemoCache:ri,useCacheRefresh:A_},S1={readContext:Ln,use:ye,useCallback:y_,useContext:Ln,useEffect:h_,useImperativeHandle:g_,useInsertionEffect:d_,useLayoutEffect:m_,useMemo:__,useReducer:cn,useRef:c_,useState:function(){return cn(yn)},useDebugValue:vm,useDeferredValue:function(e,r){var a=ct();return Se===null?Em(a,e,r):v_(a,Se.memoizedState,e,r)},useTransition:function(){var e=cn(yn)[0],r=ct().memoizedState;return[typeof e=="boolean"?e:te(e),r]},useSyncExternalStore:Ci,useId:b_,useHostTransitionStatus:wm,useFormState:u_,useActionState:u_,useOptimistic:function(e,r){var a=ct();return Se!==null?t_(a,Se,e,r):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:ri,useCacheRefresh:A_},wu=null,Nc=0;function hh(e){var r=Nc;return Nc+=1,wu===null&&(wu=[]),rh(wu,e,r)}function Mc(e,r){r=r.props.ref,e.ref=r!==void 0?r:null}function dh(e,r){throw r.$$typeof===x?Error(i(525)):(e=Object.prototype.toString.call(r),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":e)))}function D_(e){var r=e._init;return r(e._payload)}function O_(e){function r(G,H){if(e){var K=G.deletions;K===null?(G.deletions=[H],G.flags|=16):K.push(H)}}function a(G,H){if(!e)return null;for(;H!==null;)r(G,H),H=H.sibling;return null}function l(G){for(var H=new Map;G!==null;)G.key!==null?H.set(G.key,G):H.set(G.index,G),G=G.sibling;return H}function d(G,H){return G=ur(G,H),G.index=0,G.sibling=null,G}function g(G,H,K){return G.index=K,e?(K=G.alternate,K!==null?(K=K.index,K<H?(G.flags|=67108866,H):K):(G.flags|=67108866,H)):(G.flags|=1048576,H)}function b(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function R(G,H,K,at){return H===null||H.tag!==6?(H=Ec(K,G.mode,at),H.return=G,H):(H=d(H,K),H.return=G,H)}function U(G,H,K,at){var Ct=K.type;return Ct===tt?st(G,H,K.props.children,at,K.key):H!==null&&(H.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===O&&D_(Ct)===H.type)?(H=d(H,K.props),Mc(H,K),H.return=G,H):(H=Ji(K.type,K.key,K.props,null,G.mode,at),Mc(H,K),H.return=G,H)}function X(G,H,K,at){return H===null||H.tag!==4||H.stateNode.containerInfo!==K.containerInfo||H.stateNode.implementation!==K.implementation?(H=so(K,G.mode,at),H.return=G,H):(H=d(H,K.children||[]),H.return=G,H)}function st(G,H,K,at,Ct){return H===null||H.tag!==7?(H=Wi(K,G.mode,at,Ct),H.return=G,H):(H=d(H,K),H.return=G,H)}function lt(G,H,K){if(typeof H=="string"&&H!==""||typeof H=="number"||typeof H=="bigint")return H=Ec(""+H,G.mode,K),H.return=G,H;if(typeof H=="object"&&H!==null){switch(H.$$typeof){case N:return K=Ji(H.type,H.key,H.props,null,G.mode,K),Mc(K,H),K.return=G,K;case V:return H=so(H,G.mode,K),H.return=G,H;case O:var at=H._init;return H=at(H._payload),lt(G,H,K)}if(Oe(H)||F(H))return H=Wi(H,G.mode,K,null),H.return=G,H;if(typeof H.then=="function")return lt(G,hh(H),K);if(H.$$typeof===wt)return lt(G,pu(G,H),K);dh(G,H)}return null}function W(G,H,K,at){var Ct=H!==null?H.key:null;if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return Ct!==null?null:R(G,H,""+K,at);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case N:return K.key===Ct?U(G,H,K,at):null;case V:return K.key===Ct?X(G,H,K,at):null;case O:return Ct=K._init,K=Ct(K._payload),W(G,H,K,at)}if(Oe(K)||F(K))return Ct!==null?null:st(G,H,K,at,null);if(typeof K.then=="function")return W(G,H,hh(K),at);if(K.$$typeof===wt)return W(G,H,pu(G,K),at);dh(G,K)}return null}function et(G,H,K,at,Ct){if(typeof at=="string"&&at!==""||typeof at=="number"||typeof at=="bigint")return G=G.get(K)||null,R(H,G,""+at,Ct);if(typeof at=="object"&&at!==null){switch(at.$$typeof){case N:return G=G.get(at.key===null?K:at.key)||null,U(H,G,at,Ct);case V:return G=G.get(at.key===null?K:at.key)||null,X(H,G,at,Ct);case O:var ee=at._init;return at=ee(at._payload),et(G,H,K,at,Ct)}if(Oe(at)||F(at))return G=G.get(K)||null,st(H,G,at,Ct,null);if(typeof at.then=="function")return et(G,H,K,hh(at),Ct);if(at.$$typeof===wt)return et(G,H,K,pu(H,at),Ct);dh(H,at)}return null}function Ht(G,H,K,at){for(var Ct=null,ee=null,Nt=H,Bt=H=0,zn=null;Nt!==null&&Bt<K.length;Bt++){Nt.index>Bt?(zn=Nt,Nt=null):zn=Nt.sibling;var ve=W(G,Nt,K[Bt],at);if(ve===null){Nt===null&&(Nt=zn);break}e&&Nt&&ve.alternate===null&&r(G,Nt),H=g(ve,H,Bt),ee===null?Ct=ve:ee.sibling=ve,ee=ve,Nt=zn}if(Bt===K.length)return a(G,Nt),fe&&$e(G,Bt),Ct;if(Nt===null){for(;Bt<K.length;Bt++)Nt=lt(G,K[Bt],at),Nt!==null&&(H=g(Nt,H,Bt),ee===null?Ct=Nt:ee.sibling=Nt,ee=Nt);return fe&&$e(G,Bt),Ct}for(Nt=l(Nt);Bt<K.length;Bt++)zn=et(Nt,G,Bt,K[Bt],at),zn!==null&&(e&&zn.alternate!==null&&Nt.delete(zn.key===null?Bt:zn.key),H=g(zn,H,Bt),ee===null?Ct=zn:ee.sibling=zn,ee=zn);return e&&Nt.forEach(function(Io){return r(G,Io)}),fe&&$e(G,Bt),Ct}function kt(G,H,K,at){if(K==null)throw Error(i(151));for(var Ct=null,ee=null,Nt=H,Bt=H=0,zn=null,ve=K.next();Nt!==null&&!ve.done;Bt++,ve=K.next()){Nt.index>Bt?(zn=Nt,Nt=null):zn=Nt.sibling;var Io=W(G,Nt,ve.value,at);if(Io===null){Nt===null&&(Nt=zn);break}e&&Nt&&Io.alternate===null&&r(G,Nt),H=g(Io,H,Bt),ee===null?Ct=Io:ee.sibling=Io,ee=Io,Nt=zn}if(ve.done)return a(G,Nt),fe&&$e(G,Bt),Ct;if(Nt===null){for(;!ve.done;Bt++,ve=K.next())ve=lt(G,ve.value,at),ve!==null&&(H=g(ve,H,Bt),ee===null?Ct=ve:ee.sibling=ve,ee=ve);return fe&&$e(G,Bt),Ct}for(Nt=l(Nt);!ve.done;Bt++,ve=K.next())ve=et(Nt,G,Bt,ve.value,at),ve!==null&&(e&&ve.alternate!==null&&Nt.delete(ve.key===null?Bt:ve.key),H=g(ve,H,Bt),ee===null?Ct=ve:ee.sibling=ve,ee=ve);return e&&Nt.forEach(function(RS){return r(G,RS)}),fe&&$e(G,Bt),Ct}function De(G,H,K,at){if(typeof K=="object"&&K!==null&&K.type===tt&&K.key===null&&(K=K.props.children),typeof K=="object"&&K!==null){switch(K.$$typeof){case N:t:{for(var Ct=K.key;H!==null;){if(H.key===Ct){if(Ct=K.type,Ct===tt){if(H.tag===7){a(G,H.sibling),at=d(H,K.props.children),at.return=G,G=at;break t}}else if(H.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===O&&D_(Ct)===H.type){a(G,H.sibling),at=d(H,K.props),Mc(at,K),at.return=G,G=at;break t}a(G,H);break}else r(G,H);H=H.sibling}K.type===tt?(at=Wi(K.props.children,G.mode,at,K.key),at.return=G,G=at):(at=Ji(K.type,K.key,K.props,null,G.mode,at),Mc(at,K),at.return=G,G=at)}return b(G);case V:t:{for(Ct=K.key;H!==null;){if(H.key===Ct)if(H.tag===4&&H.stateNode.containerInfo===K.containerInfo&&H.stateNode.implementation===K.implementation){a(G,H.sibling),at=d(H,K.children||[]),at.return=G,G=at;break t}else{a(G,H);break}else r(G,H);H=H.sibling}at=so(K,G.mode,at),at.return=G,G=at}return b(G);case O:return Ct=K._init,K=Ct(K._payload),De(G,H,K,at)}if(Oe(K))return Ht(G,H,K,at);if(F(K)){if(Ct=F(K),typeof Ct!="function")throw Error(i(150));return K=Ct.call(K),kt(G,H,K,at)}if(typeof K.then=="function")return De(G,H,hh(K),at);if(K.$$typeof===wt)return De(G,H,pu(G,K),at);dh(G,K)}return typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint"?(K=""+K,H!==null&&H.tag===6?(a(G,H.sibling),at=d(H,K),at.return=G,G=at):(a(G,H),at=Ec(K,G.mode,at),at.return=G,G=at),b(G)):a(G,H)}return function(G,H,K,at){try{Nc=0;var Ct=De(G,H,K,at);return wu=null,Ct}catch(Nt){if(Nt===oo||Nt===vl)throw Nt;var ee=Un(29,Nt,null,G.mode);return ee.lanes=at,ee.return=G,ee}finally{}}}var bu=O_(!0),N_=O_(!1),xi=dt(null),Ns=null;function fo(e){var r=e.alternate;gt(Rn,Rn.current&1),gt(xi,e),Ns===null&&(r===null||lo.current!==null||r.memoizedState!==null)&&(Ns=e)}function M_(e){if(e.tag===22){if(gt(Rn,Rn.current),gt(xi,e),Ns===null){var r=e.alternate;r!==null&&r.memoizedState!==null&&(Ns=e)}}else ho()}function ho(){gt(Rn,Rn.current),gt(xi,xi.current)}function Na(e){yt(xi),Ns===e&&(Ns=null),yt(Rn)}var Rn=dt(0);function mh(e){for(var r=e;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||dp(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function Am(e,r,a,l){r=e.memoizedState,a=a(l,r),a=a==null?r:S({},r,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Sm={enqueueSetState:function(e,r,a){e=e._reactInternals;var l=oi(),d=xs(l);d.payload=r,a!=null&&(d.callback=a),r=br(e,d,l),r!==null&&(li(r,e,l),Ds(r,e,l))},enqueueReplaceState:function(e,r,a){e=e._reactInternals;var l=oi(),d=xs(l);d.tag=1,d.payload=r,a!=null&&(d.callback=a),r=br(e,d,l),r!==null&&(li(r,e,l),Ds(r,e,l))},enqueueForceUpdate:function(e,r){e=e._reactInternals;var a=oi(),l=xs(a);l.tag=2,r!=null&&(l.callback=r),r=br(e,l,a),r!==null&&(li(r,e,a),Ds(r,e,a))}};function V_(e,r,a,l,d,g,b){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,g,b):r.prototype&&r.prototype.isPureReactComponent?!bs(a,l)||!bs(d,g):!0}function P_(e,r,a,l){e=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==e&&Sm.enqueueReplaceState(r,r.state,null)}function Rl(e,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(e=e.defaultProps){a===r&&(a=S({},a));for(var d in e)a[d]===void 0&&(a[d]=e[d])}return a}var ph=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function U_(e){ph(e)}function k_(e){console.error(e)}function L_(e){ph(e)}function gh(e,r){try{var a=e.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function B_(e,r,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(d){setTimeout(function(){throw d})}}function Rm(e,r,a){return a=xs(a),a.tag=3,a.payload={element:null},a.callback=function(){gh(e,r)},a}function j_(e){return e=xs(e),e.tag=3,e}function z_(e,r,a,l){var d=a.type.getDerivedStateFromError;if(typeof d=="function"){var g=l.value;e.payload=function(){return d(g)},e.callback=function(){B_(r,a,l)}}var b=a.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(e.callback=function(){B_(r,a,l),typeof d!="function"&&(vo===null?vo=new Set([this]):vo.add(this));var R=l.stack;this.componentDidCatch(l.value,{componentStack:R!==null?R:""})})}function R1(e,r,a,l,d){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&Is(r,a,d,!0),a=xi.current,a!==null){switch(a.tag){case 13:return Ns===null?Xm():a.alternate===null&&tn===0&&(tn=3),a.flags&=-257,a.flags|=65536,a.lanes=d,l===Sc?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),Jm(e,l,d)),!1;case 22:return a.flags|=65536,l===Sc?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),Jm(e,l,d)),!1}throw Error(i(435,a.tag))}return Jm(e,l,d),Xm(),!1}if(fe)return r=xi.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=d,l!==Tc&&(e=Error(i(422),{cause:l}),ns(or(e,a)))):(l!==Tc&&(r=Error(i(423),{cause:l}),ns(or(r,a))),e=e.current.alternate,e.flags|=65536,d&=-d,e.lanes|=d,l=or(l,a),d=Rm(e.stateNode,l,d),Tl(e,d),tn!==4&&(tn=2)),!1;var g=Error(i(520),{cause:l});if(g=or(g,a),jc===null?jc=[g]:jc.push(g),tn!==4&&(tn=2),r===null)return!0;l=or(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,e=d&-d,a.lanes|=e,e=Rm(a.stateNode,l,e),Tl(a,e),!1;case 1:if(r=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(vo===null||!vo.has(g))))return a.flags|=65536,d&=-d,a.lanes|=d,d=j_(d),z_(d,e,a,l),Tl(a,d),!1}a=a.return}while(a!==null);return!1}var q_=Error(i(461)),Bn=!1;function Qn(e,r,a,l){r.child=e===null?N_(r,null,a,l):bu(r,e.child,a,l)}function H_(e,r,a,l,d){a=a.render;var g=r.ref;if("ref"in l){var b={};for(var R in l)R!=="ref"&&(b[R]=l[R])}else b=l;return Ra(r),l=v(e,r,a,b,g,d),R=k(),e!==null&&!Bn?(Y(e,r,d),Ma(e,r,d)):(fe&&R&&cl(r),r.flags|=1,Qn(e,r,l,d),r.child)}function F_(e,r,a,l,d){if(e===null){var g=a.type;return typeof g=="function"&&!io(g)&&g.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=g,$_(e,r,g,l,d)):(e=Ji(a.type,null,l,r,r.mode,d),e.ref=r.ref,e.return=r,r.child=e)}if(g=e.child,!Vm(e,d)){var b=g.memoizedProps;if(a=a.compare,a=a!==null?a:bs,a(b,l)&&e.ref===r.ref)return Ma(e,r,d)}return r.flags|=1,e=ur(g,l),e.ref=r.ref,e.return=r,r.child=e}function $_(e,r,a,l,d){if(e!==null){var g=e.memoizedProps;if(bs(g,l)&&e.ref===r.ref)if(Bn=!1,r.pendingProps=l=g,Vm(e,d))(e.flags&131072)!==0&&(Bn=!0);else return r.lanes=e.lanes,Ma(e,r,d)}return Im(e,r,a,l,d)}function G_(e,r,a){var l=r.pendingProps,d=l.children,g=e!==null?e.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=g!==null?g.baseLanes|a:a,e!==null){for(d=r.child=e.child,g=0;d!==null;)g=g|d.lanes|d.childLanes,d=d.sibling;r.childLanes=g&~l}else r.childLanes=0,r.child=null;return Q_(e,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},e!==null&&_l(r,g!==null?g.cachePool:null),g!==null?un(r,g):Cc(),M_(r);else return r.lanes=r.childLanes=536870912,Q_(e,r,g!==null?g.baseLanes|a:a,a)}else g!==null?(_l(r,g.cachePool),un(r,g),ho(),r.memoizedState=null):(e!==null&&_l(r,null),Cc(),ho());return Qn(e,r,d,a),r.child}function Q_(e,r,a,l){var d=yl();return d=d===null?null:{parent:ln._currentValue,pool:d},r.memoizedState={baseLanes:a,cachePool:d},e!==null&&_l(r,null),Cc(),M_(r),e!==null&&Is(e,r,l,!0),null}function yh(e,r){var a=r.ref;if(a===null)e!==null&&e.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(e===null||e.ref!==a)&&(r.flags|=4194816)}}function Im(e,r,a,l,d){return Ra(r),a=v(e,r,a,l,void 0,d),l=k(),e!==null&&!Bn?(Y(e,r,d),Ma(e,r,d)):(fe&&l&&cl(r),r.flags|=1,Qn(e,r,a,d),r.child)}function Y_(e,r,a,l,d,g){return Ra(r),r.updateQueue=null,a=C(r,l,a,d),A(e),l=k(),e!==null&&!Bn?(Y(e,r,g),Ma(e,r,g)):(fe&&l&&cl(r),r.flags|=1,Qn(e,r,a,g),r.child)}function K_(e,r,a,l,d){if(Ra(r),r.stateNode===null){var g=ro,b=a.contextType;typeof b=="object"&&b!==null&&(g=Ln(b)),g=new a(l,g),r.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Sm,r.stateNode=g,g._reactInternals=r,g=r.stateNode,g.props=l,g.state=r.memoizedState,g.refs={},Rc(r),b=a.contextType,g.context=typeof b=="object"&&b!==null?Ln(b):ro,g.state=r.memoizedState,b=a.getDerivedStateFromProps,typeof b=="function"&&(Am(r,a,b,l),g.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&Sm.enqueueReplaceState(g,g.state,null),bl(r,l,g,d),wl(),g.state=r.memoizedState),typeof g.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(e===null){g=r.stateNode;var R=r.memoizedProps,U=Rl(a,R);g.props=U;var X=g.context,st=a.contextType;b=ro,typeof st=="object"&&st!==null&&(b=Ln(st));var lt=a.getDerivedStateFromProps;st=typeof lt=="function"||typeof g.getSnapshotBeforeUpdate=="function",R=r.pendingProps!==R,st||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(R||X!==b)&&P_(r,g,l,b),Cs=!1;var W=r.memoizedState;g.state=W,bl(r,l,g,d),wl(),X=r.memoizedState,R||W!==X||Cs?(typeof lt=="function"&&(Am(r,a,lt,l),X=r.memoizedState),(U=Cs||V_(r,a,U,l,W,X,b))?(st||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(r.flags|=4194308)):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=X),g.props=l,g.state=X,g.context=b,l=U):(typeof g.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{g=r.stateNode,Wt(e,r),b=r.memoizedProps,st=Rl(a,b),g.props=st,lt=r.pendingProps,W=g.context,X=a.contextType,U=ro,typeof X=="object"&&X!==null&&(U=Ln(X)),R=a.getDerivedStateFromProps,(X=typeof R=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==lt||W!==U)&&P_(r,g,l,U),Cs=!1,W=r.memoizedState,g.state=W,bl(r,l,g,d),wl();var et=r.memoizedState;b!==lt||W!==et||Cs||e!==null&&e.dependencies!==null&&dl(e.dependencies)?(typeof R=="function"&&(Am(r,a,R,l),et=r.memoizedState),(st=Cs||V_(r,a,st,l,W,et,U)||e!==null&&e.dependencies!==null&&dl(e.dependencies))?(X||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(l,et,U),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(l,et,U)),typeof g.componentDidUpdate=="function"&&(r.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&W===e.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&W===e.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=et),g.props=l,g.state=et,g.context=U,l=st):(typeof g.componentDidUpdate!="function"||b===e.memoizedProps&&W===e.memoizedState||(r.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===e.memoizedProps&&W===e.memoizedState||(r.flags|=1024),l=!1)}return g=l,yh(e,r),l=(r.flags&128)!==0,g||l?(g=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:g.render(),r.flags|=1,e!==null&&l?(r.child=bu(r,e.child,null,d),r.child=bu(r,null,a,d)):Qn(e,r,a,d),r.memoizedState=g.state,e=r.child):e=Ma(e,r,d),e}function X_(e,r,a,l){return Rs(),r.flags|=256,Qn(e,r,a,l),r.child}var Cm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function xm(e){return{baseLanes:e,cachePool:xa()}}function Dm(e,r,a){return e=e!==null?e.childLanes&~a:0,r&&(e|=Di),e}function Z_(e,r,a){var l=r.pendingProps,d=!1,g=(r.flags&128)!==0,b;if((b=g)||(b=e!==null&&e.memoizedState===null?!1:(Rn.current&2)!==0),b&&(d=!0,r.flags&=-129),b=(r.flags&32)!==0,r.flags&=-33,e===null){if(fe){if(d?fo(r):ho(),fe){var R=Le,U;if(U=R){t:{for(U=R,R=wr;U.nodeType!==8;){if(!R){R=null;break t}if(U=ls(U.nextSibling),U===null){R=null;break t}}R=U}R!==null?(r.memoizedState={dehydrated:R,treeContext:Si!==null?{id:fr,overflow:Ur}:null,retryLane:536870912,hydrationErrors:null},U=Un(18,null,null,0),U.stateNode=R,U.return=r,r.child=U,Sn=r,Le=null,U=!0):U=!1}U||Sa(r)}if(R=r.memoizedState,R!==null&&(R=R.dehydrated,R!==null))return dp(R)?r.lanes=32:r.lanes=536870912,null;Na(r)}return R=l.children,l=l.fallback,d?(ho(),d=r.mode,R=_h({mode:"hidden",children:R},d),l=Wi(l,d,a,null),R.return=r,l.return=r,R.sibling=l,r.child=R,d=r.child,d.memoizedState=xm(a),d.childLanes=Dm(e,b,a),r.memoizedState=Cm,l):(fo(r),Om(r,R))}if(U=e.memoizedState,U!==null&&(R=U.dehydrated,R!==null)){if(g)r.flags&256?(fo(r),r.flags&=-257,r=Nm(e,r,a)):r.memoizedState!==null?(ho(),r.child=e.child,r.flags|=128,r=null):(ho(),d=l.fallback,R=r.mode,l=_h({mode:"visible",children:l.children},R),d=Wi(d,R,a,null),d.flags|=2,l.return=r,d.return=r,l.sibling=d,r.child=l,bu(r,e.child,null,a),l=r.child,l.memoizedState=xm(a),l.childLanes=Dm(e,b,a),r.memoizedState=Cm,r=d);else if(fo(r),dp(R)){if(b=R.nextSibling&&R.nextSibling.dataset,b)var X=b.dgst;b=X,l=Error(i(419)),l.stack="",l.digest=b,ns({value:l,source:null,stack:null}),r=Nm(e,r,a)}else if(Bn||Is(e,r,a,!1),b=(a&e.childLanes)!==0,Bn||b){if(b=Pe,b!==null&&(l=a&-a,l=(l&42)!==0?1:gs(l),l=(l&(b.suspendedLanes|a))!==0?0:l,l!==0&&l!==U.retryLane))throw U.retryLane=l,no(e,l),li(b,e,l),q_;R.data==="$?"||Xm(),r=Nm(e,r,a)}else R.data==="$?"?(r.flags|=192,r.child=e.child,r=null):(e=U.treeContext,Le=ls(R.nextSibling),Sn=r,fe=!0,es=null,wr=!1,e!==null&&(kn[cr++]=fr,kn[cr++]=Ur,kn[cr++]=Si,fr=e.id,Ur=e.overflow,Si=r),r=Om(r,l.children),r.flags|=4096);return r}return d?(ho(),d=l.fallback,R=r.mode,U=e.child,X=U.sibling,l=ur(U,{mode:"hidden",children:l.children}),l.subtreeFlags=U.subtreeFlags&65011712,X!==null?d=ur(X,d):(d=Wi(d,R,a,null),d.flags|=2),d.return=r,l.return=r,l.sibling=d,r.child=l,l=d,d=r.child,R=e.child.memoizedState,R===null?R=xm(a):(U=R.cachePool,U!==null?(X=ln._currentValue,U=U.parent!==X?{parent:X,pool:X}:U):U=xa(),R={baseLanes:R.baseLanes|a,cachePool:U}),d.memoizedState=R,d.childLanes=Dm(e,b,a),r.memoizedState=Cm,l):(fo(r),a=e.child,e=a.sibling,a=ur(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,e!==null&&(b=r.deletions,b===null?(r.deletions=[e],r.flags|=16):b.push(e)),r.child=a,r.memoizedState=null,a)}function Om(e,r){return r=_h({mode:"visible",children:r},e.mode),r.return=e,e.child=r}function _h(e,r){return e=Un(22,e,null,r),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Nm(e,r,a){return bu(r,e.child,null,a),e=Om(r,r.pendingProps.children),e.flags|=2,r.memoizedState=null,e}function J_(e,r,a){e.lanes|=r;var l=e.alternate;l!==null&&(l.lanes|=r),hl(e.return,r,a)}function Mm(e,r,a,l,d){var g=e.memoizedState;g===null?e.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=l,g.tail=a,g.tailMode=d)}function W_(e,r,a){var l=r.pendingProps,d=l.revealOrder,g=l.tail;if(Qn(e,r,l.children,a),l=Rn.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(e!==null&&(e.flags&128)!==0)t:for(e=r.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&J_(e,a,r);else if(e.tag===19)J_(e,a,r);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===r)break t;for(;e.sibling===null;){if(e.return===null||e.return===r)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}l&=1}switch(gt(Rn,l),d){case"forwards":for(a=r.child,d=null;a!==null;)e=a.alternate,e!==null&&mh(e)===null&&(d=a),a=a.sibling;a=d,a===null?(d=r.child,r.child=null):(d=a.sibling,a.sibling=null),Mm(r,!1,d,a,g);break;case"backwards":for(a=null,d=r.child,r.child=null;d!==null;){if(e=d.alternate,e!==null&&mh(e)===null){r.child=d;break}e=d.sibling,d.sibling=a,a=d,d=e}Mm(r,!0,a,null,g);break;case"together":Mm(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Ma(e,r,a){if(e!==null&&(r.dependencies=e.dependencies),_o|=r.lanes,(a&r.childLanes)===0)if(e!==null){if(Is(e,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(e!==null&&r.child!==e.child)throw Error(i(153));if(r.child!==null){for(e=r.child,a=ur(e,e.pendingProps),r.child=a,a.return=r;e.sibling!==null;)e=e.sibling,a=a.sibling=ur(e,e.pendingProps),a.return=r;a.sibling=null}return r.child}function Vm(e,r){return(e.lanes&r)!==0?!0:(e=e.dependencies,!!(e!==null&&dl(e)))}function I1(e,r,a){switch(r.tag){case 3:Ee(r,r.stateNode.containerInfo),is(r,ln,e.memoizedState.cache),Rs();break;case 27:case 5:Sr(r);break;case 4:Ee(r,r.stateNode.containerInfo);break;case 10:is(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(fo(r),r.flags|=128,null):(a&r.child.childLanes)!==0?Z_(e,r,a):(fo(r),e=Ma(e,r,a),e!==null?e.sibling:null);fo(r);break;case 19:var d=(e.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(Is(e,r,a,!1),l=(a&r.childLanes)!==0),d){if(l)return W_(e,r,a);r.flags|=128}if(d=r.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),gt(Rn,Rn.current),l)break;return null;case 22:case 23:return r.lanes=0,G_(e,r,a);case 24:is(r,ln,e.memoizedState.cache)}return Ma(e,r,a)}function tv(e,r,a){if(e!==null)if(e.memoizedProps!==r.pendingProps)Bn=!0;else{if(!Vm(e,a)&&(r.flags&128)===0)return Bn=!1,I1(e,r,a);Bn=(e.flags&131072)!==0}else Bn=!1,fe&&(r.flags&1048576)!==0&&Tr(r,Aa,r.index);switch(r.lanes=0,r.tag){case 16:t:{e=r.pendingProps;var l=r.elementType,d=l._init;if(l=d(l._payload),r.type=l,typeof l=="function")io(l)?(e=Rl(l,e),r.tag=1,r=K_(null,r,l,e,a)):(r.tag=0,r=Im(null,r,l,e,a));else{if(l!=null){if(d=l.$$typeof,d===Et){r.tag=11,r=H_(null,r,l,e,a);break t}else if(d===z){r.tag=14,r=F_(null,r,l,e,a);break t}}throw r=He(l)||l,Error(i(306,r,""))}}return r;case 0:return Im(e,r,r.type,r.pendingProps,a);case 1:return l=r.type,d=Rl(l,r.pendingProps),K_(e,r,l,d,a);case 3:t:{if(Ee(r,r.stateNode.containerInfo),e===null)throw Error(i(387));l=r.pendingProps;var g=r.memoizedState;d=g.element,Wt(e,r),bl(r,l,null,a);var b=r.memoizedState;if(l=b.cache,is(r,ln,l),l!==g.cache&&mu(r,[ln],a,!0),wl(),l=b.element,g.isDehydrated)if(g={element:l,isDehydrated:!1,cache:b.cache},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){r=X_(e,r,l,a);break t}else if(l!==d){d=or(Error(i(424)),r),ns(d),r=X_(e,r,l,a);break t}else{switch(e=r.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Le=ls(e.firstChild),Sn=r,fe=!0,es=null,wr=!0,a=N_(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(Rs(),l===d){r=Ma(e,r,a);break t}Qn(e,r,l,a)}r=r.child}return r;case 26:return yh(e,r),e===null?(a=i0(r.type,null,r.pendingProps,null))?r.memoizedState=a:fe||(a=r.type,e=r.pendingProps,l=Nh(Ut.current).createElement(a),l[nn]=r,l[Ye]=e,Kn(l,a,e),Gt(l),r.stateNode=l):r.memoizedState=i0(r.type,e.memoizedProps,r.pendingProps,e.memoizedState),null;case 27:return Sr(r),e===null&&fe&&(l=r.stateNode=e0(r.type,r.pendingProps,Ut.current),Sn=r,wr=!0,d=Le,wo(r.type)?(mp=d,Le=ls(l.firstChild)):Le=d),Qn(e,r,r.pendingProps.children,a),yh(e,r),e===null&&(r.flags|=4194304),r.child;case 5:return e===null&&fe&&((d=l=Le)&&(l=eS(l,r.type,r.pendingProps,wr),l!==null?(r.stateNode=l,Sn=r,Le=ls(l.firstChild),wr=!1,d=!0):d=!1),d||Sa(r)),Sr(r),d=r.type,g=r.pendingProps,b=e!==null?e.memoizedProps:null,l=g.children,cp(d,g)?l=null:b!==null&&cp(d,b)&&(r.flags|=32),r.memoizedState!==null&&(d=v(e,r,j,null,null,a),Kc._currentValue=d),yh(e,r),Qn(e,r,l,a),r.child;case 6:return e===null&&fe&&((e=a=Le)&&(a=nS(a,r.pendingProps,wr),a!==null?(r.stateNode=a,Sn=r,Le=null,e=!0):e=!1),e||Sa(r)),null;case 13:return Z_(e,r,a);case 4:return Ee(r,r.stateNode.containerInfo),l=r.pendingProps,e===null?r.child=bu(r,null,l,a):Qn(e,r,l,a),r.child;case 11:return H_(e,r,r.type,r.pendingProps,a);case 7:return Qn(e,r,r.pendingProps,a),r.child;case 8:return Qn(e,r,r.pendingProps.children,a),r.child;case 12:return Qn(e,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,is(r,r.type,l.value),Qn(e,r,l.children,a),r.child;case 9:return d=r.type._context,l=r.pendingProps.children,Ra(r),d=Ln(d),l=l(d),r.flags|=1,Qn(e,r,l,a),r.child;case 14:return F_(e,r,r.type,r.pendingProps,a);case 15:return $_(e,r,r.type,r.pendingProps,a);case 19:return W_(e,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},e===null?(a=_h(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=ur(e.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return G_(e,r,a);case 24:return Ra(r),l=Ln(ln),e===null?(d=yl(),d===null&&(d=Pe,g=Ac(),d.pooledCache=g,g.refCount++,g!==null&&(d.pooledCacheLanes|=a),d=g),r.memoizedState={parent:l,cache:d},Rc(r),is(r,ln,d)):((e.lanes&a)!==0&&(Wt(e,r),bl(r,null,null,a),wl()),d=e.memoizedState,g=r.memoizedState,d.parent!==l?(d={parent:l,cache:l},r.memoizedState=d,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=d),is(r,ln,l)):(l=g.cache,is(r,ln,l),l!==d.cache&&mu(r,[ln],a,!0))),Qn(e,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(i(156,r.tag))}function Va(e){e.flags|=4}function ev(e,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!u0(r)){if(r=xi.current,r!==null&&((he&4194048)===he?Ns!==null:(he&62914560)!==he&&(he&536870912)===0||r!==Ns))throw El=Sc,eh;e.flags|=8192}}function vh(e,r){r!==null&&(e.flags|=4),e.flags&16384&&(r=e.tag!==22?ps():536870912,e.lanes|=r,Iu|=r)}function Vc(e,r){if(!fe)switch(e.tailMode){case"hidden":r=e.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function Ge(e){var r=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(r)for(var d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags&65011712,l|=d.flags&65011712,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)a|=d.lanes|d.childLanes,l|=d.subtreeFlags,l|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=l,e.childLanes=a,r}function C1(e,r,a){var l=r.pendingProps;switch(fl(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(r),null;case 1:return Ge(r),null;case 3:return a=r.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),Ii(ln),Dn(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ss(r)?Va(r):e===null||e.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Ri())),Ge(r),null;case 26:return a=r.memoizedState,e===null?(Va(r),a!==null?(Ge(r),ev(r,a)):(Ge(r),r.flags&=-16777217)):a?a!==e.memoizedState?(Va(r),Ge(r),ev(r,a)):(Ge(r),r.flags&=-16777217):(e.memoizedProps!==l&&Va(r),Ge(r),r.flags&=-16777217),null;case 27:en(r),a=Ut.current;var d=r.type;if(e!==null&&r.stateNode!=null)e.memoizedProps!==l&&Va(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return Ge(r),null}e=xt.current,Ss(r)?wc(r):(e=e0(d,l,a),r.stateNode=e,Va(r))}return Ge(r),null;case 5:if(en(r),a=r.type,e!==null&&r.stateNode!=null)e.memoizedProps!==l&&Va(r);else{if(!l){if(r.stateNode===null)throw Error(i(166));return Ge(r),null}if(e=xt.current,Ss(r))wc(r);else{switch(d=Nh(Ut.current),e){case 1:e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":e=d.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":e=d.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":e=d.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof l.is=="string"?d.createElement("select",{is:l.is}):d.createElement("select"),l.multiple?e.multiple=!0:l.size&&(e.size=l.size);break;default:e=typeof l.is=="string"?d.createElement(a,{is:l.is}):d.createElement(a)}}e[nn]=r,e[Ye]=l;t:for(d=r.child;d!==null;){if(d.tag===5||d.tag===6)e.appendChild(d.stateNode);else if(d.tag!==4&&d.tag!==27&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===r)break t;for(;d.sibling===null;){if(d.return===null||d.return===r)break t;d=d.return}d.sibling.return=d.return,d=d.sibling}r.stateNode=e;t:switch(Kn(e,a,l),a){case"button":case"input":case"select":case"textarea":e=!!l.autoFocus;break t;case"img":e=!0;break t;default:e=!1}e&&Va(r)}}return Ge(r),r.flags&=-16777217,null;case 6:if(e&&r.stateNode!=null)e.memoizedProps!==l&&Va(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(i(166));if(e=Ut.current,Ss(r)){if(e=r.stateNode,a=r.memoizedProps,l=null,d=Sn,d!==null)switch(d.tag){case 27:case 5:l=d.memoizedProps}e[nn]=r,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||Yv(e.nodeValue,a)),e||Sa(r)}else e=Nh(e).createTextNode(l),e[nn]=r,r.stateNode=e}return Ge(r),null;case 13:if(l=r.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(d=Ss(r),l!==null&&l.dehydrated!==null){if(e===null){if(!d)throw Error(i(318));if(d=r.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(i(317));d[nn]=r}else Rs(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;Ge(r),d=!1}else d=Ri(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=d),d=!0;if(!d)return r.flags&256?(Na(r),r):(Na(r),null)}if(Na(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,e=e!==null&&e.memoizedState!==null,a){l=r.child,d=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(d=l.alternate.memoizedState.cachePool.pool);var g=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==d&&(l.flags|=2048)}return a!==e&&a&&(r.child.flags|=8192),vh(r,r.updateQueue),Ge(r),null;case 4:return Dn(),e===null&&sp(r.stateNode.containerInfo),Ge(r),null;case 10:return Ii(r.type),Ge(r),null;case 19:if(yt(Rn),d=r.memoizedState,d===null)return Ge(r),null;if(l=(r.flags&128)!==0,g=d.rendering,g===null)if(l)Vc(d,!1);else{if(tn!==0||e!==null&&(e.flags&128)!==0)for(e=r.child;e!==null;){if(g=mh(e),g!==null){for(r.flags|=128,Vc(d,!1),e=g.updateQueue,r.updateQueue=e,vh(r,e),r.subtreeFlags=0,e=a,a=r.child;a!==null;)ba(a,e),a=a.sibling;return gt(Rn,Rn.current&1|2),r.child}e=e.sibling}d.tail!==null&&nr()>wh&&(r.flags|=128,l=!0,Vc(d,!1),r.lanes=4194304)}else{if(!l)if(e=mh(g),e!==null){if(r.flags|=128,l=!0,e=e.updateQueue,r.updateQueue=e,vh(r,e),Vc(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!fe)return Ge(r),null}else 2*nr()-d.renderingStartTime>wh&&a!==536870912&&(r.flags|=128,l=!0,Vc(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(e=d.last,e!==null?e.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=nr(),r.sibling=null,e=Rn.current,gt(Rn,l?e&1|2:e&1),r):(Ge(r),null);case 22:case 23:return Na(r),xc(),l=r.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(Ge(r),r.subtreeFlags&6&&(r.flags|=8192)):Ge(r),a=r.updateQueue,a!==null&&vh(r,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),e!==null&&yt(Ca),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),Ii(ln),Ge(r),null;case 25:return null;case 30:return null}throw Error(i(156,r.tag))}function x1(e,r){switch(fl(r),r.tag){case 1:return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 3:return Ii(ln),Dn(),e=r.flags,(e&65536)!==0&&(e&128)===0?(r.flags=e&-65537|128,r):null;case 26:case 27:case 5:return en(r),null;case 13:if(Na(r),e=r.memoizedState,e!==null&&e.dehydrated!==null){if(r.alternate===null)throw Error(i(340));Rs()}return e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 19:return yt(Rn),null;case 4:return Dn(),null;case 10:return Ii(r.type),null;case 22:case 23:return Na(r),xc(),e!==null&&yt(Ca),e=r.flags,e&65536?(r.flags=e&-65537|128,r):null;case 24:return Ii(ln),null;case 25:return null;default:return null}}function nv(e,r){switch(fl(r),r.tag){case 3:Ii(ln),Dn();break;case 26:case 27:case 5:en(r);break;case 4:Dn();break;case 13:Na(r);break;case 19:yt(Rn);break;case 10:Ii(r.type);break;case 22:case 23:Na(r),xc(),e!==null&&yt(Ca);break;case 24:Ii(ln)}}function Pc(e,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var d=l.next;a=d;do{if((a.tag&e)===e){l=void 0;var g=a.create,b=a.inst;l=g(),b.destroy=l}a=a.next}while(a!==d)}}catch(R){Ne(r,r.return,R)}}function mo(e,r,a){try{var l=r.updateQueue,d=l!==null?l.lastEffect:null;if(d!==null){var g=d.next;l=g;do{if((l.tag&e)===e){var b=l.inst,R=b.destroy;if(R!==void 0){b.destroy=void 0,d=r;var U=a,X=R;try{X()}catch(st){Ne(d,U,st)}}}l=l.next}while(l!==g)}}catch(st){Ne(r,r.return,st)}}function rv(e){var r=e.updateQueue;if(r!==null){var a=e.stateNode;try{ah(r,a)}catch(l){Ne(e,e.return,l)}}}function iv(e,r,a){a.props=Rl(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){Ne(e,r,l)}}function Uc(e,r){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(d){Ne(e,r,d)}}function Ms(e,r){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(d){Ne(e,r,d)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(d){Ne(e,r,d)}else a.current=null}function sv(e){var r=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(d){Ne(e,e.return,d)}}function Pm(e,r,a){try{var l=e.stateNode;X1(l,e.type,a,r),l[Ye]=r}catch(d){Ne(e,e.return,d)}}function av(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&wo(e.type)||e.tag===4}function Um(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||av(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&wo(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function km(e,r,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(e),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=Oh));else if(l!==4&&(l===27&&wo(e.type)&&(a=e.stateNode,r=null),e=e.child,e!==null))for(km(e,r,a),e=e.sibling;e!==null;)km(e,r,a),e=e.sibling}function Eh(e,r,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,r?a.insertBefore(e,r):a.appendChild(e);else if(l!==4&&(l===27&&wo(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Eh(e,r,a),e=e.sibling;e!==null;)Eh(e,r,a),e=e.sibling}function ov(e){var r=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,d=r.attributes;d.length;)r.removeAttributeNode(d[0]);Kn(r,l,a),r[nn]=e,r[Ye]=a}catch(g){Ne(e,e.return,g)}}var Pa=!1,fn=!1,Lm=!1,lv=typeof WeakSet=="function"?WeakSet:Set,jn=null;function D1(e,r){if(e=e.containerInfo,lp=Lh,e=Yi(e),Wa(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var d=l.anchorOffset,g=l.focusNode;l=l.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break t}var b=0,R=-1,U=-1,X=0,st=0,lt=e,W=null;e:for(;;){for(var et;lt!==a||d!==0&&lt.nodeType!==3||(R=b+d),lt!==g||l!==0&&lt.nodeType!==3||(U=b+l),lt.nodeType===3&&(b+=lt.nodeValue.length),(et=lt.firstChild)!==null;)W=lt,lt=et;for(;;){if(lt===e)break e;if(W===a&&++X===d&&(R=b),W===g&&++st===l&&(U=b),(et=lt.nextSibling)!==null)break;lt=W,W=lt.parentNode}lt=et}a=R===-1||U===-1?null:{start:R,end:U}}else a=null}a=a||{start:0,end:0}}else a=null;for(up={focusedElem:e,selectionRange:a},Lh=!1,jn=r;jn!==null;)if(r=jn,e=r.child,(r.subtreeFlags&1024)!==0&&e!==null)e.return=r,jn=e;else for(;jn!==null;){switch(r=jn,g=r.alternate,e=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,a=r,d=g.memoizedProps,g=g.memoizedState,l=a.stateNode;try{var Ht=Rl(a.type,d,a.elementType===a.type);e=l.getSnapshotBeforeUpdate(Ht,g),l.__reactInternalSnapshotBeforeUpdate=e}catch(kt){Ne(a,a.return,kt)}}break;case 3:if((e&1024)!==0){if(e=r.stateNode.containerInfo,a=e.nodeType,a===9)hp(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":hp(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=r.sibling,e!==null){e.return=r.return,jn=e;break}jn=r.return}}function uv(e,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:po(e,a),l&4&&Pc(5,a);break;case 1:if(po(e,a),l&4)if(e=a.stateNode,r===null)try{e.componentDidMount()}catch(b){Ne(a,a.return,b)}else{var d=Rl(a.type,r.memoizedProps);r=r.memoizedState;try{e.componentDidUpdate(d,r,e.__reactInternalSnapshotBeforeUpdate)}catch(b){Ne(a,a.return,b)}}l&64&&rv(a),l&512&&Uc(a,a.return);break;case 3:if(po(e,a),l&64&&(e=a.updateQueue,e!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{ah(e,r)}catch(b){Ne(a,a.return,b)}}break;case 27:r===null&&l&4&&ov(a);case 26:case 5:po(e,a),r===null&&l&4&&sv(a),l&512&&Uc(a,a.return);break;case 12:po(e,a);break;case 13:po(e,a),l&4&&hv(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=B1.bind(null,a),rS(e,a))));break;case 22:if(l=a.memoizedState!==null||Pa,!l){r=r!==null&&r.memoizedState!==null||fn,d=Pa;var g=fn;Pa=l,(fn=r)&&!g?go(e,a,(a.subtreeFlags&8772)!==0):po(e,a),Pa=d,fn=g}break;case 30:break;default:po(e,a)}}function cv(e){var r=e.alternate;r!==null&&(e.alternate=null,cv(r)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(r=e.stateNode,r!==null&&Fn(r)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var qe=null,Lr=!1;function Ua(e,r,a){for(a=a.child;a!==null;)fv(e,r,a),a=a.sibling}function fv(e,r,a){if(_e&&typeof _e.onCommitFiberUnmount=="function")try{_e.onCommitFiberUnmount(ze,a)}catch{}switch(a.tag){case 26:fn||Ms(a,r),Ua(e,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:fn||Ms(a,r);var l=qe,d=Lr;wo(a.type)&&(qe=a.stateNode,Lr=!1),Ua(e,r,a),$c(a.stateNode),qe=l,Lr=d;break;case 5:fn||Ms(a,r);case 6:if(l=qe,d=Lr,qe=null,Ua(e,r,a),qe=l,Lr=d,qe!==null)if(Lr)try{(qe.nodeType===9?qe.body:qe.nodeName==="HTML"?qe.ownerDocument.body:qe).removeChild(a.stateNode)}catch(g){Ne(a,r,g)}else try{qe.removeChild(a.stateNode)}catch(g){Ne(a,r,g)}break;case 18:qe!==null&&(Lr?(e=qe,Wv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),Wc(e)):Wv(qe,a.stateNode));break;case 4:l=qe,d=Lr,qe=a.stateNode.containerInfo,Lr=!0,Ua(e,r,a),qe=l,Lr=d;break;case 0:case 11:case 14:case 15:fn||mo(2,a,r),fn||mo(4,a,r),Ua(e,r,a);break;case 1:fn||(Ms(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&iv(a,r,l)),Ua(e,r,a);break;case 21:Ua(e,r,a);break;case 22:fn=(l=fn)||a.memoizedState!==null,Ua(e,r,a),fn=l;break;default:Ua(e,r,a)}}function hv(e,r){if(r.memoizedState===null&&(e=r.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Wc(e)}catch(a){Ne(r,r.return,a)}}function O1(e){switch(e.tag){case 13:case 19:var r=e.stateNode;return r===null&&(r=e.stateNode=new lv),r;case 22:return e=e.stateNode,r=e._retryCache,r===null&&(r=e._retryCache=new lv),r;default:throw Error(i(435,e.tag))}}function Bm(e,r){var a=O1(e);r.forEach(function(l){var d=j1.bind(null,e,l);a.has(l)||(a.add(l),l.then(d,d))})}function ii(e,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var d=a[l],g=e,b=r,R=b;t:for(;R!==null;){switch(R.tag){case 27:if(wo(R.type)){qe=R.stateNode,Lr=!1;break t}break;case 5:qe=R.stateNode,Lr=!1;break t;case 3:case 4:qe=R.stateNode.containerInfo,Lr=!0;break t}R=R.return}if(qe===null)throw Error(i(160));fv(g,b,d),qe=null,Lr=!1,g=d.alternate,g!==null&&(g.return=null),d.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)dv(r,e),r=r.sibling}var os=null;function dv(e,r){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:ii(r,e),si(e),l&4&&(mo(3,e,e.return),Pc(3,e),mo(5,e,e.return));break;case 1:ii(r,e),si(e),l&512&&(fn||a===null||Ms(a,a.return)),l&64&&Pa&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var d=os;if(ii(r,e),si(e),l&512&&(fn||a===null||Ms(a,a.return)),l&4){var g=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,d=d.ownerDocument||d;e:switch(l){case"title":g=d.getElementsByTagName("title")[0],(!g||g[ea]||g[nn]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=d.createElement(l),d.head.insertBefore(g,d.querySelector("head > title"))),Kn(g,l,a),g[nn]=e,Gt(g),l=g;break t;case"link":var b=o0("link","href",d).get(l+(a.href||""));if(b){for(var R=0;R<b.length;R++)if(g=b[R],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){b.splice(R,1);break e}}g=d.createElement(l),Kn(g,l,a),d.head.appendChild(g);break;case"meta":if(b=o0("meta","content",d).get(l+(a.content||""))){for(R=0;R<b.length;R++)if(g=b[R],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){b.splice(R,1);break e}}g=d.createElement(l),Kn(g,l,a),d.head.appendChild(g);break;default:throw Error(i(468,l))}g[nn]=e,Gt(g),l=g}e.stateNode=l}else l0(d,e.type,e.stateNode);else e.stateNode=a0(d,l,e.memoizedProps);else g!==l?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,l===null?l0(d,e.type,e.stateNode):a0(d,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Pm(e,e.memoizedProps,a.memoizedProps)}break;case 27:ii(r,e),si(e),l&512&&(fn||a===null||Ms(a,a.return)),a!==null&&l&4&&Pm(e,e.memoizedProps,a.memoizedProps);break;case 5:if(ii(r,e),si(e),l&512&&(fn||a===null||Ms(a,a.return)),e.flags&32){d=e.stateNode;try{Vn(d,"")}catch(et){Ne(e,e.return,et)}}l&4&&e.stateNode!=null&&(d=e.memoizedProps,Pm(e,d,a!==null?a.memoizedProps:d)),l&1024&&(Lm=!0);break;case 6:if(ii(r,e),si(e),l&4){if(e.stateNode===null)throw Error(i(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(et){Ne(e,e.return,et)}}break;case 3:if(Ph=null,d=os,os=Mh(r.containerInfo),ii(r,e),os=d,si(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Wc(r.containerInfo)}catch(et){Ne(e,e.return,et)}Lm&&(Lm=!1,mv(e));break;case 4:l=os,os=Mh(e.stateNode.containerInfo),ii(r,e),si(e),os=l;break;case 12:ii(r,e),si(e);break;case 13:ii(r,e),si(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&($m=nr()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Bm(e,l)));break;case 22:d=e.memoizedState!==null;var U=a!==null&&a.memoizedState!==null,X=Pa,st=fn;if(Pa=X||d,fn=st||U,ii(r,e),fn=st,Pa=X,si(e),l&8192)t:for(r=e.stateNode,r._visibility=d?r._visibility&-2:r._visibility|1,d&&(a===null||U||Pa||fn||Il(e)),a=null,r=e;;){if(r.tag===5||r.tag===26){if(a===null){U=a=r;try{if(g=U.stateNode,d)b=g.style,typeof b.setProperty=="function"?b.setProperty("display","none","important"):b.display="none";else{R=U.stateNode;var lt=U.memoizedProps.style,W=lt!=null&&lt.hasOwnProperty("display")?lt.display:null;R.style.display=W==null||typeof W=="boolean"?"":(""+W).trim()}}catch(et){Ne(U,U.return,et)}}}else if(r.tag===6){if(a===null){U=r;try{U.stateNode.nodeValue=d?"":U.memoizedProps}catch(et){Ne(U,U.return,et)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===e)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break t;for(;r.sibling===null;){if(r.return===null||r.return===e)break t;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Bm(e,a))));break;case 19:ii(r,e),si(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,Bm(e,l)));break;case 30:break;case 21:break;default:ii(r,e),si(e)}}function si(e){var r=e.flags;if(r&2){try{for(var a,l=e.return;l!==null;){if(av(l)){a=l;break}l=l.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var d=a.stateNode,g=Um(e);Eh(e,g,d);break;case 5:var b=a.stateNode;a.flags&32&&(Vn(b,""),a.flags&=-33);var R=Um(e);Eh(e,R,b);break;case 3:case 4:var U=a.stateNode.containerInfo,X=Um(e);km(e,X,U);break;default:throw Error(i(161))}}catch(st){Ne(e,e.return,st)}e.flags&=-3}r&4096&&(e.flags&=-4097)}function mv(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var r=e;mv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),e=e.sibling}}function po(e,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)uv(e,r.alternate,r),r=r.sibling}function Il(e){for(e=e.child;e!==null;){var r=e;switch(r.tag){case 0:case 11:case 14:case 15:mo(4,r,r.return),Il(r);break;case 1:Ms(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&iv(r,r.return,a),Il(r);break;case 27:$c(r.stateNode);case 26:case 5:Ms(r,r.return),Il(r);break;case 22:r.memoizedState===null&&Il(r);break;case 30:Il(r);break;default:Il(r)}e=e.sibling}}function go(e,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,d=e,g=r,b=g.flags;switch(g.tag){case 0:case 11:case 15:go(d,g,a),Pc(4,g);break;case 1:if(go(d,g,a),l=g,d=l.stateNode,typeof d.componentDidMount=="function")try{d.componentDidMount()}catch(X){Ne(l,l.return,X)}if(l=g,d=l.updateQueue,d!==null){var R=l.stateNode;try{var U=d.shared.hiddenCallbacks;if(U!==null)for(d.shared.hiddenCallbacks=null,d=0;d<U.length;d++)sh(U[d],R)}catch(X){Ne(l,l.return,X)}}a&&b&64&&rv(g),Uc(g,g.return);break;case 27:ov(g);case 26:case 5:go(d,g,a),a&&l===null&&b&4&&sv(g),Uc(g,g.return);break;case 12:go(d,g,a);break;case 13:go(d,g,a),a&&b&4&&hv(d,g);break;case 22:g.memoizedState===null&&go(d,g,a),Uc(g,g.return);break;case 30:break;default:go(d,g,a)}r=r.sibling}}function jm(e,r){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(e=r.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&ml(a))}function zm(e,r){e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&ml(e))}function Vs(e,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)pv(e,r,a,l),r=r.sibling}function pv(e,r,a,l){var d=r.flags;switch(r.tag){case 0:case 11:case 15:Vs(e,r,a,l),d&2048&&Pc(9,r);break;case 1:Vs(e,r,a,l);break;case 3:Vs(e,r,a,l),d&2048&&(e=null,r.alternate!==null&&(e=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==e&&(r.refCount++,e!=null&&ml(e)));break;case 12:if(d&2048){Vs(e,r,a,l),e=r.stateNode;try{var g=r.memoizedProps,b=g.id,R=g.onPostCommit;typeof R=="function"&&R(b,r.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(U){Ne(r,r.return,U)}}else Vs(e,r,a,l);break;case 13:Vs(e,r,a,l);break;case 23:break;case 22:g=r.stateNode,b=r.alternate,r.memoizedState!==null?g._visibility&2?Vs(e,r,a,l):kc(e,r):g._visibility&2?Vs(e,r,a,l):(g._visibility|=2,Au(e,r,a,l,(r.subtreeFlags&10256)!==0)),d&2048&&jm(b,r);break;case 24:Vs(e,r,a,l),d&2048&&zm(r.alternate,r);break;default:Vs(e,r,a,l)}}function Au(e,r,a,l,d){for(d=d&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var g=e,b=r,R=a,U=l,X=b.flags;switch(b.tag){case 0:case 11:case 15:Au(g,b,R,U,d),Pc(8,b);break;case 23:break;case 22:var st=b.stateNode;b.memoizedState!==null?st._visibility&2?Au(g,b,R,U,d):kc(g,b):(st._visibility|=2,Au(g,b,R,U,d)),d&&X&2048&&jm(b.alternate,b);break;case 24:Au(g,b,R,U,d),d&&X&2048&&zm(b.alternate,b);break;default:Au(g,b,R,U,d)}r=r.sibling}}function kc(e,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=e,l=r,d=l.flags;switch(l.tag){case 22:kc(a,l),d&2048&&jm(l.alternate,l);break;case 24:kc(a,l),d&2048&&zm(l.alternate,l);break;default:kc(a,l)}r=r.sibling}}var Lc=8192;function Su(e){if(e.subtreeFlags&Lc)for(e=e.child;e!==null;)gv(e),e=e.sibling}function gv(e){switch(e.tag){case 26:Su(e),e.flags&Lc&&e.memoizedState!==null&&gS(os,e.memoizedState,e.memoizedProps);break;case 5:Su(e);break;case 3:case 4:var r=os;os=Mh(e.stateNode.containerInfo),Su(e),os=r;break;case 22:e.memoizedState===null&&(r=e.alternate,r!==null&&r.memoizedState!==null?(r=Lc,Lc=16777216,Su(e),Lc=r):Su(e));break;default:Su(e)}}function yv(e){var r=e.alternate;if(r!==null&&(e=r.child,e!==null)){r.child=null;do r=e.sibling,e.sibling=null,e=r;while(e!==null)}}function Bc(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];jn=l,vv(l,e)}yv(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)_v(e),e=e.sibling}function _v(e){switch(e.tag){case 0:case 11:case 15:Bc(e),e.flags&2048&&mo(9,e,e.return);break;case 3:Bc(e);break;case 12:Bc(e);break;case 22:var r=e.stateNode;e.memoizedState!==null&&r._visibility&2&&(e.return===null||e.return.tag!==13)?(r._visibility&=-3,Th(e)):Bc(e);break;default:Bc(e)}}function Th(e){var r=e.deletions;if((e.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];jn=l,vv(l,e)}yv(e)}for(e=e.child;e!==null;){switch(r=e,r.tag){case 0:case 11:case 15:mo(8,r,r.return),Th(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Th(r));break;default:Th(r)}e=e.sibling}}function vv(e,r){for(;jn!==null;){var a=jn;switch(a.tag){case 0:case 11:case 15:mo(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ml(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,jn=l;else t:for(a=e;jn!==null;){l=jn;var d=l.sibling,g=l.return;if(cv(l),l===a){jn=null;break t}if(d!==null){d.return=g,jn=d;break t}jn=g}}}var N1={getCacheForType:function(e){var r=Ln(ln),a=r.data.get(e);return a===void 0&&(a=e(),r.data.set(e,a)),a}},M1=typeof WeakMap=="function"?WeakMap:Map,Ie=0,Pe=null,se=null,he=0,Ce=0,ai=null,yo=!1,Ru=!1,qm=!1,ka=0,tn=0,_o=0,Cl=0,Hm=0,Di=0,Iu=0,jc=null,Br=null,Fm=!1,$m=0,wh=1/0,bh=null,vo=null,Yn=0,Eo=null,Cu=null,xu=0,Gm=0,Qm=null,Ev=null,zc=0,Ym=null;function oi(){if((Ie&2)!==0&&he!==0)return he&-he;if(rt.T!==null){var e=ao;return e!==0?e:ep()}return pe()}function Tv(){Di===0&&(Di=(he&536870912)===0||fe?Ko():536870912);var e=xi.current;return e!==null&&(e.flags|=32),Di}function li(e,r,a){(e===Pe&&(Ce===2||Ce===9)||e.cancelPendingCommit!==null)&&(Du(e,0),To(e,he,Di,!1)),Li(e,a),((Ie&2)===0||e!==Pe)&&(e===Pe&&((Ie&2)===0&&(Cl|=a),tn===4&&To(e,he,Di,!1)),Ps(e))}function wv(e,r,a){if((Ie&6)!==0)throw Error(i(327));var l=!a&&(r&124)===0&&(r&e.expiredLanes)===0||Js(e,r),d=l?U1(e,r):Zm(e,r,!0),g=l;do{if(d===0){Ru&&!l&&To(e,r,0,!1);break}else{if(a=e.current.alternate,g&&!V1(a)){d=Zm(e,r,!1),g=!1;continue}if(d===2){if(g=r,e.errorRecoveryDisabledLanes&g)var b=0;else b=e.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){r=b;t:{var R=e;d=jc;var U=R.current.memoizedState.isDehydrated;if(U&&(Du(R,b).flags|=256),b=Zm(R,b,!1),b!==2){if(qm&&!U){R.errorRecoveryDisabledLanes|=g,Cl|=g,d=4;break t}g=Br,Br=d,g!==null&&(Br===null?Br=g:Br.push.apply(Br,g))}d=b}if(g=!1,d!==2)continue}}if(d===1){Du(e,0),To(e,r,0,!0);break}t:{switch(l=e,g=d,g){case 0:case 1:throw Error(i(345));case 4:if((r&4194048)!==r)break;case 6:To(l,r,Di,!yo);break t;case 2:Br=null;break;case 3:case 5:break;default:throw Error(i(329))}if((r&62914560)===r&&(d=$m+300-nr(),10<d)){if(To(l,r,Di,!yo),Zs(l,0,!0)!==0)break t;l.timeoutHandle=Zv(bv.bind(null,l,a,Br,bh,Fm,r,Di,Cl,Iu,yo,g,2,-0,0),d);break t}bv(l,a,Br,bh,Fm,r,Di,Cl,Iu,yo,g,0,-0,0)}}break}while(!0);Ps(e)}function bv(e,r,a,l,d,g,b,R,U,X,st,lt,W,et){if(e.timeoutHandle=-1,lt=r.subtreeFlags,(lt&8192||(lt&16785408)===16785408)&&(Yc={stylesheets:null,count:0,unsuspend:pS},gv(r),lt=yS(),lt!==null)){e.cancelPendingCommit=lt(Dv.bind(null,e,r,g,a,l,d,b,R,U,st,1,W,et)),To(e,g,b,!X);return}Dv(e,r,g,a,l,d,b,R,U)}function V1(e){for(var r=e;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var d=a[l],g=d.getSnapshot;d=d.value;try{if(!ar(g(),d))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function To(e,r,a,l){r&=~Hm,r&=~Cl,e.suspendedLanes|=r,e.pingedLanes&=~r,l&&(e.warmLanes|=r),l=e.expirationTimes;for(var d=r;0<d;){var g=31-On(d),b=1<<g;l[g]=-1,d&=~b}a!==0&&di(e,a,r)}function Ah(){return(Ie&6)===0?(qc(0),!1):!0}function Km(){if(se!==null){if(Ce===0)var e=se.return;else e=se,ni=rs=null,it(e),wu=null,Nc=0,e=se;for(;e!==null;)nv(e.alternate,e),e=e.return;se=null}}function Du(e,r){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,J1(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),Km(),Pe=e,se=a=ur(e.current,null),he=r,Ce=0,ai=null,yo=!1,Ru=Js(e,r),qm=!1,Iu=Di=Hm=Cl=_o=tn=0,Br=jc=null,Fm=!1,(r&8)!==0&&(r|=r&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=r;0<l;){var d=31-On(l),g=1<<d;r|=e[d],l&=~g}return ka=r,fu(),a}function Av(e,r){Zt=null,rt.H=fh,r===oo||r===vl?(r=yu(),Ce=3):r===eh?(r=yu(),Ce=4):Ce=r===q_?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,ai=r,se===null&&(tn=1,gh(e,or(r,e.current)))}function Sv(){var e=rt.H;return rt.H=fh,e===null?fh:e}function Rv(){var e=rt.A;return rt.A=N1,e}function Xm(){tn=4,yo||(he&4194048)!==he&&xi.current!==null||(Ru=!0),(_o&134217727)===0&&(Cl&134217727)===0||Pe===null||To(Pe,he,Di,!1)}function Zm(e,r,a){var l=Ie;Ie|=2;var d=Sv(),g=Rv();(Pe!==e||he!==r)&&(bh=null,Du(e,r)),r=!1;var b=tn;t:do try{if(Ce!==0&&se!==null){var R=se,U=ai;switch(Ce){case 8:Km(),b=6;break t;case 3:case 2:case 9:case 6:xi.current===null&&(r=!0);var X=Ce;if(Ce=0,ai=null,Ou(e,R,U,X),a&&Ru){b=0;break t}break;default:X=Ce,Ce=0,ai=null,Ou(e,R,U,X)}}P1(),b=tn;break}catch(st){Av(e,st)}while(!0);return r&&e.shellSuspendCounter++,ni=rs=null,Ie=l,rt.H=d,rt.A=g,se===null&&(Pe=null,he=0,fu()),b}function P1(){for(;se!==null;)Iv(se)}function U1(e,r){var a=Ie;Ie|=2;var l=Sv(),d=Rv();Pe!==e||he!==r?(bh=null,wh=nr()+500,Du(e,r)):Ru=Js(e,r);t:do try{if(Ce!==0&&se!==null){r=se;var g=ai;e:switch(Ce){case 1:Ce=0,ai=null,Ou(e,r,g,1);break;case 2:case 9:if(nh(g)){Ce=0,ai=null,Cv(r);break}r=function(){Ce!==2&&Ce!==9||Pe!==e||(Ce=7),Ps(e)},g.then(r,r);break t;case 3:Ce=7;break t;case 4:Ce=5;break t;case 7:nh(g)?(Ce=0,ai=null,Cv(r)):(Ce=0,ai=null,Ou(e,r,g,7));break;case 5:var b=null;switch(se.tag){case 26:b=se.memoizedState;case 5:case 27:var R=se;if(!b||u0(b)){Ce=0,ai=null;var U=R.sibling;if(U!==null)se=U;else{var X=R.return;X!==null?(se=X,Sh(X)):se=null}break e}}Ce=0,ai=null,Ou(e,r,g,5);break;case 6:Ce=0,ai=null,Ou(e,r,g,6);break;case 8:Km(),tn=6;break t;default:throw Error(i(462))}}k1();break}catch(st){Av(e,st)}while(!0);return ni=rs=null,rt.H=l,rt.A=d,Ie=a,se!==null?0:(Pe=null,he=0,fu(),tn)}function k1(){for(;se!==null&&!Qs();)Iv(se)}function Iv(e){var r=tv(e.alternate,e,ka);e.memoizedProps=e.pendingProps,r===null?Sh(e):se=r}function Cv(e){var r=e,a=r.alternate;switch(r.tag){case 15:case 0:r=Y_(a,r,r.pendingProps,r.type,void 0,he);break;case 11:r=Y_(a,r,r.pendingProps,r.type.render,r.ref,he);break;case 5:it(r);default:nv(a,r),r=se=ba(r,ka),r=tv(a,r,ka)}e.memoizedProps=e.pendingProps,r===null?Sh(e):se=r}function Ou(e,r,a,l){ni=rs=null,it(r),wu=null,Nc=0;var d=r.return;try{if(R1(e,d,r,a,he)){tn=1,gh(e,or(a,e.current)),se=null;return}}catch(g){if(d!==null)throw se=d,g;tn=1,gh(e,or(a,e.current)),se=null;return}r.flags&32768?(fe||l===1?e=!0:Ru||(he&536870912)!==0?e=!1:(yo=e=!0,(l===2||l===9||l===3||l===6)&&(l=xi.current,l!==null&&l.tag===13&&(l.flags|=16384))),xv(r,e)):Sh(r)}function Sh(e){var r=e;do{if((r.flags&32768)!==0){xv(r,yo);return}e=r.return;var a=C1(r.alternate,r,ka);if(a!==null){se=a;return}if(r=r.sibling,r!==null){se=r;return}se=r=e}while(r!==null);tn===0&&(tn=5)}function xv(e,r){do{var a=x1(e.alternate,e);if(a!==null){a.flags&=32767,se=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(e=e.sibling,e!==null)){se=e;return}se=e=a}while(e!==null);tn=6,se=null}function Dv(e,r,a,l,d,g,b,R,U){e.cancelPendingCommit=null;do Rh();while(Yn!==0);if((Ie&6)!==0)throw Error(i(327));if(r!==null){if(r===e.current)throw Error(i(177));if(g=r.lanes|r.childLanes,g|=ul,Xo(e,a,g,b,R,U),e===Pe&&(se=Pe=null,he=0),Cu=r,Eo=e,xu=a,Gm=g,Qm=d,Ev=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,z1(ki,function(){return Pv(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=rt.T,rt.T=null,d=Tt.p,Tt.p=2,b=Ie,Ie|=4;try{D1(e,r,a)}finally{Ie=b,Tt.p=d,rt.T=l}}Yn=1,Ov(),Nv(),Mv()}}function Ov(){if(Yn===1){Yn=0;var e=Eo,r=Cu,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=rt.T,rt.T=null;var l=Tt.p;Tt.p=2;var d=Ie;Ie|=4;try{dv(r,e);var g=up,b=Yi(e.containerInfo),R=g.focusedElem,U=g.selectionRange;if(b!==R&&R&&R.ownerDocument&&ou(R.ownerDocument.documentElement,R)){if(U!==null&&Wa(R)){var X=U.start,st=U.end;if(st===void 0&&(st=X),"selectionStart"in R)R.selectionStart=X,R.selectionEnd=Math.min(st,R.value.length);else{var lt=R.ownerDocument||document,W=lt&&lt.defaultView||window;if(W.getSelection){var et=W.getSelection(),Ht=R.textContent.length,kt=Math.min(U.start,Ht),De=U.end===void 0?kt:Math.min(U.end,Ht);!et.extend&&kt>De&&(b=De,De=kt,kt=b);var G=mc(R,kt),H=mc(R,De);if(G&&H&&(et.rangeCount!==1||et.anchorNode!==G.node||et.anchorOffset!==G.offset||et.focusNode!==H.node||et.focusOffset!==H.offset)){var K=lt.createRange();K.setStart(G.node,G.offset),et.removeAllRanges(),kt>De?(et.addRange(K),et.extend(H.node,H.offset)):(K.setEnd(H.node,H.offset),et.addRange(K))}}}}for(lt=[],et=R;et=et.parentNode;)et.nodeType===1&&lt.push({element:et,left:et.scrollLeft,top:et.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<lt.length;R++){var at=lt[R];at.element.scrollLeft=at.left,at.element.scrollTop=at.top}}Lh=!!lp,up=lp=null}finally{Ie=d,Tt.p=l,rt.T=a}}e.current=r,Yn=2}}function Nv(){if(Yn===2){Yn=0;var e=Eo,r=Cu,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=rt.T,rt.T=null;var l=Tt.p;Tt.p=2;var d=Ie;Ie|=4;try{uv(e,r.alternate,r)}finally{Ie=d,Tt.p=l,rt.T=a}}Yn=3}}function Mv(){if(Yn===4||Yn===3){Yn=0,Ga();var e=Eo,r=Cu,a=xu,l=Ev;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?Yn=5:(Yn=0,Cu=Eo=null,Vv(e,e.pendingLanes));var d=e.pendingLanes;if(d===0&&(vo=null),Te(a),r=r.stateNode,_e&&typeof _e.onCommitFiberRoot=="function")try{_e.onCommitFiberRoot(ze,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=rt.T,d=Tt.p,Tt.p=2,rt.T=null;try{for(var g=e.onRecoverableError,b=0;b<l.length;b++){var R=l[b];g(R.value,{componentStack:R.stack})}}finally{rt.T=r,Tt.p=d}}(xu&3)!==0&&Rh(),Ps(e),d=e.pendingLanes,(a&4194090)!==0&&(d&42)!==0?e===Ym?zc++:(zc=0,Ym=e):zc=0,qc(0)}}function Vv(e,r){(e.pooledCacheLanes&=r)===0&&(r=e.pooledCache,r!=null&&(e.pooledCache=null,ml(r)))}function Rh(e){return Ov(),Nv(),Mv(),Pv()}function Pv(){if(Yn!==5)return!1;var e=Eo,r=Gm;Gm=0;var a=Te(xu),l=rt.T,d=Tt.p;try{Tt.p=32>a?32:a,rt.T=null,a=Qm,Qm=null;var g=Eo,b=xu;if(Yn=0,Cu=Eo=null,xu=0,(Ie&6)!==0)throw Error(i(331));var R=Ie;if(Ie|=4,_v(g.current),pv(g,g.current,b,a),Ie=R,qc(0,!1),_e&&typeof _e.onPostCommitFiberRoot=="function")try{_e.onPostCommitFiberRoot(ze,g)}catch{}return!0}finally{Tt.p=d,rt.T=l,Vv(e,r)}}function Uv(e,r,a){r=or(a,r),r=Rm(e.stateNode,r,2),e=br(e,r,2),e!==null&&(Li(e,2),Ps(e))}function Ne(e,r,a){if(e.tag===3)Uv(e,e,a);else for(;r!==null;){if(r.tag===3){Uv(r,e,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(vo===null||!vo.has(l))){e=or(a,e),a=j_(2),l=br(r,a,2),l!==null&&(z_(a,l,r,e),Li(l,2),Ps(l));break}}r=r.return}}function Jm(e,r,a){var l=e.pingCache;if(l===null){l=e.pingCache=new M1;var d=new Set;l.set(r,d)}else d=l.get(r),d===void 0&&(d=new Set,l.set(r,d));d.has(a)||(qm=!0,d.add(a),e=L1.bind(null,e,r,a),r.then(e,e))}function L1(e,r,a){var l=e.pingCache;l!==null&&l.delete(r),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,Pe===e&&(he&a)===a&&(tn===4||tn===3&&(he&62914560)===he&&300>nr()-$m?(Ie&2)===0&&Du(e,0):Hm|=a,Iu===he&&(Iu=0)),Ps(e)}function kv(e,r){r===0&&(r=ps()),e=no(e,r),e!==null&&(Li(e,r),Ps(e))}function B1(e){var r=e.memoizedState,a=0;r!==null&&(a=r.retryLane),kv(e,a)}function j1(e,r){var a=0;switch(e.tag){case 13:var l=e.stateNode,d=e.memoizedState;d!==null&&(a=d.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(i(314))}l!==null&&l.delete(r),kv(e,a)}function z1(e,r){return Fr(e,r)}var Ih=null,Nu=null,Wm=!1,Ch=!1,tp=!1,xl=0;function Ps(e){e!==Nu&&e.next===null&&(Nu===null?Ih=Nu=e:Nu=Nu.next=e),Ch=!0,Wm||(Wm=!0,H1())}function qc(e,r){if(!tp&&Ch){tp=!0;do for(var a=!1,l=Ih;l!==null;){if(e!==0){var d=l.pendingLanes;if(d===0)var g=0;else{var b=l.suspendedLanes,R=l.pingedLanes;g=(1<<31-On(42|e)+1)-1,g&=d&~(b&~R),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,zv(l,g))}else g=he,g=Zs(l,l===Pe?g:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(g&3)===0||Js(l,g)||(a=!0,zv(l,g));l=l.next}while(a);tp=!1}}function q1(){Lv()}function Lv(){Ch=Wm=!1;var e=0;xl!==0&&(Z1()&&(e=xl),xl=0);for(var r=nr(),a=null,l=Ih;l!==null;){var d=l.next,g=Bv(l,r);g===0?(l.next=null,a===null?Ih=d:a.next=d,d===null&&(Nu=a)):(a=l,(e!==0||(g&3)!==0)&&(Ch=!0)),l=d}qc(e)}function Bv(e,r){for(var a=e.suspendedLanes,l=e.pingedLanes,d=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var b=31-On(g),R=1<<b,U=d[b];U===-1?((R&a)===0||(R&l)!==0)&&(d[b]=Yo(R,r)):U<=r&&(e.expiredLanes|=R),g&=~R}if(r=Pe,a=he,a=Zs(e,e===r?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===r&&(Ce===2||Ce===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Ui(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||Js(e,a)){if(r=a&-a,r===e.callbackPriority)return r;switch(l!==null&&Ui(l),Te(a)){case 2:case 8:a=hs;break;case 32:a=ki;break;case 268435456:a=ds;break;default:a=ki}return l=jv.bind(null,e),a=Fr(a,l),e.callbackPriority=r,e.callbackNode=a,r}return l!==null&&l!==null&&Ui(l),e.callbackPriority=2,e.callbackNode=null,2}function jv(e,r){if(Yn!==0&&Yn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Rh()&&e.callbackNode!==a)return null;var l=he;return l=Zs(e,e===Pe?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(wv(e,l,r),Bv(e,nr()),e.callbackNode!=null&&e.callbackNode===a?jv.bind(null,e):null)}function zv(e,r){if(Rh())return null;wv(e,r,!0)}function H1(){W1(function(){(Ie&6)!==0?Fr(Ys,q1):Lv()})}function ep(){return xl===0&&(xl=Ko()),xl}function qv(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ya(""+e)}function Hv(e,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,e.id&&a.setAttribute("form",e.id),r.parentNode.insertBefore(a,r),e=new FormData(e),a.parentNode.removeChild(a),e}function F1(e,r,a,l,d){if(r==="submit"&&a&&a.stateNode===d){var g=qv((d[Ye]||null).action),b=l.submitter;b&&(r=(r=b[Ye]||null)?qv(r.formAction):b.getAttribute("formAction"),r!==null&&(g=r,b=null));var R=new ua("action","action",null,l,d);e.push({event:R,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(xl!==0){var U=b?Hv(d,b):new FormData(d);Tm(a,{pending:!0,data:U,method:d.method,action:g},null,U)}}else typeof g=="function"&&(R.preventDefault(),U=b?Hv(d,b):new FormData(d),Tm(a,{pending:!0,data:U,method:d.method,action:g},g,U))},currentTarget:d}]})}}for(var np=0;np<ll.length;np++){var rp=ll[np],$1=rp.toLowerCase(),G1=rp[0].toUpperCase()+rp.slice(1);Vr($1,"on"+G1)}Vr(yc,"onAnimationEnd"),Vr(ge,"onAnimationIteration"),Vr(_c,"onAnimationStart"),Vr("dblclick","onDoubleClick"),Vr("focusin","onFocus"),Vr("focusout","onBlur"),Vr(hm,"onTransitionRun"),Vr(vc,"onTransitionStart"),Vr(Ta,"onTransitionCancel"),Vr(cu,"onTransitionEnd"),Cr("onMouseEnter",["mouseout","mouseover"]),Cr("onMouseLeave",["mouseout","mouseover"]),Cr("onPointerEnter",["pointerout","pointerover"]),Cr("onPointerLeave",["pointerout","pointerover"]),Ir("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ir("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ir("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ir("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ir("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q1=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Hc));function Fv(e,r){r=(r&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],d=l.event;l=l.listeners;t:{var g=void 0;if(r)for(var b=l.length-1;0<=b;b--){var R=l[b],U=R.instance,X=R.currentTarget;if(R=R.listener,U!==g&&d.isPropagationStopped())break t;g=R,d.currentTarget=X;try{g(d)}catch(st){ph(st)}d.currentTarget=null,g=U}else for(b=0;b<l.length;b++){if(R=l[b],U=R.instance,X=R.currentTarget,R=R.listener,U!==g&&d.isPropagationStopped())break t;g=R,d.currentTarget=X;try{g(d)}catch(st){ph(st)}d.currentTarget=null,g=U}}}}function ae(e,r){var a=r[Bi];a===void 0&&(a=r[Bi]=new Set);var l=e+"__bubble";a.has(l)||($v(r,e,2,!1),a.add(l))}function ip(e,r,a){var l=0;r&&(l|=4),$v(a,e,l,r)}var xh="_reactListening"+Math.random().toString(36).slice(2);function sp(e){if(!e[xh]){e[xh]=!0,$t.forEach(function(a){a!=="selectionchange"&&(Q1.has(a)||ip(a,!1,e),ip(a,!0,e))});var r=e.nodeType===9?e:e.ownerDocument;r===null||r[xh]||(r[xh]=!0,ip("selectionchange",!1,r))}}function $v(e,r,a,l){switch(p0(r)){case 2:var d=ES;break;case 8:d=TS;break;default:d=vp}a=d.bind(null,r,a,e),d=void 0,!ke||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(d=!0),l?d!==void 0?e.addEventListener(r,a,{capture:!0,passive:d}):e.addEventListener(r,a,!0):d!==void 0?e.addEventListener(r,a,{passive:d}):e.addEventListener(r,a,!1)}function ap(e,r,a,l,d){var g=l;if((r&1)===0&&(r&2)===0&&l!==null)t:for(;;){if(l===null)return;var b=l.tag;if(b===3||b===4){var R=l.stateNode.containerInfo;if(R===d)break;if(b===4)for(b=l.return;b!==null;){var U=b.tag;if((U===3||U===4)&&b.stateNode.containerInfo===d)return;b=b.return}for(;R!==null;){if(b=Nn(R),b===null)return;if(U=b.tag,U===5||U===6||U===26||U===27){l=g=b;continue t}R=R.parentNode}}l=l.return}el(function(){var X=g,st=_r(a),lt=[];t:{var W=Zi.get(e);if(W!==void 0){var et=ua,Ht=e;switch(e){case"keypress":if(Jr(a)===0)break t;case"keydown":case"keyup":et=Xa;break;case"focusin":Ht="focus",et=ha;break;case"focusout":Ht="blur",et=ha;break;case"beforeblur":case"afterblur":et=ha;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":et=Er;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":et=Jl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":et=Za;break;case yc:case ge:case _c:et=ma;break;case cu:et=Ti;break;case"scroll":case"scrollend":et=rl;break;case"wheel":et=ya;break;case"copy":case"cut":case"paste":et=pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":et=Ei;break;case"toggle":case"beforetoggle":et=ol}var kt=(r&4)!==0,De=!kt&&(e==="scroll"||e==="scrollend"),G=kt?W!==null?W+"Capture":null:W;kt=[];for(var H=X,K;H!==null;){var at=H;if(K=at.stateNode,at=at.tag,at!==5&&at!==26&&at!==27||K===null||G===null||(at=$i(H,G),at!=null&&kt.push(Fc(H,at,K))),De)break;H=H.return}0<kt.length&&(W=new et(W,Ht,null,a,st),lt.push({event:W,listeners:kt}))}}if((r&7)===0){t:{if(W=e==="mouseover"||e==="pointerover",et=e==="mouseout"||e==="pointerout",W&&a!==_i&&(Ht=a.relatedTarget||a.fromElement)&&(Nn(Ht)||Ht[Rr]))break t;if((et||W)&&(W=st.window===st?st:(W=st.ownerDocument)?W.defaultView||W.parentWindow:window,et?(Ht=a.relatedTarget||a.toElement,et=X,Ht=Ht?Nn(Ht):null,Ht!==null&&(De=u(Ht),kt=Ht.tag,Ht!==De||kt!==5&&kt!==27&&kt!==6)&&(Ht=null)):(et=null,Ht=X),et!==Ht)){if(kt=Er,at="onMouseLeave",G="onMouseEnter",H="mouse",(e==="pointerout"||e==="pointerover")&&(kt=Ei,at="onPointerLeave",G="onPointerEnter",H="pointer"),De=et==null?W:D(et),K=Ht==null?W:D(Ht),W=new kt(at,H+"leave",et,a,st),W.target=De,W.relatedTarget=K,at=null,Nn(st)===X&&(kt=new kt(G,H+"enter",Ht,a,st),kt.target=K,kt.relatedTarget=De,at=kt),De=at,et&&Ht)e:{for(kt=et,G=Ht,H=0,K=kt;K;K=Mu(K))H++;for(K=0,at=G;at;at=Mu(at))K++;for(;0<H-K;)kt=Mu(kt),H--;for(;0<K-H;)G=Mu(G),K--;for(;H--;){if(kt===G||G!==null&&kt===G.alternate)break e;kt=Mu(kt),G=Mu(G)}kt=null}else kt=null;et!==null&&Gv(lt,W,et,kt,!1),Ht!==null&&De!==null&&Gv(lt,De,Ht,kt,!0)}}t:{if(W=X?D(X):window,et=W.nodeName&&W.nodeName.toLowerCase(),et==="select"||et==="input"&&W.type==="file")var Ct=fc;else if(Xe(W))if(hc)Ct=sr;else{Ct=dc;var ee=Yf}else et=W.nodeName,!et||et.toLowerCase()!=="input"||W.type!=="checkbox"&&W.type!=="radio"?X&&oa(X.elementType)&&(Ct=fc):Ct=an;if(Ct&&(Ct=Ct(e,X))){wi(lt,Ct,a,st);break t}ee&&ee(e,W,X),e==="focusout"&&X&&W.type==="number"&&X.memoizedProps.value!=null&&Yr(W,"number",W.value)}switch(ee=X?D(X):window,e){case"focusin":(Xe(ee)||ee.contentEditable==="true")&&(Ea=ee,lu=X,to=null);break;case"focusout":to=lu=Ea=null;break;case"mousedown":uu=!0;break;case"contextmenu":case"mouseup":case"dragend":uu=!1,pc(lt,a,st);break;case"selectionchange":if(Xf)break;case"keydown":case"keyup":pc(lt,a,st)}var Nt;if(An)t:{switch(e){case"compositionstart":var Bt="onCompositionStart";break t;case"compositionend":Bt="onCompositionEnd";break t;case"compositionupdate":Bt="onCompositionUpdate";break t}Bt=void 0}else re?nt(e,a)&&(Bt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(Bt="onCompositionStart");Bt&&(w&&a.locale!=="ko"&&(re||Bt!=="onCompositionStart"?Bt==="onCompositionEnd"&&re&&(Nt=Ka()):(Zr=st,Qi="value"in Zr?Zr.value:Zr.textContent,re=!0)),ee=Dh(X,Bt),0<ee.length&&(Bt=new sl(Bt,e,null,a,st),lt.push({event:Bt,listeners:ee}),Nt?Bt.data=Nt:(Nt=_t(a),Nt!==null&&(Bt.data=Nt)))),(Nt=_?Ke(e,a):ie(e,a))&&(Bt=Dh(X,"onBeforeInput"),0<Bt.length&&(ee=new sl("onBeforeInput","beforeinput",null,a,st),lt.push({event:ee,listeners:Bt}),ee.data=Nt)),F1(lt,e,X,a,st)}Fv(lt,r)})}function Fc(e,r,a){return{instance:e,listener:r,currentTarget:a}}function Dh(e,r){for(var a=r+"Capture",l=[];e!==null;){var d=e,g=d.stateNode;if(d=d.tag,d!==5&&d!==26&&d!==27||g===null||(d=$i(e,a),d!=null&&l.unshift(Fc(e,d,g)),d=$i(e,r),d!=null&&l.push(Fc(e,d,g))),e.tag===3)return l;e=e.return}return[]}function Mu(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Gv(e,r,a,l,d){for(var g=r._reactName,b=[];a!==null&&a!==l;){var R=a,U=R.alternate,X=R.stateNode;if(R=R.tag,U!==null&&U===l)break;R!==5&&R!==26&&R!==27||X===null||(U=X,d?(X=$i(a,g),X!=null&&b.unshift(Fc(a,X,U))):d||(X=$i(a,g),X!=null&&b.push(Fc(a,X,U)))),a=a.return}b.length!==0&&e.push({event:r,listeners:b})}var Y1=/\r\n?/g,K1=/\u0000|\uFFFD/g;function Qv(e){return(typeof e=="string"?e:""+e).replace(Y1,`
`).replace(K1,"")}function Yv(e,r){return r=Qv(r),Qv(e)===r}function Oh(){}function xe(e,r,a,l,d,g){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Vn(e,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Vn(e,""+l);break;case"className":Qr(e,"class",l);break;case"tabIndex":Qr(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Qr(e,a,l);break;case"style":Kr(e,l,g);break;case"data":if(r!=="object"){Qr(e,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ya(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(r!=="input"&&xe(e,r,"name",d.name,d,null),xe(e,r,"formEncType",d.formEncType,d,null),xe(e,r,"formMethod",d.formMethod,d,null),xe(e,r,"formTarget",d.formTarget,d,null)):(xe(e,r,"encType",d.encType,d,null),xe(e,r,"method",d.method,d,null),xe(e,r,"target",d.target,d,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ya(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=Oh);break;case"onScroll":l!=null&&ae("scroll",e);break;case"onScrollEnd":l!=null&&ae("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Ya(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":ae("beforetoggle",e),ae("toggle",e),Gr(e,"popover",l);break;case"xlinkActuate":bn(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":bn(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":bn(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":bn(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":bn(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":bn(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":bn(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":bn(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":bn(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Gr(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=cc.get(a)||a,Gr(e,a,l))}}function op(e,r,a,l,d,g){switch(a){case"style":Kr(e,l,g);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(i(61));if(a=l.__html,a!=null){if(d.children!=null)throw Error(i(60));e.innerHTML=a}}break;case"children":typeof l=="string"?Vn(e,l):(typeof l=="number"||typeof l=="bigint")&&Vn(e,""+l);break;case"onScroll":l!=null&&ae("scroll",e);break;case"onScrollEnd":l!=null&&ae("scrollend",e);break;case"onClick":l!=null&&(e.onclick=Oh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!gr.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(d=a.endsWith("Capture"),r=a.slice(2,d?a.length-7:void 0),g=e[Ye]||null,g=g!=null?g[a]:null,typeof g=="function"&&e.removeEventListener(r,g,d),typeof l=="function")){typeof g!="function"&&g!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(r,l,d);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):Gr(e,a,l)}}}function Kn(e,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ae("error",e),ae("load",e);var l=!1,d=!1,g;for(g in a)if(a.hasOwnProperty(g)){var b=a[g];if(b!=null)switch(g){case"src":l=!0;break;case"srcSet":d=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:xe(e,r,g,b,a,null)}}d&&xe(e,r,"srcSet",a.srcSet,a,null),l&&xe(e,r,"src",a.src,a,null);return;case"input":ae("invalid",e);var R=g=b=d=null,U=null,X=null;for(l in a)if(a.hasOwnProperty(l)){var st=a[l];if(st!=null)switch(l){case"name":d=st;break;case"type":b=st;break;case"checked":U=st;break;case"defaultChecked":X=st;break;case"value":g=st;break;case"defaultValue":R=st;break;case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,r));break;default:xe(e,r,l,st,a,null)}}qi(e,g,R,U,X,b,d,!1),sa(e);return;case"select":ae("invalid",e),l=b=g=null;for(d in a)if(a.hasOwnProperty(d)&&(R=a[d],R!=null))switch(d){case"value":g=R;break;case"defaultValue":b=R;break;case"multiple":l=R;default:xe(e,r,d,R,a,null)}r=g,a=b,e.multiple=!!l,r!=null?Hi(e,!!l,r,!1):a!=null&&Hi(e,!!l,a,!0);return;case"textarea":ae("invalid",e),g=d=l=null;for(b in a)if(a.hasOwnProperty(b)&&(R=a[b],R!=null))switch(b){case"value":l=R;break;case"defaultValue":d=R;break;case"children":g=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:xe(e,r,b,R,a,null)}aa(e,l,d,g),sa(e);return;case"option":for(U in a)if(a.hasOwnProperty(U)&&(l=a[U],l!=null))switch(U){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:xe(e,r,U,l,a,null)}return;case"dialog":ae("beforetoggle",e),ae("toggle",e),ae("cancel",e),ae("close",e);break;case"iframe":case"object":ae("load",e);break;case"video":case"audio":for(l=0;l<Hc.length;l++)ae(Hc[l],e);break;case"image":ae("error",e),ae("load",e);break;case"details":ae("toggle",e);break;case"embed":case"source":case"link":ae("error",e),ae("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(X in a)if(a.hasOwnProperty(X)&&(l=a[X],l!=null))switch(X){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,r));default:xe(e,r,X,l,a,null)}return;default:if(oa(r)){for(st in a)a.hasOwnProperty(st)&&(l=a[st],l!==void 0&&op(e,r,st,l,a,void 0));return}}for(R in a)a.hasOwnProperty(R)&&(l=a[R],l!=null&&xe(e,r,R,l,a,null))}function X1(e,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var d=null,g=null,b=null,R=null,U=null,X=null,st=null;for(et in a){var lt=a[et];if(a.hasOwnProperty(et)&&lt!=null)switch(et){case"checked":break;case"value":break;case"defaultValue":U=lt;default:l.hasOwnProperty(et)||xe(e,r,et,null,l,lt)}}for(var W in l){var et=l[W];if(lt=a[W],l.hasOwnProperty(W)&&(et!=null||lt!=null))switch(W){case"type":g=et;break;case"name":d=et;break;case"checked":X=et;break;case"defaultChecked":st=et;break;case"value":b=et;break;case"defaultValue":R=et;break;case"children":case"dangerouslySetInnerHTML":if(et!=null)throw Error(i(137,r));break;default:et!==lt&&xe(e,r,W,et,l,lt)}}$n(e,b,R,U,X,st,g,d);return;case"select":et=b=R=W=null;for(g in a)if(U=a[g],a.hasOwnProperty(g)&&U!=null)switch(g){case"value":break;case"multiple":et=U;default:l.hasOwnProperty(g)||xe(e,r,g,null,l,U)}for(d in l)if(g=l[d],U=a[d],l.hasOwnProperty(d)&&(g!=null||U!=null))switch(d){case"value":W=g;break;case"defaultValue":R=g;break;case"multiple":b=g;default:g!==U&&xe(e,r,d,g,l,U)}r=R,a=b,l=et,W!=null?Hi(e,!!a,W,!1):!!l!=!!a&&(r!=null?Hi(e,!!a,r,!0):Hi(e,!!a,a?[]:"",!1));return;case"textarea":et=W=null;for(R in a)if(d=a[R],a.hasOwnProperty(R)&&d!=null&&!l.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:xe(e,r,R,null,l,d)}for(b in l)if(d=l[b],g=a[b],l.hasOwnProperty(b)&&(d!=null||g!=null))switch(b){case"value":W=d;break;case"defaultValue":et=d;break;case"children":break;case"dangerouslySetInnerHTML":if(d!=null)throw Error(i(91));break;default:d!==g&&xe(e,r,b,d,l,g)}be(e,W,et);return;case"option":for(var Ht in a)if(W=a[Ht],a.hasOwnProperty(Ht)&&W!=null&&!l.hasOwnProperty(Ht))switch(Ht){case"selected":e.selected=!1;break;default:xe(e,r,Ht,null,l,W)}for(U in l)if(W=l[U],et=a[U],l.hasOwnProperty(U)&&W!==et&&(W!=null||et!=null))switch(U){case"selected":e.selected=W&&typeof W!="function"&&typeof W!="symbol";break;default:xe(e,r,U,W,l,et)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var kt in a)W=a[kt],a.hasOwnProperty(kt)&&W!=null&&!l.hasOwnProperty(kt)&&xe(e,r,kt,null,l,W);for(X in l)if(W=l[X],et=a[X],l.hasOwnProperty(X)&&W!==et&&(W!=null||et!=null))switch(X){case"children":case"dangerouslySetInnerHTML":if(W!=null)throw Error(i(137,r));break;default:xe(e,r,X,W,l,et)}return;default:if(oa(r)){for(var De in a)W=a[De],a.hasOwnProperty(De)&&W!==void 0&&!l.hasOwnProperty(De)&&op(e,r,De,void 0,l,W);for(st in l)W=l[st],et=a[st],!l.hasOwnProperty(st)||W===et||W===void 0&&et===void 0||op(e,r,st,W,l,et);return}}for(var G in a)W=a[G],a.hasOwnProperty(G)&&W!=null&&!l.hasOwnProperty(G)&&xe(e,r,G,null,l,W);for(lt in l)W=l[lt],et=a[lt],!l.hasOwnProperty(lt)||W===et||W==null&&et==null||xe(e,r,lt,W,l,et)}var lp=null,up=null;function Nh(e){return e.nodeType===9?e:e.ownerDocument}function Kv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xv(e,r){if(e===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&r==="foreignObject"?0:e}function cp(e,r){return e==="textarea"||e==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var fp=null;function Z1(){var e=window.event;return e&&e.type==="popstate"?e===fp?!1:(fp=e,!0):(fp=null,!1)}var Zv=typeof setTimeout=="function"?setTimeout:void 0,J1=typeof clearTimeout=="function"?clearTimeout:void 0,Jv=typeof Promise=="function"?Promise:void 0,W1=typeof queueMicrotask=="function"?queueMicrotask:typeof Jv<"u"?function(e){return Jv.resolve(null).then(e).catch(tS)}:Zv;function tS(e){setTimeout(function(){throw e})}function wo(e){return e==="head"}function Wv(e,r){var a=r,l=0,d=0;do{var g=a.nextSibling;if(e.removeChild(a),g&&g.nodeType===8)if(a=g.data,a==="/$"){if(0<l&&8>l){a=l;var b=e.ownerDocument;if(a&1&&$c(b.documentElement),a&2&&$c(b.body),a&4)for(a=b.head,$c(a),b=a.firstChild;b;){var R=b.nextSibling,U=b.nodeName;b[ea]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&b.rel.toLowerCase()==="stylesheet"||a.removeChild(b),b=R}}if(d===0){e.removeChild(g),Wc(r);return}d--}else a==="$"||a==="$?"||a==="$!"?d++:l=a.charCodeAt(0)-48;else l=0;a=g}while(a);Wc(r)}function hp(e){var r=e.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":hp(a),Fn(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function eS(e,r,a,l){for(;e.nodeType===1;){var d=a;if(e.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[ea])switch(r){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==d.rel||e.getAttribute("href")!==(d.href==null||d.href===""?null:d.href)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin)||e.getAttribute("title")!==(d.title==null?null:d.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(d.src==null?null:d.src)||e.getAttribute("type")!==(d.type==null?null:d.type)||e.getAttribute("crossorigin")!==(d.crossOrigin==null?null:d.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(r==="input"&&e.type==="hidden"){var g=d.name==null?null:""+d.name;if(d.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=ls(e.nextSibling),e===null)break}return null}function nS(e,r,a){if(r==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=ls(e.nextSibling),e===null))return null;return e}function dp(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function rS(e,r){var a=e.ownerDocument;if(e.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function ls(e){for(;e!=null;e=e.nextSibling){var r=e.nodeType;if(r===1||r===3)break;if(r===8){if(r=e.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return e}var mp=null;function t0(e){e=e.previousSibling;for(var r=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return e;r--}else a==="/$"&&r++}e=e.previousSibling}return null}function e0(e,r,a){switch(r=Nh(a),e){case"html":if(e=r.documentElement,!e)throw Error(i(452));return e;case"head":if(e=r.head,!e)throw Error(i(453));return e;case"body":if(e=r.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function $c(e){for(var r=e.attributes;r.length;)e.removeAttributeNode(r[0]);Fn(e)}var Oi=new Map,n0=new Set;function Mh(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var La=Tt.d;Tt.d={f:iS,r:sS,D:aS,C:oS,L:lS,m:uS,X:fS,S:cS,M:hS};function iS(){var e=La.f(),r=Ah();return e||r}function sS(e){var r=ht(e);r!==null&&r.tag===5&&r.type==="form"?w_(r):La.r(e)}var Vu=typeof document>"u"?null:document;function r0(e,r,a){var l=Vu;if(l&&typeof r=="string"&&r){var d=we(r);d='link[rel="'+e+'"][href="'+d+'"]',typeof a=="string"&&(d+='[crossorigin="'+a+'"]'),n0.has(d)||(n0.add(d),e={rel:e,crossOrigin:a,href:r},l.querySelector(d)===null&&(r=l.createElement("link"),Kn(r,"link",e),Gt(r),l.head.appendChild(r)))}}function aS(e){La.D(e),r0("dns-prefetch",e,null)}function oS(e,r){La.C(e,r),r0("preconnect",e,r)}function lS(e,r,a){La.L(e,r,a);var l=Vu;if(l&&e&&r){var d='link[rel="preload"][as="'+we(r)+'"]';r==="image"&&a&&a.imageSrcSet?(d+='[imagesrcset="'+we(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(d+='[imagesizes="'+we(a.imageSizes)+'"]')):d+='[href="'+we(e)+'"]';var g=d;switch(r){case"style":g=Pu(e);break;case"script":g=Uu(e)}Oi.has(g)||(e=S({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:e,as:r},a),Oi.set(g,e),l.querySelector(d)!==null||r==="style"&&l.querySelector(Gc(g))||r==="script"&&l.querySelector(Qc(g))||(r=l.createElement("link"),Kn(r,"link",e),Gt(r),l.head.appendChild(r)))}}function uS(e,r){La.m(e,r);var a=Vu;if(a&&e){var l=r&&typeof r.as=="string"?r.as:"script",d='link[rel="modulepreload"][as="'+we(l)+'"][href="'+we(e)+'"]',g=d;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Uu(e)}if(!Oi.has(g)&&(e=S({rel:"modulepreload",href:e},r),Oi.set(g,e),a.querySelector(d)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Qc(g)))return}l=a.createElement("link"),Kn(l,"link",e),Gt(l),a.head.appendChild(l)}}}function cS(e,r,a){La.S(e,r,a);var l=Vu;if(l&&e){var d=Lt(l).hoistableStyles,g=Pu(e);r=r||"default";var b=d.get(g);if(!b){var R={loading:0,preload:null};if(b=l.querySelector(Gc(g)))R.loading=5;else{e=S({rel:"stylesheet",href:e,"data-precedence":r},a),(a=Oi.get(g))&&pp(e,a);var U=b=l.createElement("link");Gt(U),Kn(U,"link",e),U._p=new Promise(function(X,st){U.onload=X,U.onerror=st}),U.addEventListener("load",function(){R.loading|=1}),U.addEventListener("error",function(){R.loading|=2}),R.loading|=4,Vh(b,r,l)}b={type:"stylesheet",instance:b,count:1,state:R},d.set(g,b)}}}function fS(e,r){La.X(e,r);var a=Vu;if(a&&e){var l=Lt(a).hoistableScripts,d=Uu(e),g=l.get(d);g||(g=a.querySelector(Qc(d)),g||(e=S({src:e,async:!0},r),(r=Oi.get(d))&&gp(e,r),g=a.createElement("script"),Gt(g),Kn(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(d,g))}}function hS(e,r){La.M(e,r);var a=Vu;if(a&&e){var l=Lt(a).hoistableScripts,d=Uu(e),g=l.get(d);g||(g=a.querySelector(Qc(d)),g||(e=S({src:e,async:!0,type:"module"},r),(r=Oi.get(d))&&gp(e,r),g=a.createElement("script"),Gt(g),Kn(g,"link",e),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},l.set(d,g))}}function i0(e,r,a,l){var d=(d=Ut.current)?Mh(d):null;if(!d)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=Pu(a.href),a=Lt(d).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=Pu(a.href);var g=Lt(d).hoistableStyles,b=g.get(e);if(b||(d=d.ownerDocument||d,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,b),(g=d.querySelector(Gc(e)))&&!g._p&&(b.instance=g,b.state.loading=5),Oi.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Oi.set(e,a),g||dS(d,e,a,b.state))),r&&l===null)throw Error(i(528,""));return b}if(r&&l!==null)throw Error(i(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=Uu(a),a=Lt(d).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Pu(e){return'href="'+we(e)+'"'}function Gc(e){return'link[rel="stylesheet"]['+e+"]"}function s0(e){return S({},e,{"data-precedence":e.precedence,precedence:null})}function dS(e,r,a,l){e.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=e.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Kn(r,"link",a),Gt(r),e.head.appendChild(r))}function Uu(e){return'[src="'+we(e)+'"]'}function Qc(e){return"script[async]"+e}function a0(e,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=e.querySelector('style[data-href~="'+we(a.href)+'"]');if(l)return r.instance=l,Gt(l),l;var d=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Gt(l),Kn(l,"style",d),Vh(l,a.precedence,e),r.instance=l;case"stylesheet":d=Pu(a.href);var g=e.querySelector(Gc(d));if(g)return r.state.loading|=4,r.instance=g,Gt(g),g;l=s0(a),(d=Oi.get(d))&&pp(l,d),g=(e.ownerDocument||e).createElement("link"),Gt(g);var b=g;return b._p=new Promise(function(R,U){b.onload=R,b.onerror=U}),Kn(g,"link",l),r.state.loading|=4,Vh(g,a.precedence,e),r.instance=g;case"script":return g=Uu(a.src),(d=e.querySelector(Qc(g)))?(r.instance=d,Gt(d),d):(l=a,(d=Oi.get(g))&&(l=S({},a),gp(l,d)),e=e.ownerDocument||e,d=e.createElement("script"),Gt(d),Kn(d,"link",l),e.head.appendChild(d),r.instance=d);case"void":return null;default:throw Error(i(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Vh(l,a.precedence,e));return r.instance}function Vh(e,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),d=l.length?l[l.length-1]:null,g=d,b=0;b<l.length;b++){var R=l[b];if(R.dataset.precedence===r)g=R;else if(g!==d)break}g?g.parentNode.insertBefore(e,g.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(e,r.firstChild))}function pp(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.title==null&&(e.title=r.title)}function gp(e,r){e.crossOrigin==null&&(e.crossOrigin=r.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=r.referrerPolicy),e.integrity==null&&(e.integrity=r.integrity)}var Ph=null;function o0(e,r,a){if(Ph===null){var l=new Map,d=Ph=new Map;d.set(a,l)}else d=Ph,l=d.get(a),l||(l=new Map,d.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),d=0;d<a.length;d++){var g=a[d];if(!(g[ea]||g[nn]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(r)||"";b=e+b;var R=l.get(b);R?R.push(g):l.set(b,[g])}}return l}function l0(e,r,a){e=e.ownerDocument||e,e.head.insertBefore(a,r==="title"?e.querySelector("head > title"):null)}function mS(e,r,a){if(a===1||r.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return e=r.disabled,typeof r.precedence=="string"&&e==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function u0(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}var Yc=null;function pS(){}function gS(e,r,a){if(Yc===null)throw Error(i(475));var l=Yc;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var d=Pu(a.href),g=e.querySelector(Gc(d));if(g){e=g._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(l.count++,l=Uh.bind(l),e.then(l,l)),r.state.loading|=4,r.instance=g,Gt(g);return}g=e.ownerDocument||e,a=s0(a),(d=Oi.get(d))&&pp(a,d),g=g.createElement("link"),Gt(g);var b=g;b._p=new Promise(function(R,U){b.onload=R,b.onerror=U}),Kn(g,"link",a),r.instance=g}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,e),(e=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Uh.bind(l),e.addEventListener("load",r),e.addEventListener("error",r))}}function yS(){if(Yc===null)throw Error(i(475));var e=Yc;return e.stylesheets&&e.count===0&&yp(e,e.stylesheets),0<e.count?function(r){var a=setTimeout(function(){if(e.stylesheets&&yp(e,e.stylesheets),e.unsuspend){var l=e.unsuspend;e.unsuspend=null,l()}},6e4);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(a)}}:null}function Uh(){if(this.count--,this.count===0){if(this.stylesheets)yp(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var kh=null;function yp(e,r){e.stylesheets=null,e.unsuspend!==null&&(e.count++,kh=new Map,r.forEach(_S,e),kh=null,Uh.call(e))}function _S(e,r){if(!(r.state.loading&4)){var a=kh.get(e);if(a)var l=a.get(null);else{a=new Map,kh.set(e,a);for(var d=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<d.length;g++){var b=d[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(a.set(b.dataset.precedence,b),l=b)}l&&a.set(null,l)}d=r.instance,b=d.getAttribute("data-precedence"),g=a.get(b)||l,g===l&&a.set(null,d),a.set(b,d),this.count++,l=Uh.bind(this),d.addEventListener("load",l),d.addEventListener("error",l),g?g.parentNode.insertBefore(d,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(d,e.firstChild)),r.state.loading|=4}}var Kc={$$typeof:wt,Provider:null,Consumer:null,_currentValue:Ot,_currentValue2:Ot,_threadCount:0};function vS(e,r,a,l,d,g,b,R){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=hi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=hi(0),this.hiddenUpdates=hi(null),this.identifierPrefix=l,this.onUncaughtError=d,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=R,this.incompleteTransitions=new Map}function c0(e,r,a,l,d,g,b,R,U,X,st,lt){return e=new vS(e,r,a,b,R,U,X,lt),r=1,g===!0&&(r|=24),g=Un(3,null,null,r),e.current=g,g.stateNode=e,r=Ac(),r.refCount++,e.pooledCache=r,r.refCount++,g.memoizedState={element:l,isDehydrated:a,cache:r},Rc(g),e}function f0(e){return e?(e=ro,e):ro}function h0(e,r,a,l,d,g){d=f0(d),l.context===null?l.context=d:l.pendingContext=d,l=xs(r),l.payload={element:a},g=g===void 0?null:g,g!==null&&(l.callback=g),a=br(e,l,r),a!==null&&(li(a,e,r),Ds(a,e,r))}function d0(e,r){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<r?a:r}}function _p(e,r){d0(e,r),(e=e.alternate)&&d0(e,r)}function m0(e){if(e.tag===13){var r=no(e,67108864);r!==null&&li(r,e,67108864),_p(e,67108864)}}var Lh=!0;function ES(e,r,a,l){var d=rt.T;rt.T=null;var g=Tt.p;try{Tt.p=2,vp(e,r,a,l)}finally{Tt.p=g,rt.T=d}}function TS(e,r,a,l){var d=rt.T;rt.T=null;var g=Tt.p;try{Tt.p=8,vp(e,r,a,l)}finally{Tt.p=g,rt.T=d}}function vp(e,r,a,l){if(Lh){var d=Ep(l);if(d===null)ap(e,r,l,Bh,a),g0(e,l);else if(bS(d,e,r,a,l))l.stopPropagation();else if(g0(e,l),r&4&&-1<wS.indexOf(e)){for(;d!==null;){var g=ht(d);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=$r(g.pendingLanes);if(b!==0){var R=g;for(R.pendingLanes|=2,R.entangledLanes|=2;b;){var U=1<<31-On(b);R.entanglements[1]|=U,b&=~U}Ps(g),(Ie&6)===0&&(wh=nr()+500,qc(0))}}break;case 13:R=no(g,2),R!==null&&li(R,g,2),Ah(),_p(g,2)}if(g=Ep(l),g===null&&ap(e,r,l,Bh,a),g===d)break;d=g}d!==null&&l.stopPropagation()}else ap(e,r,l,null,a)}}function Ep(e){return e=_r(e),Tp(e)}var Bh=null;function Tp(e){if(Bh=null,e=Nn(e),e!==null){var r=u(e);if(r===null)e=null;else{var a=r.tag;if(a===13){if(e=m(r),e!==null)return e;e=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;e=null}else r!==e&&(e=null)}}return Bh=e,null}function p0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch($o()){case Ys:return 2;case hs:return 8;case ki:case Go:return 32;case ds:return 268435456;default:return 32}default:return 32}}var wp=!1,bo=null,Ao=null,So=null,Xc=new Map,Zc=new Map,Ro=[],wS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function g0(e,r){switch(e){case"focusin":case"focusout":bo=null;break;case"dragenter":case"dragleave":Ao=null;break;case"mouseover":case"mouseout":So=null;break;case"pointerover":case"pointerout":Xc.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zc.delete(r.pointerId)}}function Jc(e,r,a,l,d,g){return e===null||e.nativeEvent!==g?(e={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:g,targetContainers:[d]},r!==null&&(r=ht(r),r!==null&&m0(r)),e):(e.eventSystemFlags|=l,r=e.targetContainers,d!==null&&r.indexOf(d)===-1&&r.push(d),e)}function bS(e,r,a,l,d){switch(r){case"focusin":return bo=Jc(bo,e,r,a,l,d),!0;case"dragenter":return Ao=Jc(Ao,e,r,a,l,d),!0;case"mouseover":return So=Jc(So,e,r,a,l,d),!0;case"pointerover":var g=d.pointerId;return Xc.set(g,Jc(Xc.get(g)||null,e,r,a,l,d)),!0;case"gotpointercapture":return g=d.pointerId,Zc.set(g,Jc(Zc.get(g)||null,e,r,a,l,d)),!0}return!1}function y0(e){var r=Nn(e.target);if(r!==null){var a=u(r);if(a!==null){if(r=a.tag,r===13){if(r=m(a),r!==null){e.blockedOn=r,Ws(e.priority,function(){if(a.tag===13){var l=oi();l=gs(l);var d=no(a,l);d!==null&&li(d,a,l),_p(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function jh(e){if(e.blockedOn!==null)return!1;for(var r=e.targetContainers;0<r.length;){var a=Ep(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);_i=l,a.target.dispatchEvent(l),_i=null}else return r=ht(a),r!==null&&m0(r),e.blockedOn=a,!1;r.shift()}return!0}function _0(e,r,a){jh(e)&&a.delete(r)}function AS(){wp=!1,bo!==null&&jh(bo)&&(bo=null),Ao!==null&&jh(Ao)&&(Ao=null),So!==null&&jh(So)&&(So=null),Xc.forEach(_0),Zc.forEach(_0)}function zh(e,r){e.blockedOn===r&&(e.blockedOn=null,wp||(wp=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,AS)))}var qh=null;function v0(e){qh!==e&&(qh=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){qh===e&&(qh=null);for(var r=0;r<e.length;r+=3){var a=e[r],l=e[r+1],d=e[r+2];if(typeof l!="function"){if(Tp(l||a)===null)continue;break}var g=ht(a);g!==null&&(e.splice(r,3),r-=3,Tm(g,{pending:!0,data:d,method:a.method,action:l},l,d))}}))}function Wc(e){function r(U){return zh(U,e)}bo!==null&&zh(bo,e),Ao!==null&&zh(Ao,e),So!==null&&zh(So,e),Xc.forEach(r),Zc.forEach(r);for(var a=0;a<Ro.length;a++){var l=Ro[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<Ro.length&&(a=Ro[0],a.blockedOn===null);)y0(a),a.blockedOn===null&&Ro.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var d=a[l],g=a[l+1],b=d[Ye]||null;if(typeof g=="function")b||v0(a);else if(b){var R=null;if(g&&g.hasAttribute("formAction")){if(d=g,b=g[Ye]||null)R=b.formAction;else if(Tp(d)!==null)continue}else R=b.action;typeof R=="function"?a[l+1]=R:(a.splice(l,3),l-=3),v0(a)}}}function bp(e){this._internalRoot=e}Hh.prototype.render=bp.prototype.render=function(e){var r=this._internalRoot;if(r===null)throw Error(i(409));var a=r.current,l=oi();h0(a,l,e,r,null,null)},Hh.prototype.unmount=bp.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var r=e.containerInfo;h0(e.current,2,null,e,null,null),Ah(),r[Rr]=null}};function Hh(e){this._internalRoot=e}Hh.prototype.unstable_scheduleHydration=function(e){if(e){var r=pe();e={blockedOn:null,target:e,priority:r};for(var a=0;a<Ro.length&&r!==0&&r<Ro[a].priority;a++);Ro.splice(a,0,e),a===0&&y0(e)}};var E0=t.version;if(E0!=="19.1.0")throw Error(i(527,E0,"19.1.0"));Tt.findDOMNode=function(e){var r=e._reactInternals;if(r===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=E(r),e=e!==null?T(e):null,e=e===null?null:e.stateNode,e};var SS={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:rt,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fh.isDisabled&&Fh.supportsFiber)try{ze=Fh.inject(SS),_e=Fh}catch{}}return rf.createRoot=function(e,r){if(!o(e))throw Error(i(299));var a=!1,l="",d=U_,g=k_,b=L_,R=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(d=r.onUncaughtError),r.onCaughtError!==void 0&&(g=r.onCaughtError),r.onRecoverableError!==void 0&&(b=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(R=r.unstable_transitionCallbacks)),r=c0(e,1,!1,null,null,a,l,d,g,b,R,null),e[Rr]=r.current,sp(e),new bp(r)},rf.hydrateRoot=function(e,r,a){if(!o(e))throw Error(i(299));var l=!1,d="",g=U_,b=k_,R=L_,U=null,X=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(d=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(R=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(U=a.unstable_transitionCallbacks),a.formState!==void 0&&(X=a.formState)),r=c0(e,1,!0,r,a??null,l,d,g,b,R,U,X),r.context=f0(null),a=r.current,l=oi(),l=gs(l),d=xs(l),d.callback=null,br(a,d,l),a=l,r.current.lanes=a,Li(r,a),Ps(r),e[Rr]=r.current,sp(e),new Hh(r)},rf.version="19.1.0",rf}var CT;function ON(){if(CT)return Qp.exports;CT=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Qp.exports=DN(),Qp.exports}var NN=ON();let MN=document.getElementById("tirc_content"),VN=["Inex antoinette"],PN=0;NN.createRoot(MN).render(It.jsx(SN,{phraseindex:PN,phrases:VN}))});export default UN();
